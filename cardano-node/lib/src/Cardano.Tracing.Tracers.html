<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE PackageImports #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans  #-}</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Tracing.Tracers</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier">Tracers</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier">TraceOptions</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier">mkTracers</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracersP2P"><span class="hs-identifier">nullTracersP2P</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracersNonP2P"><span class="hs-identifier">nullTracersNonP2P</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier">traceCounter</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">show</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">show</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">getMonotonicTimeNSec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Read</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DeserialiseFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.IntPSQ</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntPSQ</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntPSQ</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pq</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SMap</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">Data.Time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">NominalDiffTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">UTCTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Metrics.Counter</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Counter</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Metrics.Gauge</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gauge</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Metrics.Label</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Label</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Remote.Monitoring</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EKG</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="hs-string">&quot;contra-tracer&quot;</span><span> </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer.Transformers</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Slotting.Slot</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EpochNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">WithOrigin</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Aggregated</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Measurable</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">annotateSeverity</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Transformers</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Internal.ElidingTracer</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Trace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">traceNamedObject</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Tracing</span></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Block</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockConfig</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">BlockProtocol</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">CannotForge</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ConvertRawHash</span></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>                   </span><span class="annot"><span class="hs-identifier">ForgeStateInfo</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ForgeStateUpdateError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Header</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">realPointSlot</span></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.BlockchainTime</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SystemStart</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>                   </span><span class="annot"><span class="hs-identifier">TraceBlockchainTimeEvent</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OtherHeaderEnvelopeError</span></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Abstract</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LedgerErr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LedgerState</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ledgerState</span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Inspect</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">InspectLedger</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LedgerEvent</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Query</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockQuery</span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ApplyTxErr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GenTx</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GenTxId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HasTxs</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>                   </span><span class="annot"><span class="hs-identifier">LedgerSupportsMempool</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsProtocol</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LedgerSupportsProtocol</span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Mempool.API</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MempoolSize</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TraceEventMempool</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Network.NodeToClient</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NodeToClient</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Network.NodeToNode</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NodeToNode</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NetworkP2PMode</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node.Run</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">RunNode</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node.Tracers</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Protocol.Abstract</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ValidationErr</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Protocol.Ledger.HotKey</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HotKey</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Util.Enclose</span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.AnchoredFragment</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AF</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Block</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ChainUpdate</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>                   </span><span class="annot"><span class="hs-identifier">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Point</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StandardHash</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">blockNo</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pointSlot</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unBlockNo</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.BlockFetch.ClientState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TraceFetchClientState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>                   </span><span class="annot"><span class="hs-identifier">TraceLabelPeer</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.BlockFetch.Decision</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FetchDecision</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FetchDecline</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.ConnectionId</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ConnectionId</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.InboundGovernor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">InboundGovernorTrace</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.InboundGovernor.State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">InboundGovernorCounters</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.PeerSelection.Governor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PeerSelectionCounters</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromWithOrigin</span></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ShowQuery</span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.ConnectionManager.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ConnectionManagerCounters</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>                   </span><span class="annot"><span class="hs-identifier">ConnectionManagerTrace</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Diffusion</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Diffusion</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Diffusion.NonP2P</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonP2P</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Diffusion.P2P</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P2P</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalAddress</span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToNode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">RemoteAddress</span></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ChainDB</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB.OnDisk</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LedgerDB</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LedgerDB</span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Config.html"><span class="hs-identifier">Cardano.Tracing.Config</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Metrics.html"><span class="hs-identifier">Cardano.Tracing.Metrics</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Shutdown.html"><span class="hs-identifier">Cardano.Tracing.Shutdown</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Startup.html"><span class="hs-identifier">Cardano.Tracing.Startup</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html"><span class="hs-identifier">Cardano.Node.Configuration.Logging</span></a></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.TraceConstraints.html"><span class="hs-identifier">Cardano.Node.TraceConstraints</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Tracing.html"><span class="hs-identifier">Cardano.Node.Tracing</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-- For tracing instances</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Byron.html"><span class="hs-identifier">Cardano.Node.Protocol.Byron</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html"><span class="hs-identifier">Cardano.Node.Protocol.Shelley</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Queries.html"><span class="hs-identifier">Cardano.Node.Queries</span></a></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.MiniProtocol.BlockFetch.Server</span></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.MiniProtocol.ChainSync.Server</span></span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.TxSubmission.Inbound</span></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Node.STM.html"><span class="hs-identifier">Cardano.Node.STM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">STM</span></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/stm-2.5.0.1/src"><span class="hs-identifier">Control.Concurrent.STM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">STM</span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Protocol.TPraos.OCert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">KESPeriod</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.KeyMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">KeyMap</span></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">{- HLINT ignore &quot;Redundant bracket&quot; -}</span><span>
</span><span id="line-130"></span><span class="hs-comment">{- HLINT ignore &quot;Use record patterns&quot; -}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">data</span><span> </span><span id="ForgeTracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ForgeTracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ftForged"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForged"><span class="hs-identifier hs-var hs-var">ftForged</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftForgeAboutToLead"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgeAboutToLead"><span class="hs-identifier hs-var hs-var">ftForgeAboutToLead</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftCouldNotForge"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftAdopted"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftAdopted"><span class="hs-identifier hs-var hs-var">ftAdopted</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftDidntAdoptBlock"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftDidntAdoptBlock"><span class="hs-identifier hs-var hs-var">ftDidntAdoptBlock</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftForgedInvalid"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgedInvalid"><span class="hs-identifier hs-var hs-var">ftForgedInvalid</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeNotLeader"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeNotLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeNotLeader</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeCannotForge"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeCannotForge"><span class="hs-identifier hs-var hs-var">ftTraceNodeCannotForge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceForgeStateUpdateError"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceForgeStateUpdateError"><span class="hs-identifier hs-var hs-var">ftTraceForgeStateUpdateError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceBlockFromFuture"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceBlockFromFuture"><span class="hs-identifier hs-var hs-var">ftTraceBlockFromFuture</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceSlotIsImmutable"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceSlotIsImmutable"><span class="hs-identifier hs-var hs-var">ftTraceSlotIsImmutable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeIsLeader"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeIsLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeIsLeader</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621679666763"><span id="local-6989586621679666764"><span id="local-6989586621679666765"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracersP2P"><span class="hs-identifier hs-type">nullTracersP2P</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666765"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666764"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666763"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Diffusion.P2P</span></span></span></span></span><span>
</span><span id="line-148"></span><span id="nullTracersP2P"><span class="annot"><span class="annottext">nullTracersP2P :: Tracers peer localPeer blk 'P2P
</span><a href="Cardano.Tracing.Tracers.html#nullTracersP2P"><span class="hs-identifier hs-var hs-var">nullTracersP2P</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk (p2p :: P2P).
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
-&gt; ExtraTracers p2p
-&gt; Tracer IO (StartupTrace blk)
-&gt; Tracer IO ShutdownTrace
-&gt; Tracer IO NodeInfo
-&gt; Tracer IO NodeState
-&gt; Tracer IO ResourceStats
-&gt; Tracer IO [PeerT blk]
-&gt; Tracers peer localPeer blk p2p
</span><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers IO peer localPeer blk
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer localPeer blk
forall (m :: * -&gt; *) remotePeer localPeer blk.
Monad m =&gt;
Tracers m remotePeer localPeer blk
</span><span class="hs-identifier hs-var">Consensus.nullTracers</span></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO localPeer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToClient.nullTracers</span></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToNode.nullTracers</span></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="Cardano.Node.Tracing.html#diffusionTracers"><span class="hs-identifier hs-var">diffusionTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
forall (m :: * -&gt; *) ntnAddr ntnVersion ntcAddr ntcVersion.
Applicative m =&gt;
Tracers ntnAddr ntnVersion ntcAddr ntcVersion m
</span><span class="hs-identifier hs-var">Diffusion.nullTracers</span></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracersExtra :: ExtraTracers 'P2P
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  IO
-&gt; ExtraTracers 'P2P
</span><span class="hs-identifier hs-var">Diffusion.P2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  IO
forall (m :: * -&gt; *) ntnAddr ntnVersion ntnVersionData ntcAddr
       ntcVersion ntcVersionData resolverError.
Applicative m =&gt;
TracersExtra
  ntnAddr
  ntnVersion
  ntnVersionData
  ntcAddr
  ntcVersion
  ntcVersionData
  resolverError
  m
</span><span class="hs-identifier hs-var">P2P.nullTracers</span></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">startupTracer :: Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shutdownTracer :: Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ShutdownTrace
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeInfoTracer :: Tracer IO NodeInfo
</span><a href="Cardano.Node.Tracing.html#nodeInfoTracer"><span class="hs-identifier hs-var">nodeInfoTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeInfo
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeStateTracer :: Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeState
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">resourcesTracer :: Tracer IO ResourceStats
</span><a href="Cardano.Node.Tracing.html#resourcesTracer"><span class="hs-identifier hs-var">resourcesTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ResourceStats
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">peersTracer :: Tracer IO [PeerT blk]
</span><a href="Cardano.Node.Tracing.html#peersTracer"><span class="hs-identifier hs-var">peersTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO [PeerT blk]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span id="local-6989586621679666740"><span id="local-6989586621679666741"><span id="local-6989586621679666742"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracersNonP2P"><span class="hs-identifier hs-type">nullTracersNonP2P</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666742"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666741"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666740"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Diffusion.NonP2P</span></span></span></span></span><span>
</span><span id="line-164"></span><span id="nullTracersNonP2P"><span class="annot"><span class="annottext">nullTracersNonP2P :: Tracers peer localPeer blk 'NonP2P
</span><a href="Cardano.Tracing.Tracers.html#nullTracersNonP2P"><span class="hs-identifier hs-var hs-var">nullTracersNonP2P</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk (p2p :: P2P).
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
-&gt; ExtraTracers p2p
-&gt; Tracer IO (StartupTrace blk)
-&gt; Tracer IO ShutdownTrace
-&gt; Tracer IO NodeInfo
-&gt; Tracer IO NodeState
-&gt; Tracer IO ResourceStats
-&gt; Tracer IO [PeerT blk]
-&gt; Tracers peer localPeer blk p2p
</span><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers IO peer localPeer blk
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer localPeer blk
forall (m :: * -&gt; *) remotePeer localPeer blk.
Monad m =&gt;
Tracers m remotePeer localPeer blk
</span><span class="hs-identifier hs-var">Consensus.nullTracers</span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO localPeer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToClient.nullTracers</span></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToNode.nullTracers</span></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="Cardano.Node.Tracing.html#diffusionTracers"><span class="hs-identifier hs-var">diffusionTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
forall (m :: * -&gt; *) ntnAddr ntnVersion ntcAddr ntcVersion.
Applicative m =&gt;
Tracers ntnAddr ntnVersion ntcAddr ntcVersion m
</span><span class="hs-identifier hs-var">Diffusion.nullTracers</span></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracersExtra :: ExtraTracers 'NonP2P
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracersExtra -&gt; ExtraTracers 'NonP2P
</span><span class="hs-identifier hs-var">Diffusion.NonP2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra
</span><span class="hs-identifier hs-var">NonP2P.nullTracers</span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">startupTracer :: Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shutdownTracer :: Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ShutdownTrace
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeInfoTracer :: Tracer IO NodeInfo
</span><a href="Cardano.Node.Tracing.html#nodeInfoTracer"><span class="hs-identifier hs-var">nodeInfoTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeInfo
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeStateTracer :: Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeState
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">resourcesTracer :: Tracer IO ResourceStats
</span><a href="Cardano.Node.Tracing.html#resourcesTracer"><span class="hs-identifier hs-var">resourcesTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ResourceStats
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">peersTracer :: Tracer IO [PeerT blk]
</span><a href="Cardano.Node.Tracing.html#peersTracer"><span class="hs-identifier hs-var">peersTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO [PeerT blk]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span id="local-6989586621679667328"><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-type">indexGCType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667328"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span></span><span>
</span><span id="line-180"></span><span id="indexGCType"><span class="annot"><span class="annottext">indexGCType :: TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var hs-var">indexGCType</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.ScheduledGC</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-181"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.PerformedGC</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span id="local-6989586621679667329"><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-type">indexReplType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceReplayEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667329"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span></span><span>
</span><span id="line-184"></span><span id="indexReplType"><span class="annot"><span class="annottext">indexReplType :: TraceReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var hs-var">indexReplType</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayFromGenesis</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-185"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayFromSnapshot</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-186"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span id="local-6989586621679666730"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679666718"><span id="local-6989586621679666721"><span id="local-6989586621679666724"><span id="local-6989586621679666726"><span class="annot"><span class="hs-identifier hs-type">ElidingTracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666730"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-comment">-- equivalent by type and severity</span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621679666716"><span class="annot"><span class="annottext">isEquivalent :: WithSeverity (TraceEvent blk)
-&gt; WithSeverity (TraceEvent blk) -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">isEquivalent</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666713"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666713"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span id="local-6989586621679666711"><span class="annot"><span class="annottext">TraceReplayEvent blk
</span><a href="#local-6989586621679666711"><span class="hs-identifier hs-var">ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666710"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666710"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span id="local-6989586621679666709"><span class="annot"><span class="annottext">TraceReplayEvent blk
</span><a href="#local-6989586621679666709"><span class="hs-identifier hs-var">ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-192"></span><span>                  </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666713"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666710"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TraceReplayEvent blk -&gt; Int
forall a. TraceReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceReplayEvent blk
</span><a href="#local-6989586621679666711"><span class="hs-identifier hs-var">ev1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TraceReplayEvent blk -&gt; Int
forall a. TraceReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceReplayEvent blk
</span><a href="#local-6989586621679666709"><span class="hs-identifier hs-var">ev2</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666707"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666707"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666705"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666705"><span class="hs-identifier hs-var">ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666704"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666704"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666703"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666703"><span class="hs-identifier hs-var">ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>                  </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666707"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666704"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk -&gt; Int
forall a. TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666705"><span class="hs-identifier hs-var">ev1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk -&gt; Int
forall a. TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666703"><span class="hs-identifier hs-var">ev2</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666702"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666702"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666700"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666700"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666699"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666699"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666698"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666698"><span class="hs-identifier hs-var">_ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666697"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666697"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666696"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666696"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666695"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666695"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666694"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666694"><span class="hs-identifier hs-var">_ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666693"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666693"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666692"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666692"><span class="hs-identifier hs-var">_ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666691"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666691"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666689"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666689"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666688"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666688"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679666687"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679666687"><span class="hs-identifier hs-var">_ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666686"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666686"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666685"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666685"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666684"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666684"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666683"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666683"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666682"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666682"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666681"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666681"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666680"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666680"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceInitChainSelEvent</span></span><span> </span><span id="local-6989586621679666678"><span class="annot"><span class="annottext">TraceInitChainSelEvent blk
</span><a href="#local-6989586621679666678"><span class="hs-identifier hs-var">ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666677"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666677"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceInitChainSelEvent</span></span><span> </span><span id="local-6989586621679666676"><span class="annot"><span class="annottext">TraceInitChainSelEvent blk
</span><a href="#local-6989586621679666676"><span class="hs-identifier hs-var">ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceInitChainSelEvent blk
</span><a href="#local-6989586621679666678"><span class="hs-identifier hs-var">ev1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TraceInitChainSelEvent blk
</span><a href="#local-6989586621679666676"><span class="hs-identifier hs-var">ev2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InitChainSelValidation</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-216"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.UpdateLedgerDbTraceEvent</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-217"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.StartedPushingBlockToTheLedgerDb</span></span><span> </span><span class="annot"><span class="annottext">PushStart blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PushGoal blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pushing blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-218"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InitChainSelValidation</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-219"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.UpdateLedgerDbTraceEvent</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-220"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.StartedPushingBlockToTheLedgerDb</span></span><span> </span><span class="annot"><span class="annottext">PushStart blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PushGoal blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pushing blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><span class="annottext">(TraceInitChainSelEvent blk, TraceInitChainSelEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-comment">-- the types to be elided</span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621679666672"><span class="annot"><span class="annottext">doelide :: WithSeverity (TraceEvent blk) -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">doelide</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceReplayEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.IgnoreBlockOlderThanK</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.IgnoreInvalidBlock</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InvalidBlockReason blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.BlockInTheFuture</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.StoreButDontChange</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TrySwitchToAFork</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ChainDiff (HeaderFields blk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.SwitchedToAFork</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddBlockValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InvalidBlock</span></span><span> </span><span class="annot"><span class="annottext">ExtValidationError blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddBlockValidation</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.CandidateContainsFutureBlocksExceedingClockSkew</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span> </span><span id="local-6989586621679666660"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679666660"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LedgerEvent blk] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679666660"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.PipeliningEvent</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceInitChainSelEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InitChainSelValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.UpdateLedgerDbTraceEvent</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span id="local-6989586621679666657"><span class="annot"><span class="annottext">conteliding :: TracingVerbosity
-&gt; Trace IO t
-&gt; WithSeverity (TraceEvent blk)
-&gt; (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">conteliding</span></span></span><span> </span><span id="local-6989586621679666655"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666655"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666654"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666654"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666653"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666653"><span class="hs-identifier hs-var">_count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666652"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666652"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679666651"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666651"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666650"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666650"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666649"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666649"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666648"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666648"><span class="hs-identifier hs-var">oldt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>      </span><span id="local-6989586621679666647"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666647"><span class="hs-identifier hs-var">tnow</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; IO Word64 -&gt; IO Integer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO Word64
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">getMonotonicTimeNSec</span></a></span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666645"><span class="annot"><span class="annottext">deltat :: Integer
</span><a href="#local-6989586621679666645"><span class="hs-identifier hs-var hs-var">deltat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666647"><span class="hs-identifier hs-var">tnow</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666648"><span class="hs-identifier hs-var">oldt</span></a></span><span>
</span><span id="line-244"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666645"><span class="hs-identifier hs-var">deltat</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1250000000</span></span><span> </span><span class="hs-comment">-- report at most every 1250 ms</span><span>
</span><span id="line-245"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-246"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO t -&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666652"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666651"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666650"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-247"></span><span>          </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666650"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666647"><span class="hs-identifier hs-var">tnow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666650"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666648"><span class="hs-identifier hs-var">oldt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666641"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666641"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666640"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666640"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679666639"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666639"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666638"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666638"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666637"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666637"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666639"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666637"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666636"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666636"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666635"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666635"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679666634"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666634"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666633"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666633"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666632"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666632"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666634"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666632"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666631"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666631"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666630"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666630"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679666629"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666629"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666628"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666628"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666627"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666627"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666629"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666627"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666626"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666626"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666625"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666625"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679666624"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666624"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayedBlock</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666623"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666623"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666622"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666622"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-256"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666624"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666622"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666621"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666621"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666620"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666620"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679666619"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666619"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceInitChainSelEvent</span></span><span>
</span><span id="line-258"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InitChainSelValidation</span></span><span>
</span><span id="line-259"></span><span>                                              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.UpdateLedgerDbTraceEvent</span></span><span>
</span><span id="line-260"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.StartedPushingBlockToTheLedgerDb</span></span><span>
</span><span id="line-261"></span><span>                                                </span><span class="annot"><span class="annottext">PushStart blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PushGoal blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.Pushing</span></span><span> </span><span id="local-6989586621679666617"><span class="annot"><span class="annottext">RealPoint blk
</span><a href="#local-6989586621679666617"><span class="hs-identifier hs-var">curr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666616"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679666616"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666615"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666615"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe (WithSeverity (TraceEvent blk)), Integer)
 -&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer))
-&gt; (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666614"><span class="annot"><span class="annottext">currSlot :: Integer
</span><a href="#local-6989586621679666614"><span class="hs-identifier hs-var hs-var">currSlot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; Word64) -&gt; SlotNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RealPoint blk -&gt; SlotNo
forall blk. RealPoint blk -&gt; SlotNo
</span><span class="hs-identifier hs-var">realPointSlot</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><a href="#local-6989586621679666617"><span class="hs-identifier hs-var">curr</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-263"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666615"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666619"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666614"><span class="hs-identifier hs-var">currSlot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666615"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10000</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666614"><span class="hs-identifier hs-var">currSlot</span></a></span><span>
</span><span id="line-266"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666619"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666615"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>  </span><span id="local-6989586621679666610"><span class="annot"><span class="annottext">reportelided :: TracingVerbosity
-&gt; Trace IO t -&gt; WithSeverity (TraceEvent blk) -&gt; Integer -&gt; IO ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">reportelided</span></span></span><span> </span><span id="local-6989586621679666608"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666608"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666607"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666607"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666606"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666606"><span class="hs-identifier hs-var">_count</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">reportelided</span></span><span> </span><span id="local-6989586621679666605"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666605"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679666604"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666604"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666603"><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666603"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621679666602"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666602"><span class="hs-identifier hs-var">count</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO t -&gt; WithSeverity (TraceEvent blk) -&gt; Integer -&gt; IO ()
forall t a.
(ToObject t, Transformable t IO a) =&gt;
TracingVerbosity -&gt; Trace IO t -&gt; a -&gt; Integer -&gt; IO ()
</span><span class="hs-identifier hs-var">defaultelidedreporting</span></span><span>  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666605"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666604"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666603"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666602"><span class="hs-identifier hs-var">count</span></a></span></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span id="local-6989586621679666599"><span id="local-6989586621679666600"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679666586"><span id="local-6989586621679666588"><span id="local-6989586621679666590"><span id="local-6989586621679666593"><span id="local-6989586621679666595"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StandardHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679666600"><span class="hs-identifier hs-type">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666599"><span class="hs-identifier hs-type">peer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ElidingTracer</span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679666599"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="annot"><a href="#local-6989586621679666600"><span class="hs-identifier hs-type">header</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">-- equivalent by type and severity</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621679666585"><span class="annot"><span class="annottext">isEquivalent :: WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Bool
</span><a href="#local-6989586621679666585"><span class="hs-identifier hs-var hs-var hs-var hs-var">isEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666584"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666584"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621679666583"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666583"><span class="hs-identifier hs-var">_peers1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666582"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666582"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621679666581"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666581"><span class="hs-identifier hs-var">_peers2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666584"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666582"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-comment">-- the types to be elided</span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621679666580"><span class="annot"><span class="annottext">doelide :: WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Bool
</span><a href="#local-6989586621679666580"><span class="hs-identifier hs-var hs-var hs-var hs-var">doelide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666579"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666579"><span class="hs-identifier hs-var">peers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679667265"><span class="annot"><a href="#local-6989586621679666578"><span class="hs-identifier hs-type">checkDecision</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679666599"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FetchDecline</span></span><span> </span><span class="annot"><a href="#local-6989586621679667265"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-281"></span><span>        </span><span id="local-6989586621679666578"><span class="annot"><span class="annottext">checkDecision :: TraceLabelPeer peer (Either FetchDecline result) -&gt; Bool
</span><a href="#local-6989586621679666578"><span class="hs-identifier hs-var hs-var">checkDecision</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679666576"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679666576"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">FetchDecline
</span><span class="hs-identifier hs-var">FetchDeclineChainNotPlausible</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><a href="#local-6989586621679666578"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679666574"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679666574"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDeclineConcurrencyLimit</span></span><span> </span><span class="annot"><span class="annottext">FetchMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><a href="#local-6989586621679666578"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679666572"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679666572"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDeclinePeerBusy</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><a href="#local-6989586621679666578"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer peer (Either FetchDecline result)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TraceLabelPeer peer (FetchDecision [Point header]) -&gt; Bool)
-&gt; [TraceLabelPeer peer (FetchDecision [Point header])] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer peer (FetchDecision [Point header]) -&gt; Bool
forall result.
TraceLabelPeer peer (Either FetchDecline result) -&gt; Bool
</span><a href="#local-6989586621679666578"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666579"><span class="hs-identifier hs-var">peers</span></a></span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621679666569"><span class="annot"><span class="annottext">conteliding :: TracingVerbosity
-&gt; Trace IO t
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; (Maybe
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point header])]),
    Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
</span><a href="#local-6989586621679666569"><span class="hs-identifier hs-var hs-var hs-var hs-var">conteliding</span></a></span></span><span> </span><span id="local-6989586621679666568"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666568"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666567"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666567"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666566"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666566"><span class="hs-identifier hs-var">_count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point header])]),
 Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679666565"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666565"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679666564"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666564"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666563"><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666563"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679666562"><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
</span><a href="#local-6989586621679666562"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666561"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666561"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666561"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666561"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`mod`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>  </span><span class="hs-comment">-- report every 1000th message</span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO t
-&gt; Tracer
     IO
     (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666565"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679666564"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666563"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-290"></span><span>      </span><span class="annot"><span class="annottext">(Maybe
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point header])]),
 Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Maybe
     (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679666563"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679666561"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- | Tracers for all system components.</span><span>
</span><span id="line-293"></span><span class="hs-comment">--</span><span>
</span><span id="line-294"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-type">mkTracers</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666558"><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679666557"><span class="annot"><a href="#local-6989586621679666557"><span class="hs-identifier hs-type">p2p</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-296"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-297"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.TraceConstraints.html#TraceConstraints"><span class="hs-identifier hs-type">TraceConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-298"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlockConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier hs-type">TraceOptions</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkP2PMode</span></span><span> </span><span class="annot"><a href="#local-6989586621679666557"><span class="hs-identifier hs-type">p2p</span></a></span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConnectionId</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">RemoteAddress</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConnectionId</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalAddress</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679666558"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666557"><span class="hs-identifier hs-type">p2p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span id="mkTracers"><span class="annot"><span class="annottext">mkTracers :: BlockConfig blk
-&gt; TraceOptions
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; Maybe EKGDirect
-&gt; NetworkP2PMode p2p
-&gt; IO
     (Tracers
        (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk p2p)
</span><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-var hs-var">mkTracers</span></a></span></span><span> </span><span id="local-6989586621679666555"><span class="annot"><span class="annottext">BlockConfig blk
</span><a href="#local-6989586621679666555"><span class="hs-identifier hs-var">blockConfig</span></a></span></span><span> </span><span id="local-6989586621679666554"><span class="annot"><span class="annottext">tOpts :: TraceOptions
</span><a href="#local-6989586621679666554"><span class="hs-identifier hs-var">tOpts</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TracingOnLegacy"><span class="hs-identifier hs-type">TracingOnLegacy</span></a></span><span> </span><span id="local-6989586621679666552"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666551"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666550"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666550"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span id="local-6989586621679666549"><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span> </span><span id="local-6989586621679666548"><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666548"><span class="hs-identifier hs-var">enableP2P</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621679666547"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666547"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ForgingStats
</span><a href="Cardano.Tracing.Metrics.html#mkForgingStats"><span class="hs-identifier hs-var">mkForgingStats</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span id="local-6989586621679666545"><span class="annot"><span class="annottext">Tracers'
  (ConnectionId RemoteAddress)
  (ConnectionId LocalAddress)
  blk
  (Tracer IO)
</span><a href="#local-6989586621679666545"><span class="hs-identifier hs-var">consensusTracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
-&gt; TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO
     (Tracers'
        (ConnectionId RemoteAddress)
        (ConnectionId LocalAddress)
        blk
        (Tracer IO))
forall blk peer localPeer.
(Show peer, Eq peer, LedgerQueries blk, ToJSON (GenTxId blk),
 ToObject (ApplyTxErr blk), ToObject (CannotForge blk),
 ToObject (GenTx blk), ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk), ToObject peer, RunNode blk,
 HasKESMetricsData blk, HasKESInfo blk) =&gt;
Maybe EKGDirect
-&gt; TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
</span><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-var">mkConsensusTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666550"><span class="hs-identifier hs-var">nodeKern</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666547"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621679666542"><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679666542"><span class="hs-identifier hs-var">elidedChainDB</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Maybe (WithSeverity (TraceEvent blk)), Integer))
forall a. ElidingTracer a =&gt; IO (MVar (Maybe a, Integer))
</span><span class="hs-identifier hs-var">newstate</span></span><span>  </span><span class="hs-comment">-- for eliding messages in ChainDB tracer</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679666540"><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666540"><span class="hs-identifier hs-var">tForks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; IO (TVar Word64)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><span class="annottext">Tracers
  (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk p2p
-&gt; IO
     (Tracers
        (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk p2p)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk (p2p :: P2P).
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
-&gt; ExtraTracers p2p
-&gt; Tracer IO (StartupTrace blk)
-&gt; Tracer IO ShutdownTrace
-&gt; Tracer IO NodeInfo
-&gt; Tracer IO NodeState
-&gt; Tracer IO ResourceStats
-&gt; Tracer IO [PeerT blk]
-&gt; Tracers peer localPeer blk p2p
</span><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainDB
-&gt; Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainDB
</span><a href="Cardano.Tracing.Config.html#traceChainDB"><span class="hs-identifier hs-var hs-var">traceChainDB</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-314"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceEvent blk))
 -&gt; Tracer IO (TraceEvent blk))
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
-&gt; ForgingStats
-&gt; TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Maybe EKGDirect
-&gt; TVar Word64
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall blk.
(ConvertRawHash blk, LedgerSupportsProtocol blk, InspectLedger blk,
 ToObject (Header blk), ToObject (LedgerEvent blk)) =&gt;
BlockConfig blk
-&gt; ForgingStats
-&gt; TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Maybe EKGDirect
-&gt; TVar Word64
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var">teeTraceChainTip</span></a></span><span>
</span><span id="line-315"></span><span>                             </span><span class="annot"><span class="annottext">BlockConfig blk
</span><a href="#local-6989586621679666555"><span class="hs-identifier hs-var">blockConfig</span></a></span><span>
</span><span id="line-316"></span><span>                             </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666547"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-317"></span><span>                             </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="#local-6989586621679666554"><span class="hs-identifier hs-var">tOpts</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679666542"><span class="hs-identifier hs-var">elidedChainDB</span></a></span><span>
</span><span id="line-318"></span><span>                             </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-319"></span><span>                             </span><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666540"><span class="hs-identifier hs-var">tForks</span></a></span><span>
</span><span id="line-320"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainDB&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers'
  (ConnectionId RemoteAddress)
  (ConnectionId LocalAddress)
  blk
  (Tracer IO)
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers'
  (ConnectionId RemoteAddress)
  (ConnectionId LocalAddress)
  blk
  (Tracer IO)
</span><a href="#local-6989586621679666545"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO (ConnectionId LocalAddress) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers IO (ConnectionId LocalAddress) blk DeserialiseFailure
forall localPeer blk.
(ToObject localPeer, ShowQuery (BlockQuery blk)) =&gt;
TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' localPeer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-var">nodeToClientTracers'</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO (ConnectionId RemoteAddress) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers IO (ConnectionId RemoteAddress) blk DeserialiseFailure
forall blk peer.
(RunNode blk, ConvertTxId blk, HasTxs blk, Show peer,
 ToObject peer) =&gt;
TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' peer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-var">nodeToNodeTracers'</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="#local-6989586621679666532"><span class="hs-identifier hs-var hs-var">diffusionTracers</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracersExtra :: ExtraTracers p2p
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p -&gt; ExtraTracers p2p
</span><a href="#local-6989586621679666531"><span class="hs-identifier hs-var">diffusionTracersExtra'</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666548"><span class="hs-identifier hs-var">enableP2P</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-comment">-- TODO: startupTracer should ignore severity level (i.e. it should always</span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-comment">-- be printed)!</span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">startupTracer :: Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity -&gt; Trace IO Text -&gt; Tracer IO (StartupTrace blk)
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (StartupTrace blk))
-&gt; Trace IO Text -&gt; Tracer IO (StartupTrace blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;startup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shutdownTracer :: Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity -&gt; Trace IO Text -&gt; Tracer IO ShutdownTrace
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO ShutdownTrace)
-&gt; Trace IO Text -&gt; Tracer IO ShutdownTrace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;shutdown&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-comment">-- The remaining tracers are completely unused by the legacy tracing:</span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeInfoTracer :: Tracer IO NodeInfo
</span><a href="Cardano.Node.Tracing.html#nodeInfoTracer"><span class="hs-identifier hs-var">nodeInfoTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeInfo
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeStateTracer :: Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeState
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">resourcesTracer :: Tracer IO ResourceStats
</span><a href="Cardano.Node.Tracing.html#resourcesTracer"><span class="hs-identifier hs-var">resourcesTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ResourceStats
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">peersTracer :: Tracer IO [PeerT blk]
</span><a href="Cardano.Node.Tracing.html#peersTracer"><span class="hs-identifier hs-var">peersTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO [PeerT blk]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-337"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>   </span><span id="local-6989586621679666532"><span class="annot"><span class="annottext">diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="#local-6989586621679666532"><span class="hs-identifier hs-var hs-var">diffusionTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall ntnAddr ntnVersion ntcAddr ntcVersion (m :: * -&gt; *).
Tracer m (WithMuxBearer (ConnectionId ntnAddr) MuxTrace)
-&gt; Tracer m (HandshakeTr ntnAddr ntnVersion)
-&gt; Tracer m (WithMuxBearer (ConnectionId ntcAddr) MuxTrace)
-&gt; Tracer m (HandshakeTr ntcAddr ntcVersion)
-&gt; Tracer m (InitializationTracer ntnAddr ntcAddr)
-&gt; Tracer m TraceLedgerPeers
-&gt; Tracers ntnAddr ntnVersion ntcAddr ntcVersion m
</span><span class="hs-identifier hs-type">Diffusion.Tracers</span></span><span>
</span><span id="line-339"></span><span>     </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dtMuxTracer :: Tracer IO (WithMuxBearer (ConnectionId RemoteAddress) MuxTrace)
</span><span class="hs-identifier hs-var">Diffusion.dtMuxTracer</span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithMuxBearer (ConnectionId RemoteAddress) MuxTrace)
</span><a href="#local-6989586621679666528"><span class="hs-identifier hs-var">muxTracer</span></a></span><span>
</span><span id="line-340"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtHandshakeTracer :: Tracer IO (HandshakeTr RemoteAddress NodeToNodeVersion)
</span><span class="hs-identifier hs-var">Diffusion.dtHandshakeTracer</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (HandshakeTr RemoteAddress NodeToNodeVersion)
</span><a href="#local-6989586621679666526"><span class="hs-identifier hs-var">handshakeTracer</span></a></span><span>
</span><span id="line-341"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalMuxTracer :: Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
</span><span class="hs-identifier hs-var">Diffusion.dtLocalMuxTracer</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
</span><a href="#local-6989586621679666524"><span class="hs-identifier hs-var">localMuxTracer</span></a></span><span>
</span><span id="line-342"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalHandshakeTracer :: Tracer IO (HandshakeTr LocalAddress NodeToClientVersion)
</span><span class="hs-identifier hs-var">Diffusion.dtLocalHandshakeTracer</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (HandshakeTr LocalAddress NodeToClientVersion)
</span><a href="#local-6989586621679666522"><span class="hs-identifier hs-var">localHandshakeTracer</span></a></span><span>
</span><span id="line-343"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtDiffusionInitializationTracer :: Tracer IO (InitializationTracer RemoteAddress LocalAddress)
</span><span class="hs-identifier hs-var">Diffusion.dtDiffusionInitializationTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (InitializationTracer RemoteAddress LocalAddress)
</span><a href="#local-6989586621679666520"><span class="hs-identifier hs-var">initializationTracer</span></a></span><span>
</span><span id="line-344"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLedgerPeersTracer :: Tracer IO TraceLedgerPeers
</span><span class="hs-identifier hs-var">Diffusion.dtLedgerPeersTracer</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO TraceLedgerPeers
</span><a href="#local-6989586621679666518"><span class="hs-identifier hs-var">ledgerPeersTracer</span></a></span><span>
</span><span id="line-345"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>   </span><span id="local-6989586621679666531"><span class="annot"><span class="annottext">diffusionTracersExtra' :: NetworkP2PMode p2p -&gt; ExtraTracers p2p
</span><a href="#local-6989586621679666531"><span class="hs-identifier hs-var hs-var">diffusionTracersExtra'</span></a></span></span><span> </span><span id="local-6989586621679666517"><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666517"><span class="hs-identifier hs-var">enP2P</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-347"></span><span>     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666517"><span class="hs-identifier hs-var">enP2P</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-348"></span><span>       </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><span class="hs-identifier hs-var">EnabledP2PMode</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-349"></span><span>         </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  IO
-&gt; ExtraTracers 'P2P
</span><span class="hs-identifier hs-var">Diffusion.P2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra :: forall ntnAddr ntnVersion ntnVersionData ntcAddr ntcVersion
       ntcVersionData resolverError (m :: * -&gt; *).
Tracer m (TraceLocalRootPeers ntnAddr resolverError)
-&gt; Tracer m TracePublicRootPeers
-&gt; Tracer m (TracePeerSelection ntnAddr)
-&gt; Tracer
     m
     (DebugPeerSelection
        ntnAddr
        (PeerConnectionHandle 'InitiatorMode ntnAddr ByteString m () Void))
-&gt; Tracer
     m
     (DebugPeerSelection
        ntnAddr
        (PeerConnectionHandle
           'InitiatorResponderMode ntnAddr ByteString m () ()))
-&gt; Tracer m PeerSelectionCounters
-&gt; Tracer m (PeerSelectionActionsTrace ntnAddr)
-&gt; Tracer
     m
     (ConnectionManagerTrace
        ntnAddr (ConnectionHandlerTrace ntnVersion ntnVersionData))
-&gt; Tracer m (AbstractTransitionTrace ntnAddr)
-&gt; Tracer m (ServerTrace ntnAddr)
-&gt; Tracer m (InboundGovernorTrace ntnAddr)
-&gt; Tracer m (RemoteTransitionTrace ntnAddr)
-&gt; Tracer
     m
     (ConnectionManagerTrace
        ntcAddr (ConnectionHandlerTrace ntcVersion ntcVersionData))
-&gt; Tracer m (ServerTrace ntcAddr)
-&gt; Tracer m (InboundGovernorTrace ntcAddr)
-&gt; TracersExtra
     ntnAddr
     ntnVersion
     ntnVersionData
     ntcAddr
     ntcVersion
     ntcVersionData
     resolverError
     m
</span><span class="hs-identifier hs-type">P2P.TracersExtra</span></span><span>
</span><span id="line-350"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dtTraceLocalRootPeersTracer :: Tracer IO (TraceLocalRootPeers RemoteAddress IOException)
</span><span class="hs-identifier hs-var">P2P.dtTraceLocalRootPeersTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceLocalRootPeers
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLocalRootPeers RemoteAddress IOException)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalRootPeers
</span><a href="Cardano.Tracing.Config.html#traceLocalRootPeers"><span class="hs-identifier hs-var hs-var">traceLocalRootPeers</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalRootPeers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-353"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtTracePublicRootPeersTracer :: Tracer IO TracePublicRootPeers
</span><span class="hs-identifier hs-var">P2P.dtTracePublicRootPeersTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-354"></span><span>               </span><span class="annot"><span class="annottext">OnOff TracePublicRootPeers
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO TracePublicRootPeers
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TracePublicRootPeers
</span><a href="Cardano.Tracing.Config.html#tracePublicRootPeers"><span class="hs-identifier hs-var hs-var">tracePublicRootPeers</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PublicRootPeers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-356"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtTracePeerSelectionTracer :: Tracer IO (TracePeerSelection RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtTracePeerSelectionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>               </span><span class="annot"><span class="annottext">OnOff TracePeerSelection
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TracePeerSelection RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TracePeerSelection
</span><a href="Cardano.Tracing.Config.html#tracePeerSelection"><span class="hs-identifier hs-var hs-var">tracePeerSelection</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PeerSelection&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-359"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtDebugPeerSelectionInitiatorTracer :: Tracer
  IO
  (DebugPeerSelection
     RemoteAddress
     (PeerConnectionHandle
        'InitiatorMode RemoteAddress ByteString IO () Void))
</span><span class="hs-identifier hs-var">P2P.dtDebugPeerSelectionInitiatorTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-360"></span><span>               </span><span class="annot"><span class="annottext">OnOff DebugPeerSelectionInitiator
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (DebugPeerSelection
        RemoteAddress
        (PeerConnectionHandle
           'InitiatorMode RemoteAddress ByteString IO () Void))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff DebugPeerSelectionInitiator
</span><a href="Cardano.Tracing.Config.html#traceDebugPeerSelectionInitiatorTracer"><span class="hs-identifier hs-var hs-var">traceDebugPeerSelectionInitiatorTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DebugPeerSelection&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-362"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtDebugPeerSelectionInitiatorResponderTracer :: Tracer
  IO
  (DebugPeerSelection
     RemoteAddress
     (PeerConnectionHandle
        'InitiatorResponderMode RemoteAddress ByteString IO () ()))
</span><span class="hs-identifier hs-var">P2P.dtDebugPeerSelectionInitiatorResponderTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-363"></span><span>             </span><span class="annot"><span class="annottext">OnOff DebugPeerSelectionInitiatorResponder
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (DebugPeerSelection
        RemoteAddress
        (PeerConnectionHandle
           'InitiatorResponderMode RemoteAddress ByteString IO () ()))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff DebugPeerSelectionInitiatorResponder
</span><a href="Cardano.Tracing.Config.html#traceDebugPeerSelectionInitiatorResponderTracer"><span class="hs-identifier hs-var hs-var">traceDebugPeerSelectionInitiatorResponderTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>                          </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DebugPeerSelection&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-365"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtTracePeerSelectionCounters :: Tracer IO PeerSelectionCounters
</span><span class="hs-identifier hs-var">P2P.dtTracePeerSelectionCounters</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-366"></span><span>                 </span><span class="annot"><span class="annottext">OnOff TracePeerSelectionCounters
-&gt; Maybe EKGDirect -&gt; Tracer IO PeerSelectionCounters
</span><a href="Cardano.Tracing.Tracers.html#tracePeerSelectionCountersMetrics"><span class="hs-identifier hs-var">tracePeerSelectionCountersMetrics</span></a></span><span>
</span><span id="line-367"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TracePeerSelectionCounters
</span><a href="Cardano.Tracing.Config.html#tracePeerSelectionCounters"><span class="hs-identifier hs-var hs-var">tracePeerSelectionCounters</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>                   </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-369"></span><span>              </span><span class="annot"><span class="annottext">Tracer IO PeerSelectionCounters
-&gt; Tracer IO PeerSelectionCounters
-&gt; Tracer IO PeerSelectionCounters
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OnOff TracePeerSelectionCounters
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO PeerSelectionCounters
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TracePeerSelectionCounters
</span><a href="Cardano.Tracing.Config.html#tracePeerSelectionCounters"><span class="hs-identifier hs-var hs-var">tracePeerSelectionCounters</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>                             </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PeerSelectionCounters&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-371"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtPeerSelectionActionsTracer :: Tracer IO (PeerSelectionActionsTrace RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtPeerSelectionActionsTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-372"></span><span>               </span><span class="annot"><span class="annottext">OnOff TracePeerSelectionActions
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (PeerSelectionActionsTrace RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TracePeerSelectionActions
</span><a href="Cardano.Tracing.Config.html#tracePeerSelectionActions"><span class="hs-identifier hs-var hs-var">tracePeerSelectionActions</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PeerSelectionActions&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-374"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtConnectionManagerTracer :: Tracer
  IO
  (ConnectionManagerTrace
     RemoteAddress
     (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
</span><span class="hs-identifier hs-var">P2P.dtConnectionManagerTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-375"></span><span>                 </span><span class="annot"><span class="annottext">OnOff TraceConnectionManagerCounters
-&gt; Maybe EKGDirect
-&gt; Tracer
     IO
     (ConnectionManagerTrace
        RemoteAddress
        (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
forall peerAddr handlerTrace.
OnOff TraceConnectionManagerCounters
-&gt; Maybe EKGDirect
-&gt; Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
</span><a href="Cardano.Tracing.Tracers.html#traceConnectionManagerTraceMetrics"><span class="hs-identifier hs-var">traceConnectionManagerTraceMetrics</span></a></span><span>
</span><span id="line-376"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceConnectionManagerCounters
</span><a href="Cardano.Tracing.Config.html#traceConnectionManagerCounters"><span class="hs-identifier hs-var hs-var">traceConnectionManagerCounters</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>                    </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-378"></span><span>              </span><span class="annot"><span class="annottext">Tracer
  IO
  (ConnectionManagerTrace
     RemoteAddress
     (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
-&gt; Tracer
     IO
     (ConnectionManagerTrace
        RemoteAddress
        (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
-&gt; Tracer
     IO
     (ConnectionManagerTrace
        RemoteAddress
        (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OnOff TraceConnectionManager
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (ConnectionManagerTrace
        RemoteAddress
        (ConnectionHandlerTrace NodeToNodeVersion NodeToNodeVersionData))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceConnectionManager
</span><a href="Cardano.Tracing.Config.html#traceConnectionManager"><span class="hs-identifier hs-var hs-var">traceConnectionManager</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>                              </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConnectionManager&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-380"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtConnectionManagerTransitionTracer :: Tracer IO (AbstractTransitionTrace RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtConnectionManagerTransitionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-381"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceConnectionManagerTransitions
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (AbstractTransitionTrace RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceConnectionManagerTransitions
</span><a href="Cardano.Tracing.Config.html#traceConnectionManagerTransitions"><span class="hs-identifier hs-var hs-var">traceConnectionManagerTransitions</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>                           </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConnectionManagerTransition&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-383"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtServerTracer :: Tracer IO (ServerTrace RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-384"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (ServerTrace RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceServer
</span><a href="Cardano.Tracing.Config.html#traceServer"><span class="hs-identifier hs-var hs-var">traceServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Server&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-385"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtInboundGovernorTracer :: Tracer IO (InboundGovernorTrace RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtInboundGovernorTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>                 </span><span class="annot"><span class="annottext">OnOff TraceInboundGovernorCounters
-&gt; Maybe EKGDirect
-&gt; Tracer IO (InboundGovernorTrace RemoteAddress)
forall addr.
OnOff TraceInboundGovernorCounters
-&gt; Maybe EKGDirect -&gt; Tracer IO (InboundGovernorTrace addr)
</span><a href="Cardano.Tracing.Tracers.html#traceInboundGovernorCountersMetrics"><span class="hs-identifier hs-var">traceInboundGovernorCountersMetrics</span></a></span><span>
</span><span id="line-387"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceInboundGovernorCounters
</span><a href="Cardano.Tracing.Config.html#traceInboundGovernorCounters"><span class="hs-identifier hs-var hs-var">traceInboundGovernorCounters</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>                   </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666549"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-389"></span><span>              </span><span class="annot"><span class="annottext">Tracer IO (InboundGovernorTrace RemoteAddress)
-&gt; Tracer IO (InboundGovernorTrace RemoteAddress)
-&gt; Tracer IO (InboundGovernorTrace RemoteAddress)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OnOff TraceInboundGovernor
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (InboundGovernorTrace RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceInboundGovernor
</span><a href="Cardano.Tracing.Config.html#traceInboundGovernor"><span class="hs-identifier hs-var hs-var">traceInboundGovernor</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>                              </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;InboundGovernor&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-391"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtInboundGovernorTransitionTracer :: Tracer IO (RemoteTransitionTrace RemoteAddress)
</span><span class="hs-identifier hs-var">P2P.dtInboundGovernorTransitionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-392"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceInboundGovernorTransitions
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (RemoteTransitionTrace RemoteAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceInboundGovernorTransitions
</span><a href="Cardano.Tracing.Config.html#traceInboundGovernorTransitions"><span class="hs-identifier hs-var hs-var">traceInboundGovernorTransitions</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>                           </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;InboundGovernorTransition&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-394"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalConnectionManagerTracer :: Tracer
  IO
  (ConnectionManagerTrace
     LocalAddress
     (ConnectionHandlerTrace
        NodeToClientVersion NodeToClientVersionData))
</span><span class="hs-identifier hs-var">P2P.dtLocalConnectionManagerTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-395"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceLocalConnectionManager
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (ConnectionManagerTrace
        LocalAddress
        (ConnectionHandlerTrace
           NodeToClientVersion NodeToClientVersionData))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalConnectionManager
</span><a href="Cardano.Tracing.Config.html#traceLocalConnectionManager"><span class="hs-identifier hs-var hs-var">traceLocalConnectionManager</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalConnectionManager&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-397"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalServerTracer :: Tracer IO (ServerTrace LocalAddress)
</span><span class="hs-identifier hs-var">P2P.dtLocalServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-398"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceLocalServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (ServerTrace LocalAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalServer
</span><a href="Cardano.Tracing.Config.html#traceLocalServer"><span class="hs-identifier hs-var hs-var">traceLocalServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-400"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalInboundGovernorTracer :: Tracer IO (InboundGovernorTrace LocalAddress)
</span><span class="hs-identifier hs-var">P2P.dtLocalInboundGovernorTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-401"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceLocalInboundGovernor
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (InboundGovernorTrace LocalAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalInboundGovernor
</span><a href="Cardano.Tracing.Config.html#traceLocalInboundGovernor"><span class="hs-identifier hs-var hs-var">traceLocalInboundGovernor</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>                            </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalInboundGovernor&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-403"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-404"></span><span>       </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><span class="hs-identifier hs-var">DisabledP2PMode</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-405"></span><span>         </span><span class="annot"><span class="annottext">TracersExtra -&gt; ExtraTracers 'NonP2P
</span><span class="hs-identifier hs-var">Diffusion.NonP2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra :: Tracer IO (WithIPList (SubscriptionTrace RemoteAddress))
-&gt; Tracer IO (WithDomainName (SubscriptionTrace RemoteAddress))
-&gt; Tracer IO (WithDomainName DnsTrace)
-&gt; Tracer IO (WithAddr RemoteAddress ErrorPolicyTrace)
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
-&gt; Tracer IO AcceptConnectionsPolicyTrace
-&gt; TracersExtra
</span><span class="hs-identifier hs-type">NonP2P.TracersExtra</span></span><span>
</span><span id="line-406"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dtIpSubscriptionTracer :: Tracer IO (WithIPList (SubscriptionTrace RemoteAddress))
</span><span class="hs-identifier hs-var">NonP2P.dtIpSubscriptionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceIpSubscription
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithIPList (SubscriptionTrace RemoteAddress))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceIpSubscription
</span><a href="Cardano.Tracing.Config.html#traceIpSubscription"><span class="hs-identifier hs-var hs-var">traceIpSubscription</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;IpSubscription&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-408"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtDnsSubscriptionTracer :: Tracer IO (WithDomainName (SubscriptionTrace RemoteAddress))
</span><span class="hs-identifier hs-var">NonP2P.dtDnsSubscriptionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-409"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceDnsSubscription
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithDomainName (SubscriptionTrace RemoteAddress))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDnsSubscription
</span><a href="Cardano.Tracing.Config.html#traceDnsSubscription"><span class="hs-identifier hs-var hs-var">traceDnsSubscription</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DnsSubscription&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-410"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtDnsResolverTracer :: Tracer IO (WithDomainName DnsTrace)
</span><span class="hs-identifier hs-var">NonP2P.dtDnsResolverTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-411"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceDnsResolver
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithDomainName DnsTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDnsResolver
</span><a href="Cardano.Tracing.Config.html#traceDnsResolver"><span class="hs-identifier hs-var hs-var">traceDnsResolver</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DnsResolver&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-412"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtErrorPolicyTracer :: Tracer IO (WithAddr RemoteAddress ErrorPolicyTrace)
</span><span class="hs-identifier hs-var">NonP2P.dtErrorPolicyTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-413"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceErrorPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithAddr RemoteAddress ErrorPolicyTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceErrorPolicy
</span><a href="Cardano.Tracing.Config.html#traceErrorPolicy"><span class="hs-identifier hs-var hs-var">traceErrorPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ErrorPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-414"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtLocalErrorPolicyTracer :: Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
</span><span class="hs-identifier hs-var">NonP2P.dtLocalErrorPolicyTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceLocalErrorPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalErrorPolicy
</span><a href="Cardano.Tracing.Config.html#traceLocalErrorPolicy"><span class="hs-identifier hs-var hs-var">traceLocalErrorPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalErrorPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-416"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dtAcceptPolicyTracer :: Tracer IO AcceptConnectionsPolicyTrace
</span><span class="hs-identifier hs-var">NonP2P.dtAcceptPolicyTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>               </span><span class="annot"><span class="annottext">OnOff TraceAcceptPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO AcceptConnectionsPolicyTrace
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceAcceptPolicy
</span><a href="Cardano.Tracing.Config.html#traceAcceptPolicy"><span class="hs-identifier hs-var hs-var">traceAcceptPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;AcceptPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-418"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-419"></span><span>   </span><span class="annot"><a href="#local-6989586621679666543"><span class="hs-identifier hs-type">verb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-420"></span><span>   </span><span id="local-6989586621679666543"><span class="annot"><span class="annottext">verb :: TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var hs-var">verb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span>
</span><span id="line-421"></span><span>   </span><span id="local-6989586621679666528"><span class="annot"><span class="annottext">muxTracer :: Tracer IO (WithMuxBearer (ConnectionId RemoteAddress) MuxTrace)
</span><a href="#local-6989586621679666528"><span class="hs-identifier hs-var hs-var">muxTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-422"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceMux
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithMuxBearer (ConnectionId RemoteAddress) MuxTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceMux
</span><a href="Cardano.Tracing.Config.html#traceMux"><span class="hs-identifier hs-var hs-var">traceMux</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mux&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-423"></span><span>   </span><span id="local-6989586621679666524"><span class="annot"><span class="annottext">localMuxTracer :: Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
</span><a href="#local-6989586621679666524"><span class="hs-identifier hs-var hs-var">localMuxTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceLocalMux
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalMux
</span><a href="Cardano.Tracing.Config.html#traceLocalMux"><span class="hs-identifier hs-var hs-var">traceLocalMux</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;MuxLocal&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-425"></span><span>   </span><span id="local-6989586621679666522"><span class="annot"><span class="annottext">localHandshakeTracer :: Tracer IO (HandshakeTr LocalAddress NodeToClientVersion)
</span><a href="#local-6989586621679666522"><span class="hs-identifier hs-var hs-var">localHandshakeTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-426"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceLocalHandshake
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (HandshakeTr LocalAddress NodeToClientVersion)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalHandshake
</span><a href="Cardano.Tracing.Config.html#traceLocalHandshake"><span class="hs-identifier hs-var hs-var">traceLocalHandshake</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalHandshake&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-427"></span><span>   </span><span id="local-6989586621679666526"><span class="annot"><span class="annottext">handshakeTracer :: Tracer IO (HandshakeTr RemoteAddress NodeToNodeVersion)
</span><a href="#local-6989586621679666526"><span class="hs-identifier hs-var hs-var">handshakeTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceHandshake
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (HandshakeTr RemoteAddress NodeToNodeVersion)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceHandshake
</span><a href="Cardano.Tracing.Config.html#traceHandshake"><span class="hs-identifier hs-var hs-var">traceHandshake</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Handshake&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-429"></span><span>   </span><span id="local-6989586621679666518"><span class="annot"><span class="annottext">ledgerPeersTracer :: Tracer IO TraceLedgerPeers
</span><a href="#local-6989586621679666518"><span class="hs-identifier hs-var hs-var">ledgerPeersTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-430"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceLedgerPeers
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO TraceLedgerPeers
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLedgerPeers
</span><a href="Cardano.Tracing.Config.html#traceLedgerPeers"><span class="hs-identifier hs-var hs-var">traceLedgerPeers</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LedgerPeers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-431"></span><span>   </span><span id="local-6989586621679666520"><span class="annot"><span class="annottext">initializationTracer :: Tracer IO (InitializationTracer RemoteAddress LocalAddress)
</span><a href="#local-6989586621679666520"><span class="hs-identifier hs-var hs-var">initializationTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>     </span><span class="annot"><span class="annottext">OnOff TraceDiffusionInitialization
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (InitializationTracer RemoteAddress LocalAddress)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDiffusionInitialization
</span><a href="Cardano.Tracing.Config.html#traceDiffusionInitialization"><span class="hs-identifier hs-var hs-var">traceDiffusionInitialization</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666552"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666543"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-433"></span><span>       </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DiffusionInitializationTracer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666551"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-var">mkTracers</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666457"><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666457"><span class="hs-identifier hs-var">enableP2P</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-436"></span><span>  </span><span class="annot"><span class="annottext">Tracers
  (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk p2p
-&gt; IO
     (Tracers
        (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk p2p)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk (p2p :: P2P).
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
-&gt; ExtraTracers p2p
-&gt; Tracer IO (StartupTrace blk)
-&gt; Tracer IO ShutdownTrace
-&gt; Tracer IO NodeInfo
-&gt; Tracer IO NodeState
-&gt; Tracer IO ResourceStats
-&gt; Tracer IO [PeerT blk]
-&gt; Tracers peer localPeer blk p2p
</span><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-437"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers'
  (ConnectionId RemoteAddress)
  (ConnectionId LocalAddress)
  blk
  (Tracer IO)
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall remotePeer localPeer blk (f :: * -&gt; *).
f (TraceLabelPeer remotePeer (TraceChainSyncClientEvent blk))
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f [TraceLabelPeer
        remotePeer (FetchDecision [Point (Header blk)])]
-&gt; f (TraceLabelPeer
        remotePeer (TraceFetchClientState (Header blk)))
-&gt; f (TraceBlockFetchServerEvent blk)
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLocalTxSubmissionServerEvent blk)
-&gt; f (TraceEventMempool blk)
-&gt; f (TraceLabelCreds (TraceForgeEvent blk))
-&gt; f (TraceBlockchainTimeEvent UTCTime)
-&gt; f (TraceLabelCreds (ForgeStateInfo blk))
-&gt; f (TraceKeepAliveClient remotePeer)
-&gt; Tracers' remotePeer localPeer blk f
</span><span class="hs-identifier hs-type">Consensus.Tracers</span></span><span>
</span><span id="line-439"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainSyncClientTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress) (TraceChainSyncClientEvent blk))
</span><span class="hs-identifier hs-var">Consensus.chainSyncClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress) (TraceChainSyncClientEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-440"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerHeaderTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerHeaderTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-441"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerBlockTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerBlockTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-442"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchDecisionTracer :: Tracer
  IO
  [TraceLabelPeer
     (ConnectionId RemoteAddress) (FetchDecision [Point (Header blk)])]
</span><span class="hs-identifier hs-var">Consensus.blockFetchDecisionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  [TraceLabelPeer
     (ConnectionId RemoteAddress) (FetchDecision [Point (Header blk)])]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-443"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchClientTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress) (TraceFetchClientState (Header blk)))
</span><span class="hs-identifier hs-var">Consensus.blockFetchClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress) (TraceFetchClientState (Header blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-444"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchServerTracer :: Tracer IO (TraceBlockFetchServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.blockFetchServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-445"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">keepAliveClientTracer :: Tracer IO (TraceKeepAliveClient (ConnectionId RemoteAddress))
</span><span class="hs-identifier hs-var">Consensus.keepAliveClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceKeepAliveClient (ConnectionId RemoteAddress))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-446"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeStateInfoTracer :: Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><span class="hs-identifier hs-var">Consensus.forgeStateInfoTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-447"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txInboundTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txInboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-448"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txOutboundTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txOutboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-449"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionServerTracer :: Tracer IO (TraceLocalTxSubmissionServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.localTxSubmissionServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLocalTxSubmissionServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-450"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mempoolTracer :: Tracer IO (TraceEventMempool blk)
</span><span class="hs-identifier hs-var">Consensus.mempoolTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-451"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeTracer :: Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><span class="hs-identifier hs-var">Consensus.forgeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-452"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockchainTimeTracer :: Tracer IO (TraceBlockchainTimeEvent UTCTime)
</span><span class="hs-identifier hs-var">Consensus.blockchainTimeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-453"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO (ConnectionId LocalAddress) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToClient.Tracers</span></span><span>
</span><span id="line-455"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-456"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxMonitorTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
</span><span class="hs-identifier hs-var">NodeToClient.tTxMonitorTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-457"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-458"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tStateQueryTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tStateQueryTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId LocalAddress)
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-459"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO (ConnectionId RemoteAddress) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch blk (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToNode.Tracers</span></span><span>
</span><span id="line-461"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-462"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tChainSyncSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-463"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (BlockFetch blk (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (BlockFetch blk (Point blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-464"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-465"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmission2Tracer :: Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmission2Tracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     (ConnectionId RemoteAddress)
     (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-467"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracers :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="Cardano.Node.Tracing.html#diffusionTracers"><span class="hs-identifier hs-var">diffusionTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
forall (m :: * -&gt; *) ntnAddr ntnVersion ntcAddr ntcVersion.
Applicative m =&gt;
Tracers ntnAddr ntnVersion ntcAddr ntcVersion m
</span><span class="hs-identifier hs-var">Diffusion.nullTracers</span></span><span>
</span><span id="line-468"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionTracersExtra :: ExtraTracers p2p
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621679666457"><span class="hs-identifier hs-var">enableP2P</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-470"></span><span>          </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><span class="hs-identifier hs-var">EnabledP2PMode</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  IO
-&gt; ExtraTracers 'P2P
</span><span class="hs-identifier hs-var">Diffusion.P2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  IO
forall (m :: * -&gt; *) ntnAddr ntnVersion ntnVersionData ntcAddr
       ntcVersion ntcVersionData resolverError.
Applicative m =&gt;
TracersExtra
  ntnAddr
  ntnVersion
  ntnVersionData
  ntcAddr
  ntcVersion
  ntcVersionData
  resolverError
  m
</span><span class="hs-identifier hs-var">P2P.nullTracers</span></span><span>
</span><span id="line-471"></span><span>          </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><span class="hs-identifier hs-var">DisabledP2PMode</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TracersExtra -&gt; ExtraTracers 'NonP2P
</span><span class="hs-identifier hs-var">Diffusion.NonP2PTracers</span></span><span> </span><span class="annot"><span class="annottext">TracersExtra
</span><span class="hs-identifier hs-var">NonP2P.nullTracers</span></span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">startupTracer :: Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shutdownTracer :: Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ShutdownTrace
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeInfoTracer :: Tracer IO NodeInfo
</span><a href="Cardano.Node.Tracing.html#nodeInfoTracer"><span class="hs-identifier hs-var">nodeInfoTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeInfo
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeStateTracer :: Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeState
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">resourcesTracer :: Tracer IO ResourceStats
</span><a href="Cardano.Node.Tracing.html#resourcesTracer"><span class="hs-identifier hs-var">resourcesTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO ResourceStats
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">peersTracer :: Tracer IO [PeerT blk]
</span><a href="Cardano.Node.Tracing.html#peersTracer"><span class="hs-identifier hs-var">peersTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO [PeerT blk]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-478"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-481"></span><span class="hs-comment">-- Chain DB Tracers</span><span>
</span><span id="line-482"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span id="local-6989586621679667223"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-type">teeTraceChainTip</span></a></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConvertRawHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-486"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-487"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InspectLedger</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-488"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlockConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier hs-type">TraceOptions</span></a></span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-498"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667223"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-500"></span><span id="teeTraceChainTip"><span class="annot"><span class="annottext">teeTraceChainTip :: BlockConfig blk
-&gt; ForgingStats
-&gt; TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Maybe EKGDirect
-&gt; TVar Word64
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var hs-var">teeTraceChainTip</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="Cardano.Tracing.Config.html#TracingOff"><span class="hs-identifier hs-var">TracingOff</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TVar Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-501"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var">teeTraceChainTip</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceDispatcher"><span class="hs-identifier hs-type">TraceDispatcher</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TVar Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-502"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var">teeTraceChainTip</span></a></span><span> </span><span id="local-6989586621679666428"><span class="annot"><span class="annottext">BlockConfig blk
</span><a href="#local-6989586621679666428"><span class="hs-identifier hs-var">blockConfig</span></a></span></span><span> </span><span id="local-6989586621679666427"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666427"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TracingOnLegacy"><span class="hs-identifier hs-type">TracingOnLegacy</span></a></span><span> </span><span id="local-6989586621679666426"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666426"><span class="hs-identifier hs-var">trSel</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666425"><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679666425"><span class="hs-identifier hs-var">elided</span></a></span></span><span> </span><span id="local-6989586621679666424"><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666424"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span> </span><span id="local-6989586621679666423"><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666423"><span class="hs-identifier hs-var">tFork</span></a></span></span><span> </span><span id="local-6989586621679666422"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666422"><span class="hs-identifier hs-var">trTrc</span></a></span></span><span> </span><span id="local-6989586621679666421"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666421"><span class="hs-identifier hs-var">trMet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-503"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity (TraceEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceEvent blk) -&gt; IO ())
 -&gt; Tracer IO (WithSeverity (TraceEvent blk)))
-&gt; (WithSeverity (TraceEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666419"><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666419"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall blk.
(ConvertRawHash blk, LedgerSupportsProtocol blk, InspectLedger blk,
 ToObject (Header blk), ToObject (LedgerEvent blk)) =&gt;
TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-var">teeTraceChainTipElide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666426"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679666425"><span class="hs-identifier hs-var">elided</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666422"><span class="hs-identifier hs-var">trTrc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666419"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a. Tracer IO a -&gt; Tracer IO (WithSeverity a)
</span><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-var">ignoringSeverity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EKGDirect
-&gt; TVar Word64
-&gt; BlockConfig blk
-&gt; ForgingStats
-&gt; Trace IO Text
-&gt; Tracer IO (TraceEvent blk)
forall blk.
HasHeader (Header blk) =&gt;
Maybe EKGDirect
-&gt; TVar Word64
-&gt; BlockConfig blk
-&gt; ForgingStats
-&gt; Trace IO Text
-&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-var">traceChainMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666424"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666423"><span class="hs-identifier hs-var">tFork</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
</span><a href="#local-6989586621679666428"><span class="hs-identifier hs-var">blockConfig</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666427"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666421"><span class="hs-identifier hs-var">trMet</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679666419"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span id="local-6989586621679667089"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-type">teeTraceChainTipElide</span></a></span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConvertRawHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-509"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-510"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InspectLedger</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-511"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667089"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-518"></span><span id="teeTraceChainTipElide"><span class="annot"><span class="annottext">teeTraceChainTipElide :: TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-var hs-var">teeTraceChainTipElide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a t.
(ElidingTracer a, ToObject t, Transformable t IO a) =&gt;
TracingVerbosity
-&gt; MVar (Maybe a, Integer) -&gt; Trace IO t -&gt; Tracer IO a
</span><span class="hs-identifier hs-var">elideToLogObject</span></span><span>
</span><span id="line-519"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-pragma hs-type">teeTraceChainTipElide</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span id="local-6989586621679667088"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-type">ignoringSeverity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667088"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><a href="#local-6989586621679667088"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-522"></span><span id="ignoringSeverity"><span class="annot"><span class="annottext">ignoringSeverity :: Tracer IO a -&gt; Tracer IO (WithSeverity a)
</span><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-var hs-var">ignoringSeverity</span></a></span></span><span> </span><span id="local-6989586621679666414"><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679666414"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a))
-&gt; (WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666413"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666413"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO a -&gt; a -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679666414"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666413"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-523"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-pragma hs-type">ignoringSeverity</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-type">traceChainMetrics</span></a></span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667087"><span class="annot"><a href="#local-6989586621679667087"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667087"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-530"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlockConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679667087"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667087"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span id="traceChainMetrics"><span class="annot"><span class="annottext">traceChainMetrics :: Maybe EKGDirect
-&gt; TVar Word64
-&gt; BlockConfig blk
-&gt; ForgingStats
-&gt; Trace IO Text
-&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-var hs-var">traceChainMetrics</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-535"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-var">traceChainMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666412"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666412"><span class="hs-identifier hs-var">_ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666411"><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666411"><span class="hs-identifier hs-var">tForks</span></a></span></span><span> </span><span id="local-6989586621679666410"><span class="annot"><span class="annottext">BlockConfig blk
</span><a href="#local-6989586621679666410"><span class="hs-identifier hs-var">_blockConfig</span></a></span></span><span> </span><span id="local-6989586621679666409"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666409"><span class="hs-identifier hs-var">_fStats</span></a></span></span><span> </span><span id="local-6989586621679666408"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-536"></span><span>  </span><span class="annot"><span class="annottext">(TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk))
-&gt; (TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666407"><span class="annot"><span class="annottext">TraceEvent blk
</span><a href="#local-6989586621679666407"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-537"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; Maybe (IO ()) -&gt; IO ()
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (IO ()) -&gt; IO ()) -&gt; Maybe (IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ChainInformation -&gt; IO ()
</span><a href="#local-6989586621679666405"><span class="hs-identifier hs-var">doTrace</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; IO ())
-&gt; Maybe ChainInformation -&gt; Maybe (IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk -&gt; Maybe ChainInformation
</span><a href="#local-6989586621679666404"><span class="hs-identifier hs-var">chainTipInformation</span></a></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk
</span><a href="#local-6989586621679666407"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-539"></span><span>    </span><span class="annot"><a href="#local-6989586621679666404"><span class="hs-identifier hs-type">chainTipInformation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667087"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-540"></span><span>    </span><span id="local-6989586621679666404"><span class="annot"><span class="annottext">chainTipInformation :: TraceEvent blk -&gt; Maybe ChainInformation
</span><a href="#local-6989586621679666404"><span class="hs-identifier hs-var hs-var">chainTipInformation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-541"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span id="local-6989586621679666403"><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><a href="#local-6989586621679666403"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><a href="#local-6989586621679666403"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-542"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.SwitchedToAFork</span></span><span> </span><span id="local-6989586621679666402"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679666402"><span class="hs-identifier hs-var">_warnings</span></a></span></span><span> </span><span id="local-6989586621679666401"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679666401"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span id="local-6989586621679666400"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666400"><span class="hs-identifier hs-var">oldChain</span></a></span></span><span> </span><span id="local-6989586621679666399"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666399"><span class="hs-identifier hs-var">newChain</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-543"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666398"><span class="annot"><span class="annottext">fork :: Bool
</span><a href="#local-6989586621679666398"><span class="hs-identifier hs-var hs-var">fork</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Point (Header blk) -&gt; AnchoredFragment (Header blk) -&gt; Bool
forall block.
HasHeader block =&gt;
Point block -&gt; AnchoredFragment block -&gt; Bool
</span><span class="hs-identifier hs-var">AF.withinFragmentBounds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; Point (Header blk)
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; Point block
</span><span class="hs-identifier hs-var">AF.headPoint</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666400"><span class="hs-identifier hs-var">oldChain</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>                              </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666399"><span class="hs-identifier hs-var">newChain</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-545"></span><span>          </span><span class="annot"><span class="annottext">ChainInformation -&gt; Maybe ChainInformation
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; Maybe ChainInformation)
-&gt; ChainInformation -&gt; Maybe ChainInformation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
-&gt; Bool
-&gt; AnchoredFragment (Header blk)
-&gt; Int64
-&gt; ChainInformation
forall blk.
HasHeader (Header blk) =&gt;
NewTipInfo blk
-&gt; Bool
-&gt; AnchoredFragment (Header blk)
-&gt; Int64
-&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var">chainInformation</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679666401"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666398"><span class="hs-identifier hs-var">fork</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666399"><span class="hs-identifier hs-var">newChain</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-546"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span> </span><span id="local-6989586621679666393"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679666393"><span class="hs-identifier hs-var">_warnings</span></a></span></span><span> </span><span id="local-6989586621679666392"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679666392"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span id="local-6989586621679666391"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666391"><span class="hs-identifier hs-var">_oldChain</span></a></span></span><span> </span><span id="local-6989586621679666390"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666390"><span class="hs-identifier hs-var">newChain</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-547"></span><span>          </span><span class="annot"><span class="annottext">ChainInformation -&gt; Maybe ChainInformation
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; Maybe ChainInformation)
-&gt; ChainInformation -&gt; Maybe ChainInformation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
-&gt; Bool
-&gt; AnchoredFragment (Header blk)
-&gt; Int64
-&gt; ChainInformation
forall blk.
HasHeader (Header blk) =&gt;
NewTipInfo blk
-&gt; Bool
-&gt; AnchoredFragment (Header blk)
-&gt; Int64
-&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var">chainInformation</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679666392"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679666390"><span class="hs-identifier hs-var">newChain</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-548"></span><span>        </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainInformation
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">TraceEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainInformation
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-550"></span><span>    </span><span class="annot"><a href="#local-6989586621679666405"><span class="hs-identifier hs-type">doTrace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span>    </span><span id="local-6989586621679666405"><span class="annot"><span class="annottext">doTrace :: ChainInformation -&gt; IO ()
</span><a href="#local-6989586621679666405"><span class="hs-identifier hs-var hs-var">doTrace</span></a></span></span><span>
</span><span id="line-553"></span><span>        </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679666388"><span class="annot"><span class="annottext">Word64
slots :: ChainInformation -&gt; Word64
slots :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666386"><span class="annot"><span class="annottext">Word64
blocks :: ChainInformation -&gt; Word64
blocks :: Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666384"><span class="annot"><span class="annottext">Rational
density :: ChainInformation -&gt; Rational
density :: Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var hs-var">density</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666382"><span class="annot"><span class="annottext">EpochNo
epoch :: ChainInformation -&gt; EpochNo
epoch :: EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var hs-var">epoch</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666380"><span class="annot"><span class="annottext">Word64
slotInEpoch :: ChainInformation -&gt; Word64
slotInEpoch :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var hs-var">slotInEpoch</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666378"><span class="annot"><span class="annottext">Bool
fork :: ChainInformation -&gt; Bool
fork :: Bool
</span><a href="Cardano.Tracing.Tracers.html#fork"><span class="hs-identifier hs-var hs-var">fork</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-554"></span><span>      </span><span class="hs-comment">-- TODO this is executed each time the newFhain changes. How cheap is it?</span><span>
</span><span id="line-555"></span><span>      </span><span id="local-6989586621679666376"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
forall a. Trace IO a -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-var">traceD</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;density&quot;</span></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
forall a. Fractional a =&gt; Rational -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromRational</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679666384"><span class="hs-identifier hs-var">density</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotNum&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666388"><span class="hs-identifier hs-var">slots</span></a></span><span>
</span><span id="line-559"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockNum&quot;</span></span><span>    </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666386"><span class="hs-identifier hs-var">blocks</span></a></span><span>
</span><span id="line-560"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotInEpoch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666380"><span class="hs-identifier hs-var">slotInEpoch</span></a></span><span>
</span><span id="line-561"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;epoch&quot;</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unEpochNo</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679666382"><span class="hs-identifier hs-var">epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666378"><span class="hs-identifier hs-var">fork</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-563"></span><span>        </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666408"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666376"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forks&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; IO Word64 -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Word64 -&gt; (Word64 -&gt; Word64) -&gt; IO Word64
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Word64
</span><a href="#local-6989586621679666411"><span class="hs-identifier hs-var">tForks</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
forall a. Enum a =&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">succ</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span id="local-6989586621679667072"><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-type">traceD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667072"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-567"></span><span id="traceD"><span class="annot"><span class="annottext">traceD :: Trace IO a -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-var hs-var">traceD</span></a></span></span><span> </span><span id="local-6989586621679666366"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666366"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666365"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666365"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span id="local-6989586621679666364"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666364"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679666363"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666363"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666366"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666365"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666364"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Measurable
</span><span class="hs-identifier hs-var">PureD</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666363"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span id="local-6989586621679667069"><span id="local-6989586621679667070"><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-type">traceI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667070"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667069"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679667070"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-570"></span><span id="traceI"><span class="annot"><span class="annottext">traceI :: Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var hs-var">traceI</span></a></span></span><span> </span><span id="local-6989586621679666360"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666360"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666359"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666359"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span id="local-6989586621679666358"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666358"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679666357"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679666357"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666360"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666359"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666358"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679666357"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#sendEKGDirectCounter"><span class="hs-identifier hs-type">sendEKGDirectCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span id="sendEKGDirectCounter"><span class="annot"><span class="annottext">sendEKGDirectCounter :: EKGDirect -&gt; Text -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectCounter"><span class="hs-identifier hs-var hs-var">sendEKGDirectCounter</span></a></span></span><span> </span><span id="local-6989586621679666354"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666354"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span> </span><span id="local-6989586621679666353"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666353"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-574"></span><span>  </span><span class="annot"><span class="annottext">MVar (Map Text Counter)
-&gt; (Map Text Counter -&gt; IO (Map Text Counter)) -&gt; IO ()
forall a. MVar a -&gt; (a -&gt; IO a) -&gt; IO ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">modifyMVar_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Counter)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgCounters"><span class="hs-identifier hs-var hs-var">ekgCounters</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666354"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Map Text Counter -&gt; IO (Map Text Counter)) -&gt; IO ())
-&gt; (Map Text Counter -&gt; IO (Map Text Counter)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666350"><span class="annot"><span class="annottext">Map Text Counter
</span><a href="#local-6989586621679666350"><span class="hs-identifier hs-var">registeredMap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text Counter -&gt; Maybe Counter
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666353"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Counter
</span><a href="#local-6989586621679666350"><span class="hs-identifier hs-var">registeredMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-576"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666348"><span class="annot"><span class="annottext">Counter
</span><a href="#local-6989586621679666348"><span class="hs-identifier hs-var">counter</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-577"></span><span>        </span><span class="annot"><span class="annottext">Counter -&gt; IO ()
</span><span class="hs-identifier hs-var">Counter.inc</span></span><span> </span><span class="annot"><span class="annottext">Counter
</span><a href="#local-6989586621679666348"><span class="hs-identifier hs-var">counter</span></a></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">Map Text Counter -&gt; IO (Map Text Counter)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Counter
</span><a href="#local-6989586621679666350"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-579"></span><span>      </span><span class="annot"><span class="annottext">Maybe Counter
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>        </span><span id="local-6989586621679666346"><span class="annot"><span class="annottext">Counter
</span><a href="#local-6989586621679666346"><span class="hs-identifier hs-var">counter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Server -&gt; IO Counter
</span><span class="hs-identifier hs-var">EKG.getCounter</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666353"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; Server
</span><a href="Cardano.Node.Configuration.Logging.html#ekgServer"><span class="hs-identifier hs-var hs-var">ekgServer</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666354"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>        </span><span class="annot"><span class="annottext">Counter -&gt; IO ()
</span><span class="hs-identifier hs-var">Counter.inc</span></span><span> </span><span class="annot"><span class="annottext">Counter
</span><a href="#local-6989586621679666346"><span class="hs-identifier hs-var">counter</span></a></span><span>
</span><span id="line-582"></span><span>        </span><span class="annot"><span class="annottext">Map Text Counter -&gt; IO (Map Text Counter)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Text Counter -&gt; IO (Map Text Counter))
-&gt; Map Text Counter -&gt; IO (Map Text Counter)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Counter -&gt; Map Text Counter -&gt; Map Text Counter
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666353"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Counter
</span><a href="#local-6989586621679666346"><span class="hs-identifier hs-var">counter</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Counter
</span><a href="#local-6989586621679666350"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span id="local-6989586621679666940"><span class="annot"><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-type">sendEKGDirectInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666940"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679666940"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-585"></span><span id="sendEKGDirectInt"><span class="annot"><span class="annottext">sendEKGDirectInt :: EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var hs-var">sendEKGDirectInt</span></a></span></span><span> </span><span id="local-6989586621679666341"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666341"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span> </span><span id="local-6989586621679666340"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666340"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679666339"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666339"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-586"></span><span>  </span><span class="annot"><span class="annottext">MVar (Map Text Gauge)
-&gt; (Map Text Gauge -&gt; IO (Map Text Gauge)) -&gt; IO ()
forall a. MVar a -&gt; (a -&gt; IO a) -&gt; IO ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">modifyMVar_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Gauge)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgGauges"><span class="hs-identifier hs-var hs-var">ekgGauges</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666341"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Map Text Gauge -&gt; IO (Map Text Gauge)) -&gt; IO ())
-&gt; (Map Text Gauge -&gt; IO (Map Text Gauge)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666337"><span class="annot"><span class="annottext">Map Text Gauge
</span><a href="#local-6989586621679666337"><span class="hs-identifier hs-var">registeredMap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text Gauge -&gt; Maybe Gauge
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666340"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Gauge
</span><a href="#local-6989586621679666337"><span class="hs-identifier hs-var">registeredMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666336"><span class="annot"><span class="annottext">Gauge
</span><a href="#local-6989586621679666336"><span class="hs-identifier hs-var">gauge</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-589"></span><span>        </span><span class="annot"><span class="annottext">Gauge -&gt; Int64 -&gt; IO ()
</span><span class="hs-identifier hs-var">Gauge.set</span></span><span> </span><span class="annot"><span class="annottext">Gauge
</span><a href="#local-6989586621679666336"><span class="hs-identifier hs-var">gauge</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666339"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>        </span><span class="annot"><span class="annottext">Map Text Gauge -&gt; IO (Map Text Gauge)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Gauge
</span><a href="#local-6989586621679666337"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-591"></span><span>      </span><span class="annot"><span class="annottext">Maybe Gauge
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-592"></span><span>        </span><span id="local-6989586621679666334"><span class="annot"><span class="annottext">Gauge
</span><a href="#local-6989586621679666334"><span class="hs-identifier hs-var">gauge</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Server -&gt; IO Gauge
</span><span class="hs-identifier hs-var">EKG.getGauge</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666340"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; Server
</span><a href="Cardano.Node.Configuration.Logging.html#ekgServer"><span class="hs-identifier hs-var hs-var">ekgServer</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666341"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>        </span><span class="annot"><span class="annottext">Gauge -&gt; Int64 -&gt; IO ()
</span><span class="hs-identifier hs-var">Gauge.set</span></span><span> </span><span class="annot"><span class="annottext">Gauge
</span><a href="#local-6989586621679666334"><span class="hs-identifier hs-var">gauge</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666339"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>        </span><span class="annot"><span class="annottext">Map Text Gauge -&gt; IO (Map Text Gauge)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Text Gauge -&gt; IO (Map Text Gauge))
-&gt; Map Text Gauge -&gt; IO (Map Text Gauge)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Gauge -&gt; Map Text Gauge -&gt; Map Text Gauge
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666340"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Gauge
</span><a href="#local-6989586621679666334"><span class="hs-identifier hs-var">gauge</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Gauge
</span><a href="#local-6989586621679666337"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-type">sendEKGDirectDouble</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span id="sendEKGDirectDouble"><span class="annot"><span class="annottext">sendEKGDirectDouble :: EKGDirect -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-var hs-var">sendEKGDirectDouble</span></a></span></span><span> </span><span id="local-6989586621679666331"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666331"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span> </span><span id="local-6989586621679666330"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666330"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679666329"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666329"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-598"></span><span>  </span><span class="annot"><span class="annottext">MVar (Map Text Label)
-&gt; (Map Text Label -&gt; IO (Map Text Label)) -&gt; IO ()
forall a. MVar a -&gt; (a -&gt; IO a) -&gt; IO ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">modifyMVar_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Label)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgLabels"><span class="hs-identifier hs-var hs-var">ekgLabels</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666331"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Map Text Label -&gt; IO (Map Text Label)) -&gt; IO ())
-&gt; (Map Text Label -&gt; IO (Map Text Label)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666327"><span class="annot"><span class="annottext">Map Text Label
</span><a href="#local-6989586621679666327"><span class="hs-identifier hs-var">registeredMap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text Label -&gt; Maybe Label
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666330"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Label
</span><a href="#local-6989586621679666327"><span class="hs-identifier hs-var">registeredMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-600"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666326"><span class="annot"><span class="annottext">Label
</span><a href="#local-6989586621679666326"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-601"></span><span>        </span><span class="annot"><span class="annottext">Label -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">Label.set</span></span><span> </span><span class="annot"><span class="annottext">Label
</span><a href="#local-6989586621679666326"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666329"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>        </span><span class="annot"><span class="annottext">Map Text Label -&gt; IO (Map Text Label)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Label
</span><a href="#local-6989586621679666327"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-603"></span><span>      </span><span class="annot"><span class="annottext">Maybe Label
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-604"></span><span>        </span><span id="local-6989586621679666323"><span class="annot"><span class="annottext">Label
</span><a href="#local-6989586621679666323"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Server -&gt; IO Label
</span><span class="hs-identifier hs-var">EKG.getLabel</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666330"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EKGDirect -&gt; Server
</span><a href="Cardano.Node.Configuration.Logging.html#ekgServer"><span class="hs-identifier hs-var hs-var">ekgServer</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666331"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>        </span><span class="annot"><span class="annottext">Label -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">Label.set</span></span><span> </span><span class="annot"><span class="annottext">Label
</span><a href="#local-6989586621679666323"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666329"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>        </span><span class="annot"><span class="annottext">Map Text Label -&gt; IO (Map Text Label)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Text Label -&gt; IO (Map Text Label))
-&gt; Map Text Label -&gt; IO (Map Text Label)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Label -&gt; Map Text Label -&gt; Map Text Label
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">SMap.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666330"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Label
</span><a href="#local-6989586621679666323"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Label
</span><a href="#local-6989586621679666327"><span class="hs-identifier hs-var">registeredMap</span></a></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-609"></span><span class="hs-comment">-- Consensus Tracers</span><span>
</span><span id="line-610"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span id="local-6989586621679666985"><span class="annot"><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-type">isRollForward</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceChainSyncServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666985"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-613"></span><span id="isRollForward"><span class="annot"><span class="annottext">isRollForward :: TraceChainSyncServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var hs-var">isRollForward</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceChainSyncServerUpdate</span></span><span> </span><span id="local-6989586621679666319"><span class="annot"><span class="annottext">Tip blk
</span><a href="#local-6989586621679666319"><span class="hs-identifier hs-var">_tip</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AddBlock</span></span><span> </span><span id="local-6989586621679666317"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666317"><span class="hs-identifier hs-var">_hdr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666316"><span class="annot"><span class="annottext">BlockingType
</span><a href="#local-6989586621679666316"><span class="hs-identifier hs-var">_blocking</span></a></span></span><span> </span><span class="annot"><span class="annottext">Enclosing' ()
</span><span class="hs-identifier hs-var">FallingEdge</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-614"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var">isRollForward</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-type">mkConsensusTracers</span></a></span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667249"><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679667250"><span class="annot"><a href="#local-6989586621679667250"><span class="hs-identifier hs-type">peer</span></a></span></span><span> </span><span id="local-6989586621679667233"><span class="annot"><a href="#local-6989586621679667233"><span class="hs-identifier hs-type">localPeer</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-618"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667250"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-619"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667250"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-620"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#LedgerQueries"><span class="hs-identifier hs-type">LedgerQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-621"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="annot"><a href="#local-6989586621679667250"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-630"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-631"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-632"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#HasKESInfo"><span class="hs-identifier hs-type">HasKESInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-633"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-635"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-636"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-638"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-639"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679667250"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667233"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-641"></span><span id="mkConsensusTracers"><span class="annot"><span class="annottext">mkConsensusTracers :: Maybe EKGDirect
-&gt; TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
</span><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-var hs-var">mkConsensusTracers</span></a></span></span><span> </span><span id="local-6989586621679666314"><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666314"><span class="hs-identifier hs-var">mbEKGDirect</span></a></span></span><span> </span><span id="local-6989586621679666313"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679666312"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679666311"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666310"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666310"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span id="local-6989586621679666309"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666309"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666308"><span class="annot"><span class="annottext">trmet :: Trace IO Text
</span><a href="#local-6989586621679666308"><span class="hs-identifier hs-var hs-var">trmet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span>  </span><span id="local-6989586621679666307"><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679666307"><span class="hs-identifier hs-var">elidedFetchDecision</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO
  (MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer))
forall a. ElidingTracer a =&gt; IO (MVar (Maybe a, Integer))
</span><span class="hs-identifier hs-var">newstate</span></span><span>  </span><span class="hs-comment">-- for eliding messages in FetchDecision tr</span><span>
</span><span id="line-645"></span><span>  </span><span id="local-6989586621679666306"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666306"><span class="hs-identifier hs-var">forgeTracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ForgeTracers
</span><a href="#local-6989586621679666305"><span class="hs-identifier hs-var">mkForgeTracers</span></a></span><span>
</span><span id="line-646"></span><span>  </span><span id="local-6989586621679666304"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666304"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span>  </span><span id="local-6989586621679666303"><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666303"><span class="hs-identifier hs-var">tBlocksServed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; IO (TVar Int64)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-649"></span><span>  </span><span id="local-6989586621679666302"><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666302"><span class="hs-identifier hs-var">tLocalUp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; IO (TVar Int64)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-650"></span><span>  </span><span id="local-6989586621679666301"><span class="annot"><span class="annottext">TVar SlotNo
</span><a href="#local-6989586621679666301"><span class="hs-identifier hs-var">tMaxSlotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; IO (TVar SlotNo)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; IO (TVar SlotNo)) -&gt; SlotNo -&gt; IO (TVar SlotNo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SlotNo
</span><span class="hs-identifier hs-var">SlotNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-651"></span><span>  </span><span id="local-6989586621679666299"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666299"><span class="hs-identifier hs-var">tSubmissionsCollected</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-652"></span><span>  </span><span id="local-6989586621679666298"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666298"><span class="hs-identifier hs-var">tSubmissionsAccepted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-653"></span><span>  </span><span id="local-6989586621679666297"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666297"><span class="hs-identifier hs-var">tSubmissionsRejected</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-654"></span><span>  </span><span id="local-6989586621679666296"><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
</span><a href="#local-6989586621679666296"><span class="hs-identifier hs-var">tBlockDelayM</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IntPSQ Word64 NominalDiffTime
-&gt; IO (TVar (IntPSQ Word64 NominalDiffTime))
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">IntPSQ Word64 NominalDiffTime
forall p v. IntPSQ p v
</span><span class="hs-identifier hs-var">Pq.empty</span></span><span>
</span><span id="line-655"></span><span>  </span><span id="local-6989586621679666294"><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666294"><span class="hs-identifier hs-var">tBlockDelayCDF1s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CdfCounter 1 -&gt; IO (TVar (CdfCounter 1))
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">(CdfCounter 1 -&gt; IO (TVar (CdfCounter 1)))
-&gt; CdfCounter 1 -&gt; IO (TVar (CdfCounter 1))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; CdfCounter 1
forall (limit :: Nat). Int64 -&gt; CdfCounter limit
</span><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679666292"><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666292"><span class="hs-identifier hs-var">tBlockDelayCDF3s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CdfCounter 3 -&gt; IO (TVar (CdfCounter 3))
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">(CdfCounter 3 -&gt; IO (TVar (CdfCounter 3)))
-&gt; CdfCounter 3 -&gt; IO (TVar (CdfCounter 3))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; CdfCounter 3
forall (limit :: Nat). Int64 -&gt; CdfCounter limit
</span><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-657"></span><span>  </span><span id="local-6989586621679666291"><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666291"><span class="hs-identifier hs-var">tBlockDelayCDF5s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CdfCounter 5 -&gt; IO (TVar (CdfCounter 5))
forall a. a -&gt; IO (TVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">(CdfCounter 5 -&gt; IO (TVar (CdfCounter 5)))
-&gt; CdfCounter 5 -&gt; IO (TVar (CdfCounter 5))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; CdfCounter 5
forall (limit :: Nat). Int64 -&gt; CdfCounter limit
</span><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span>  </span><span class="annot"><span class="annottext">Tracers' peer localPeer blk (Tracer IO)
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall remotePeer localPeer blk (f :: * -&gt; *).
f (TraceLabelPeer remotePeer (TraceChainSyncClientEvent blk))
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f [TraceLabelPeer
        remotePeer (FetchDecision [Point (Header blk)])]
-&gt; f (TraceLabelPeer
        remotePeer (TraceFetchClientState (Header blk)))
-&gt; f (TraceBlockFetchServerEvent blk)
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLocalTxSubmissionServerEvent blk)
-&gt; f (TraceEventMempool blk)
-&gt; f (TraceLabelCreds (TraceForgeEvent blk))
-&gt; f (TraceBlockchainTimeEvent UTCTime)
-&gt; f (TraceLabelCreds (ForgeStateInfo blk))
-&gt; f (TraceKeepAliveClient remotePeer)
-&gt; Tracers' remotePeer localPeer blk f
</span><span class="hs-identifier hs-type">Consensus.Tracers</span></span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainSyncClientTracer :: Tracer IO (TraceLabelPeer peer (TraceChainSyncClientEvent blk))
</span><span class="hs-identifier hs-var">Consensus.chainSyncClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelPeer peer (TraceChainSyncClientEvent blk))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncClient
</span><a href="Cardano.Tracing.Config.html#traceChainSyncClient"><span class="hs-identifier hs-var hs-var">traceChainSyncClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-661"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerHeaderTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerHeaderTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-662"></span><span>      </span><span class="annot"><span class="annottext">(TraceChainSyncServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceChainSyncServerEvent blk -&gt; IO ())
 -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; (TraceChainSyncServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666289"><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679666289"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-663"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
-&gt; TraceChainSyncServerEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
 -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; (Trace IO Text
    -&gt; Tracer IO (WithSeverity (TraceChainSyncServerEvent blk)))
-&gt; Trace IO Text
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; Trace IO Text -&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncHeaderServer&quot;</span></span><span>
</span><span id="line-664"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OnOff TraceChainSyncHeaderServer -&gt; Trace IO Text -&gt; Trace IO Text
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncHeaderServer
</span><a href="Cardano.Tracing.Config.html#traceChainSyncHeaderServer"><span class="hs-identifier hs-var hs-var">traceChainSyncHeaderServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679666289"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-665"></span><span>        </span><span class="annot"><span class="annottext">Maybe EKGDirect -&gt; TraceChainSyncServerEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666286"><span class="hs-identifier hs-var">traceServedCount</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666314"><span class="hs-identifier hs-var">mbEKGDirect</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679666289"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-666"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerBlockTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerBlockTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncBlockServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncBlockServer
</span><a href="Cardano.Tracing.Config.html#traceChainSyncBlockServer"><span class="hs-identifier hs-var hs-var">traceChainSyncBlockServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncBlockServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchDecisionTracer :: Tracer
  IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><span class="hs-identifier hs-var">Consensus.blockFetchDecisionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchDecisions
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchDecisions
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchDecisions"><span class="hs-identifier hs-var hs-var">traceBlockFetchDecisions</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; Tracer
      IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-668"></span><span>        </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
 -&gt; Tracer
      IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
(Eq peer, HasHeader blk, Show peer, ToObject peer) =&gt;
TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-var">teeTraceBlockFetchDecision</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679666307"><span class="hs-identifier hs-var">elidedFetchDecision</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchClientTracer :: Tracer
  IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
</span><span class="hs-identifier hs-var">Consensus.blockFetchClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
-&gt; TVar (IntPSQ Word64 NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
forall blk remotePeer.
Maybe EKGDirect
-&gt; TVar (IntPSQ Word64 NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; Tracer
     IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
-&gt; Tracer
     IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceBlockFetchClientMetrics"><span class="hs-identifier hs-var">traceBlockFetchClientMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679666314"><span class="hs-identifier hs-var">mbEKGDirect</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
</span><a href="#local-6989586621679666296"><span class="hs-identifier hs-var">tBlockDelayM</span></a></span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666294"><span class="hs-identifier hs-var">tBlockDelayCDF1s</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666292"><span class="hs-identifier hs-var">tBlockDelayCDF3s</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666291"><span class="hs-identifier hs-var">tBlockDelayCDF5s</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
 -&gt; Tracer
      IO (TraceLabelPeer peer (TraceFetchClientState (Header blk))))
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-671"></span><span>            </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchClient
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchClient"><span class="hs-identifier hs-var hs-var">traceBlockFetchClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-672"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchServerTracer :: Tracer IO (TraceBlockFetchServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.blockFetchServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
-&gt; LOMeta
-&gt; TVar Int64
-&gt; TVar Int64
-&gt; TVar SlotNo
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall blk.
Trace IO Text
-&gt; LOMeta
-&gt; TVar Int64
-&gt; TVar Int64
-&gt; TVar SlotNo
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceBlockFetchServerMetrics"><span class="hs-identifier hs-var">traceBlockFetchServerMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666308"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666304"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666303"><span class="hs-identifier hs-var">tBlocksServed</span></a></span><span>
</span><span id="line-673"></span><span>        </span><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666302"><span class="hs-identifier hs-var">tLocalUp</span></a></span><span> </span><span class="annot"><span class="annottext">TVar SlotNo
</span><a href="#local-6989586621679666301"><span class="hs-identifier hs-var">tMaxSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceBlockFetchServerEvent blk)
 -&gt; Tracer IO (TraceBlockFetchServerEvent blk))
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchServer
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchServer"><span class="hs-identifier hs-var hs-var">traceBlockFetchServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-674"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">keepAliveClientTracer :: Tracer IO (TraceKeepAliveClient peer)
</span><span class="hs-identifier hs-var">Consensus.keepAliveClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceKeepAliveClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceKeepAliveClient peer)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceKeepAliveClient
</span><a href="Cardano.Tracing.Config.html#traceKeepAliveClient"><span class="hs-identifier hs-var hs-var">traceKeepAliveClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;KeepAliveClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-675"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeStateInfoTracer :: Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><span class="hs-identifier hs-var">Consensus.forgeStateInfoTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceForgeStateInfo
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceForgeStateInfo
</span><a href="Cardano.Tracing.Config.html#traceForgeStateInfo"><span class="hs-identifier hs-var hs-var">traceForgeStateInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-676"></span><span>        </span><span class="annot"><span class="annottext">Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall blk.
(HasKESMetricsData blk, Show (ForgeStateInfo blk)) =&gt;
Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-var">forgeStateInfoTracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-677"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txInboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txInboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxInbound
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxInbound
</span><a href="Cardano.Tracing.Config.html#traceTxInbound"><span class="hs-identifier hs-var hs-var">traceTxInbound</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (TraceLabelPeer
      peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-678"></span><span>        </span><span class="annot"><span class="annottext">(TraceLabelPeer
   peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
 -&gt; IO ())
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelPeer
    peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
  -&gt; IO ())
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; (TraceLabelPeer
      peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
    -&gt; IO ())
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666273"><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679666273"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-679"></span><span>          </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (WithSeverity
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; (Trace IO Text
    -&gt; Tracer
         IO
         (WithSeverity
            (TraceLabelPeer
               peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))))
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        (TraceLabelPeer
           peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxInbound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679666273"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-680"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679666273"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-681"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxSubmissionCollected</span></span><span> </span><span id="local-6989586621679666271"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666271"><span class="hs-identifier hs-var">collected</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666308"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666304"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.submitted.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-683"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666299"><span class="hs-identifier hs-var">tSubmissionsCollected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666271"><span class="hs-identifier hs-var">collected</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxSubmissionProcessed</span></span><span> </span><span id="local-6989586621679666269"><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679666269"><span class="hs-identifier hs-var">processed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-686"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666308"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666304"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.accepted.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-687"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666298"><span class="hs-identifier hs-var">tSubmissionsAccepted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount -&gt; Int
</span><span class="hs-identifier hs-var hs-var">ptxcAccepted</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679666269"><span class="hs-identifier hs-var">processed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666308"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666304"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.rejected.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-689"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679666297"><span class="hs-identifier hs-var">tSubmissionsRejected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount -&gt; Int
</span><span class="hs-identifier hs-var hs-var">ptxcRejected</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679666269"><span class="hs-identifier hs-var">processed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)
</span><span class="hs-identifier hs-var">TraceTxInboundTerminated</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxInboundCanRequestMoreTxs</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxInboundCannotRequestMoreTxs</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txOutboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txOutboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxOutbound
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxOutbound
</span><a href="Cardano.Tracing.Config.html#traceTxOutbound"><span class="hs-identifier hs-var hs-var">traceTxOutbound</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxOutbound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-696"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionServerTracer :: Tracer IO (TraceLocalTxSubmissionServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.localTxSubmissionServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceLocalTxSubmissionServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLocalTxSubmissionServerEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalTxSubmissionServer
</span><a href="Cardano.Tracing.Config.html#traceLocalTxSubmissionServer"><span class="hs-identifier hs-var hs-var">traceLocalTxSubmissionServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalTxSubmissionServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mempoolTracer :: Tracer IO (TraceEventMempool blk)
</span><span class="hs-identifier hs-var">Consensus.mempoolTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceMempool
-&gt; Tracer IO (TraceEventMempool blk)
-&gt; Tracer IO (TraceEventMempool blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceMempool
</span><a href="Cardano.Tracing.Config.html#traceMempool"><span class="hs-identifier hs-var hs-var">traceMempool</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceEventMempool blk)
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
forall blk.
(ToJSON (GenTxId blk), ToObject (ApplyTxErr blk),
 ToObject (GenTx blk), LedgerSupportsMempool blk) =&gt;
TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-var">mempoolTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666309"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeTracer :: Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><span class="hs-identifier hs-var">Consensus.forgeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceForge
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceForge
</span><a href="Cardano.Tracing.Config.html#traceForge"><span class="hs-identifier hs-var hs-var">traceForge</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-699"></span><span>        </span><span class="annot"><span class="annottext">(TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; (TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666258"><span class="annot"><span class="annottext">tlcev :: TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679666258"><span class="hs-identifier hs-var">tlcev</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-700"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-701"></span><span>                     </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall blk.
(RunNode blk, LedgerQueries blk) =&gt;
ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-var">traceLeadershipChecks</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666306"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666310"><span class="hs-identifier hs-var">nodeKern</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679666258"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-702"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall blk.
(RunNode blk, ToObject (CannotForge blk),
 ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk), HasKESInfo blk) =&gt;
TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-var">forgeTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666312"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666306"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666309"><span class="hs-identifier hs-var">fStats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679666258"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockchainTimeTracer :: Tracer IO (TraceBlockchainTimeEvent UTCTime)
</span><span class="hs-identifier hs-var">Consensus.blockchainTimeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockchainTime
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockchainTime
</span><a href="Cardano.Tracing.Config.html#traceBlockchainTime"><span class="hs-identifier hs-var hs-var">traceBlockchainTime</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679666313"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceBlockchainTimeEvent UTCTime)
 -&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime))
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-705"></span><span>        </span><span class="annot"><span class="annottext">(TraceBlockchainTimeEvent UTCTime -&gt; IO ())
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceBlockchainTimeEvent UTCTime -&gt; IO ())
 -&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime))
-&gt; (TraceBlockchainTimeEvent UTCTime -&gt; IO ())
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666253"><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679666253"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-706"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO Text -&gt; Text -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime -&gt; Text
</span><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-var">readableTraceBlockchainTimeEvent</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679666253"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-708"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-709"></span><span>   </span><span class="annot"><a href="#local-6989586621679666305"><span class="hs-identifier hs-type">mkForgeTracers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-710"></span><span>   </span><span id="local-6989586621679666305"><span class="annot"><span class="annottext">mkForgeTracers :: IO ForgeTracers
</span><a href="#local-6989586621679666305"><span class="hs-identifier hs-var hs-var">mkForgeTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-711"></span><span>     </span><span class="hs-comment">-- We probably don't want to pay the extra IO cost per-counter-increment. -- sk</span><span>
</span><span id="line-712"></span><span>     </span><span id="local-6989586621679666250"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-713"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666248"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics.Forge&quot;</span></span><span>
</span><span id="line-714"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; ForgeTracers
</span><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span><span>
</span><span id="line-715"></span><span>       </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forged&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forge-about-to-lead&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;could-not-forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-718"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;adopted&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-719"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;didnt-adopt&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forged-invalid&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node-not-leader&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cannot-forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forge-state-update-error&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO (Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;block-from-future&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>       </span><span class="annot"><span class="annottext">IO (Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text) -&gt; IO (Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot-is-immutable&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>       </span><span class="annot"><span class="annottext">IO (Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text) -&gt; IO ForgeTracers
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666250"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666248"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node-is-leader&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666311"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span>   </span><span class="annot"><a href="#local-6989586621679666286"><span class="hs-identifier hs-type">traceServedCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceChainSyncServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667249"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>   </span><span id="local-6989586621679666286"><span class="annot"><span class="annottext">traceServedCount :: Maybe EKGDirect -&gt; TraceChainSyncServerEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666286"><span class="hs-identifier hs-var hs-var">traceServedCount</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>   </span><span class="annot"><a href="#local-6989586621679666286"><span class="hs-identifier hs-var">traceServedCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666244"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666244"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666243"><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679666243"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-731"></span><span>     </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk -&gt; Bool
forall blk. TraceChainSyncServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var">isRollForward</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679666243"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-732"></span><span>       </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectCounter"><span class="hs-identifier hs-var">sendEKGDirectCounter</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666244"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-733"></span><span>                            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.served.header.counter.int&quot;</span></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceBlockFetchServerMetrics"><span class="hs-identifier hs-type">traceBlockFetchServerMetrics</span></a></span><span>
</span><span id="line-737"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667014"><span class="annot"><a href="#local-6989586621679667014"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LogObject</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-741"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-742"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-743"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceBlockFetchServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667014"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceBlockFetchServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667014"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span id="traceBlockFetchServerMetrics"><span class="annot"><span class="annottext">traceBlockFetchServerMetrics :: Trace IO Text
-&gt; LOMeta
-&gt; TVar Int64
-&gt; TVar Int64
-&gt; TVar SlotNo
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceBlockFetchServerMetrics"><span class="hs-identifier hs-var hs-var">traceBlockFetchServerMetrics</span></a></span></span><span> </span><span id="local-6989586621679666242"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666242"><span class="hs-identifier hs-var">trMeta</span></a></span></span><span> </span><span id="local-6989586621679666241"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666241"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span id="local-6989586621679666240"><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666240"><span class="hs-identifier hs-var">tBlocksServed</span></a></span></span><span> </span><span id="local-6989586621679666239"><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666239"><span class="hs-identifier hs-var">tLocalUp</span></a></span></span><span> </span><span id="local-6989586621679666238"><span class="annot"><span class="annottext">TVar SlotNo
</span><a href="#local-6989586621679666238"><span class="hs-identifier hs-var">tMaxSlotNo</span></a></span></span><span> </span><span id="local-6989586621679666237"><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
</span><a href="#local-6989586621679666237"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceBlockFetchServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666236"><span class="hs-identifier hs-var">bsTracer</span></a></span><span>
</span><span id="line-746"></span><span>
</span><span id="line-747"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-748"></span><span>    </span><span class="annot"><a href="#local-6989586621679666236"><span class="hs-identifier hs-type">bsTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceBlockFetchServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679667014"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span>    </span><span id="local-6989586621679666236"><span class="annot"><span class="annottext">bsTracer :: TraceBlockFetchServerEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666236"><span class="hs-identifier hs-var hs-var">bsTracer</span></a></span></span><span> </span><span id="local-6989586621679666235"><span class="annot"><span class="annottext">e :: TraceBlockFetchServerEvent blk
</span><a href="#local-6989586621679666235"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceBlockFetchServerSendBlock</span></span><span> </span><span id="local-6989586621679666233"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666233"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-750"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; TraceBlockFetchServerEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
</span><a href="#local-6989586621679666237"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk
</span><a href="#local-6989586621679666235"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679666232"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666232"><span class="hs-identifier hs-var">served</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666231"><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621679666231"><span class="hs-identifier hs-var">mbLocalUpstreamyness</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">STM (Int64, Maybe Int64) -&gt; IO (Int64, Maybe Int64)
forall a. STM a -&gt; IO a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM (Int64, Maybe Int64) -&gt; IO (Int64, Maybe Int64))
-&gt; STM (Int64, Maybe Int64) -&gt; IO (Int64, Maybe Int64)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-753"></span><span>          </span><span id="local-6989586621679666229"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666229"><span class="hs-identifier hs-var">served</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar Int64 -&gt; (Int64 -&gt; Int64) -&gt; STM Int64
forall a. TVar a -&gt; (a -&gt; a) -&gt; STM a
</span><a href="Cardano.Node.STM.html#modifyReadTVar%27"><span class="hs-identifier hs-var">STM.modifyReadTVar'</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666240"><span class="hs-identifier hs-var">tBlocksServed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>          </span><span id="local-6989586621679666227"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666227"><span class="hs-identifier hs-var">maxSlotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar SlotNo -&gt; STM SlotNo
forall a. TVar a -&gt; STM a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar SlotNo
</span><a href="#local-6989586621679666238"><span class="hs-identifier hs-var">tMaxSlotNo</span></a></span><span>
</span><span id="line-755"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Point blk -&gt; WithOrigin SlotNo
forall block. Point block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">pointSlot</span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666233"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-756"></span><span>               </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><span class="hs-identifier hs-var">Origin</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int64, Maybe Int64) -&gt; STM (Int64, Maybe Int64)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666229"><span class="hs-identifier hs-var">served</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">At</span></span><span> </span><span id="local-6989586621679666223"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666223"><span class="hs-identifier hs-var">slotNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-758"></span><span>                   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; SlotNo -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">compare</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666227"><span class="hs-identifier hs-var">maxSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666223"><span class="hs-identifier hs-var">slotNo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-759"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">LT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-760"></span><span>                            </span><span class="annot"><span class="annottext">TVar SlotNo -&gt; SlotNo -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar SlotNo
</span><a href="#local-6989586621679666238"><span class="hs-identifier hs-var">tMaxSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666223"><span class="hs-identifier hs-var">slotNo</span></a></span><span>
</span><span id="line-761"></span><span>                            </span><span id="local-6989586621679666220"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666220"><span class="hs-identifier hs-var">lu</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar Int64 -&gt; (Int64 -&gt; Int64) -&gt; STM Int64
forall a. TVar a -&gt; (a -&gt; a) -&gt; STM a
</span><a href="Cardano.Node.STM.html#modifyReadTVar%27"><span class="hs-identifier hs-var">STM.modifyReadTVar'</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666239"><span class="hs-identifier hs-var">tLocalUp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>                            </span><span class="annot"><span class="annottext">(Int64, Maybe Int64) -&gt; STM (Int64, Maybe Int64)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666229"><span class="hs-identifier hs-var">served</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Maybe Int64
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666220"><span class="hs-identifier hs-var">lu</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">GT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-764"></span><span>                            </span><span class="annot"><span class="annottext">(Int64, Maybe Int64) -&gt; STM (Int64, Maybe Int64)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666229"><span class="hs-identifier hs-var">served</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">EQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-766"></span><span>                            </span><span id="local-6989586621679666219"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666219"><span class="hs-identifier hs-var">lu</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar Int64 -&gt; (Int64 -&gt; Int64) -&gt; STM Int64
forall a. TVar a -&gt; (a -&gt; a) -&gt; STM a
</span><a href="Cardano.Node.STM.html#modifyReadTVar%27"><span class="hs-identifier hs-var">STM.modifyReadTVar'</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int64
</span><a href="#local-6989586621679666239"><span class="hs-identifier hs-var">tLocalUp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>                            </span><span class="annot"><span class="annottext">(Int64, Maybe Int64) -&gt; STM (Int64, Maybe Int64)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666229"><span class="hs-identifier hs-var">served</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Maybe Int64
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666219"><span class="hs-identifier hs-var">lu</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>
</span><span id="line-769"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666242"><span class="hs-identifier hs-var">trMeta</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666241"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;served.block.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666232"><span class="hs-identifier hs-var">served</span></a></span><span>
</span><span id="line-770"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621679666231"><span class="hs-identifier hs-var">mbLocalUpstreamyness</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666218"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666218"><span class="hs-identifier hs-var">localUpstreamyness</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-772"></span><span>             </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666242"><span class="hs-identifier hs-var">trMeta</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666241"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;served.block.latest.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666218"><span class="hs-identifier hs-var">localUpstreamyness</span></a></span><span>
</span><span id="line-773"></span><span>           </span><span class="annot"><span class="annottext">Maybe Int64
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span class="hs-comment">-- | CdfCounter tracks the number of time a value below 'limit' has been seen.</span><span>
</span><span id="line-777"></span><span class="hs-keyword">newtype</span><span> </span><span id="CdfCounter"><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667030"><span class="annot"><a href="#local-6989586621679667030"><span class="hs-identifier hs-type">limit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CdfCounter"><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-comment">-- | Estimates the CDF for a specific limit 'l' by counting the number of times</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- a value 'v' is below the limit.</span><span>
</span><span id="line-781"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#cdfCounter"><span class="hs-identifier hs-type">cdfCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666967"><span class="annot"><a href="#local-6989586621679666967"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679666966"><span class="annot"><a href="#local-6989586621679666966"><span class="hs-identifier hs-type">l</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-782"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666967"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666967"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-783"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666966"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679666967"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666966"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-785"></span><span id="cdfCounter"><span class="annot"><span class="annottext">cdfCounter :: a -&gt; Int -&gt; Int64 -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#cdfCounter"><span class="hs-identifier hs-var hs-var">cdfCounter</span></a></span></span><span> </span><span id="local-6989586621679666216"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666216"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679666215"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666215"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679666214"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666214"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679666213"><span class="annot"><span class="annottext">TVar (CdfCounter l)
</span><a href="#local-6989586621679666213"><span class="hs-identifier hs-var">tCdf</span></a></span></span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; STM () -&gt; STM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666216"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666212"><span class="hs-identifier hs-var">lim</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; STM ()) -&gt; STM () -&gt; STM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-787"></span><span>        </span><span class="annot"><span class="annottext">TVar (CdfCounter l) -&gt; (CdfCounter l -&gt; CdfCounter l) -&gt; STM ()
forall a. TVar a -&gt; (a -&gt; a) -&gt; STM ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/stm-2.5.0.1/src"><span class="hs-identifier hs-var">STM.modifyTVar'</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter l)
</span><a href="#local-6989586621679666213"><span class="hs-identifier hs-var">tCdf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span id="local-6989586621679666210"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666210"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; CdfCounter l
forall (limit :: Nat). Int64 -&gt; CdfCounter limit
</span><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-var">CdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">(Int64 -&gt; CdfCounter l) -&gt; Int64 -&gt; CdfCounter l
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666210"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666214"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span id="local-6989586621679666209"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666209"><span class="hs-identifier hs-var">cdf</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter l) -&gt; STM (CdfCounter l)
forall a. TVar a -&gt; STM a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter l)
</span><a href="#local-6989586621679666213"><span class="hs-identifier hs-var">tCdf</span></a></span><span>
</span><span id="line-790"></span><span>    </span><span class="annot"><span class="annottext">Double -&gt; STM Double
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; STM Double) -&gt; Double -&gt; STM Double
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679666209"><span class="hs-identifier hs-var">cdf</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666215"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-793"></span><span>    </span><span class="annot"><a href="#local-6989586621679666212"><span class="hs-identifier hs-type">lim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679666967"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-794"></span><span>    </span><span id="local-6989586621679666212"><span class="annot"><span class="annottext">lim :: a
</span><a href="#local-6989586621679666212"><span class="hs-identifier hs-var hs-var">lim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; a
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; a) -&gt; Integer -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy l -&gt; Integer
forall (n :: Nat) (proxy :: Nat -&gt; *).
KnownNat n =&gt;
proxy n -&gt; Integer
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">natVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy l
forall k (t :: k). Proxy t
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666966"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">-- Add an observation to the CdfCounter.</span><span>
</span><span id="line-798"></span><span id="local-6989586621679666951"><span id="local-6989586621679666952"><span class="annot"><a href="Cardano.Tracing.Tracers.html#incCdfCounter"><span class="hs-identifier hs-type">incCdfCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666952"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666952"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666951"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679666952"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666951"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span><span>
</span><span id="line-799"></span><span id="incCdfCounter"><span class="annot"><span class="annottext">incCdfCounter :: a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#incCdfCounter"><span class="hs-identifier hs-var hs-var">incCdfCounter</span></a></span></span><span> </span><span id="local-6989586621679666204"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666204"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679666203"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666203"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Int -&gt; Int64 -&gt; TVar (CdfCounter l) -&gt; STM Double
forall a (l :: Nat).
(Num a, Ord a, KnownNat l) =&gt;
a -&gt; Int -&gt; Int64 -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#cdfCounter"><span class="hs-identifier hs-var">cdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666204"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666203"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-800"></span><span>
</span><span id="line-801"></span><span class="hs-comment">-- Remove an observation from the CdfCounter.</span><span>
</span><span id="line-802"></span><span id="local-6989586621679666201"><span id="local-6989586621679666202"><span class="annot"><a href="Cardano.Tracing.Tracers.html#decCdfCounter"><span class="hs-identifier hs-type">decCdfCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666202"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666202"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666201"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679666202"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666201"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span><span>
</span><span id="line-803"></span><span id="decCdfCounter"><span class="annot"><span class="annottext">decCdfCounter :: a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#decCdfCounter"><span class="hs-identifier hs-var hs-var">decCdfCounter</span></a></span></span><span> </span><span id="local-6989586621679666199"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666199"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679666198"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666198"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Int -&gt; Int64 -&gt; TVar (CdfCounter l) -&gt; STM Double
forall a (l :: Nat).
(Num a, Ord a, KnownNat l) =&gt;
a -&gt; Int -&gt; Int64 -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#cdfCounter"><span class="hs-identifier hs-var">cdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666199"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666198"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span class="hs-comment">-- Track the fraction of times forgeDelay was above 1s, 3s, and 5s.</span><span>
</span><span id="line-807"></span><span class="hs-comment">-- Only the first sample per slot number is counted.</span><span>
</span><span id="line-808"></span><span id="local-6989586621679666943"><span class="annot"><a href="Cardano.Tracing.Tracers.html#cdf135Counters"><span class="hs-identifier hs-type">cdf135Counters</span></a></span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666943"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-810"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntPSQ</span></span><span> </span><span class="annot"><a href="#local-6989586621679666943"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span class="hs-special">)</span><span>
</span><span id="line-813"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">5</span></span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679666943"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-815"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-817"></span><span id="cdf135Counters"><span class="annot"><span class="annottext">cdf135Counters :: TVar (IntPSQ a NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; a
-&gt; NominalDiffTime
-&gt; STM (Bool, Double, Double, Double)
</span><a href="Cardano.Tracing.Tracers.html#cdf135Counters"><span class="hs-identifier hs-var hs-var">cdf135Counters</span></a></span></span><span> </span><span id="local-6989586621679666196"><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
</span><a href="#local-6989586621679666196"><span class="hs-identifier hs-var">slotMapVar</span></a></span></span><span> </span><span id="local-6989586621679666195"><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666195"><span class="hs-identifier hs-var">cdf1sVar</span></a></span></span><span> </span><span id="local-6989586621679666194"><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666194"><span class="hs-identifier hs-var">cdf3sVar</span></a></span></span><span> </span><span id="local-6989586621679666193"><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666193"><span class="hs-identifier hs-var">cdf5sVar</span></a></span></span><span> </span><span id="local-6989586621679666192"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666192"><span class="hs-identifier hs-var">slotNo</span></a></span></span><span> </span><span id="local-6989586621679666191"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666191"><span class="hs-identifier hs-var">forgeDelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-818"></span><span>  </span><span id="local-6989586621679666190"><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666190"><span class="hs-identifier hs-var">slotMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime) -&gt; STM (IntPSQ a NominalDiffTime)
forall a. TVar a -&gt; STM a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
</span><a href="#local-6989586621679666196"><span class="hs-identifier hs-var">slotMapVar</span></a></span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Bool
forall p v. IntPSQ p v -&gt; Bool
</span><span class="hs-identifier hs-var">Pq.null</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666190"><span class="hs-identifier hs-var">slotMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666191"><span class="hs-identifier hs-var">forgeDelay</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">20</span></span><span>
</span><span id="line-820"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- During startup wait until we are in sync</span><span>
</span><span id="line-821"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IntPSQ a NominalDiffTime -&gt; Maybe (a, NominalDiffTime)
forall p v. Int -&gt; IntPSQ p v -&gt; Maybe (p, v)
</span><span class="hs-identifier hs-var">Pq.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666192"><span class="hs-identifier hs-var">slotNo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666190"><span class="hs-identifier hs-var">slotMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-822"></span><span>       </span><span class="annot"><span class="annottext">Maybe (a, NominalDiffTime)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-823"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666187"><span class="annot"><span class="annottext">slotMap' :: IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666187"><span class="hs-identifier hs-var hs-var">slotMap'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; a
-&gt; NominalDiffTime
-&gt; IntPSQ a NominalDiffTime
-&gt; IntPSQ a NominalDiffTime
forall p v. Ord p =&gt; Int -&gt; p -&gt; v -&gt; IntPSQ p v -&gt; IntPSQ p v
</span><span class="hs-identifier hs-var">Pq.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666192"><span class="hs-identifier hs-var">slotNo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666192"><span class="hs-identifier hs-var">slotNo</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666191"><span class="hs-identifier hs-var">forgeDelay</span></a></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666190"><span class="hs-identifier hs-var">slotMap</span></a></span><span>
</span><span id="line-824"></span><span>         </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Int
forall p v. IntPSQ p v -&gt; Int
</span><span class="hs-identifier hs-var">Pq.size</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666187"><span class="hs-identifier hs-var">slotMap'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1080</span></span><span> </span><span class="hs-comment">-- TODO k/2, should come from config file</span><span>
</span><span id="line-825"></span><span>            </span><span class="hs-keyword">then</span><span>
</span><span id="line-826"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
-&gt; Maybe (Int, a, NominalDiffTime, IntPSQ a NominalDiffTime)
forall p v. Ord p =&gt; IntPSQ p v -&gt; Maybe (Int, p, v, IntPSQ p v)
</span><span class="hs-identifier hs-var">Pq.minView</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666187"><span class="hs-identifier hs-var">slotMap'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-827"></span><span>                   </span><span class="annot"><span class="annottext">Maybe (Int, a, NominalDiffTime, IntPSQ a NominalDiffTime)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Err. We just inserted an element!</span><span>
</span><span id="line-828"></span><span>                   </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666183"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666183"><span class="hs-identifier hs-var">minSlotNo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666182"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666182"><span class="hs-identifier hs-var">minDelay</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666181"><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666181"><span class="hs-identifier hs-var">slotMap''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-829"></span><span>                     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666183"><span class="hs-identifier hs-var">minSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679666192"><span class="hs-identifier hs-var">slotNo</span></a></span><span>
</span><span id="line-830"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Nothing to do</span><span>
</span><span id="line-831"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-832"></span><span>                          </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; STM ()
</span><a href="#local-6989586621679666180"><span class="hs-identifier hs-var">decCdfs</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666182"><span class="hs-identifier hs-var">minDelay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Int
forall p v. IntPSQ p v -&gt; Int
</span><span class="hs-identifier hs-var">Pq.size</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666181"><span class="hs-identifier hs-var">slotMap''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>                          </span><span class="hs-special">(</span><span id="local-6989586621679666179"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666179"><span class="hs-identifier hs-var">cdf1s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666178"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666178"><span class="hs-identifier hs-var">cdf3s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666177"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666177"><span class="hs-identifier hs-var">cdf5s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; STM (Double, Double, Double)
</span><a href="#local-6989586621679666176"><span class="hs-identifier hs-var">incCdfs</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666191"><span class="hs-identifier hs-var">forgeDelay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Int
forall p v. IntPSQ p v -&gt; Int
</span><span class="hs-identifier hs-var">Pq.size</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666181"><span class="hs-identifier hs-var">slotMap''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>                          </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
-&gt; IntPSQ a NominalDiffTime -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
</span><a href="#local-6989586621679666196"><span class="hs-identifier hs-var">slotMapVar</span></a></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666181"><span class="hs-identifier hs-var">slotMap''</span></a></span><span>
</span><span id="line-835"></span><span>                          </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666179"><span class="hs-identifier hs-var">cdf1s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666178"><span class="hs-identifier hs-var">cdf3s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666177"><span class="hs-identifier hs-var">cdf5s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-836"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-837"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621679666175"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666175"><span class="hs-identifier hs-var">cdf1s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666174"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666174"><span class="hs-identifier hs-var">cdf3s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666173"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666173"><span class="hs-identifier hs-var">cdf5s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; STM (Double, Double, Double)
</span><a href="#local-6989586621679666176"><span class="hs-identifier hs-var">incCdfs</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666191"><span class="hs-identifier hs-var">forgeDelay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Int
forall p v. IntPSQ p v -&gt; Int
</span><span class="hs-identifier hs-var">Pq.size</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666187"><span class="hs-identifier hs-var">slotMap'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>              </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
-&gt; IntPSQ a NominalDiffTime -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ a NominalDiffTime)
</span><a href="#local-6989586621679666196"><span class="hs-identifier hs-var">slotMapVar</span></a></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666187"><span class="hs-identifier hs-var">slotMap'</span></a></span><span>
</span><span id="line-839"></span><span>              </span><span class="hs-comment">-- Wait until we have at least 45 samples before we start providing</span><span>
</span><span id="line-840"></span><span>              </span><span class="hs-comment">-- cdf estimates.</span><span>
</span><span id="line-841"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime -&gt; Int
forall p v. IntPSQ p v -&gt; Int
</span><span class="hs-identifier hs-var">Pq.size</span></span><span> </span><span class="annot"><span class="annottext">IntPSQ a NominalDiffTime
</span><a href="#local-6989586621679666190"><span class="hs-identifier hs-var">slotMap</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">45</span></span><span>
</span><span id="line-842"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666175"><span class="hs-identifier hs-var">cdf1s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666174"><span class="hs-identifier hs-var">cdf3s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666173"><span class="hs-identifier hs-var">cdf5s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>
</span><span id="line-845"></span><span>       </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(a, NominalDiffTime)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, Double, Double, Double)
-&gt; STM (Bool, Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- dupe, we only track the first</span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-848"></span><span>    </span><span class="annot"><a href="#local-6989586621679666176"><span class="hs-identifier hs-type">incCdfs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>    </span><span id="local-6989586621679666176"><span class="annot"><span class="annottext">incCdfs :: NominalDiffTime -&gt; Int -&gt; STM (Double, Double, Double)
</span><a href="#local-6989586621679666176"><span class="hs-identifier hs-var hs-var">incCdfs</span></a></span></span><span> </span><span id="local-6989586621679666172"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666172"><span class="hs-identifier hs-var">delay</span></a></span></span><span> </span><span id="local-6989586621679666171"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666171"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-850"></span><span>      </span><span id="local-6989586621679666170"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666170"><span class="hs-identifier hs-var">cdf1s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 1) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#incCdfCounter"><span class="hs-identifier hs-var">incCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666172"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666171"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666195"><span class="hs-identifier hs-var">cdf1sVar</span></a></span><span>
</span><span id="line-851"></span><span>      </span><span id="local-6989586621679666169"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666169"><span class="hs-identifier hs-var">cdf3s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 3) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#incCdfCounter"><span class="hs-identifier hs-var">incCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666172"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666171"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666194"><span class="hs-identifier hs-var">cdf3sVar</span></a></span><span>
</span><span id="line-852"></span><span>      </span><span id="local-6989586621679666168"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666168"><span class="hs-identifier hs-var">cdf5s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 5) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#incCdfCounter"><span class="hs-identifier hs-var">incCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666172"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666171"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666193"><span class="hs-identifier hs-var">cdf5sVar</span></a></span><span>
</span><span id="line-853"></span><span>      </span><span class="annot"><span class="annottext">(Double, Double, Double) -&gt; STM (Double, Double, Double)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666170"><span class="hs-identifier hs-var">cdf1s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666169"><span class="hs-identifier hs-var">cdf3s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666168"><span class="hs-identifier hs-var">cdf5s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>
</span><span id="line-855"></span><span>    </span><span class="annot"><a href="#local-6989586621679666180"><span class="hs-identifier hs-type">decCdfs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>    </span><span id="local-6989586621679666180"><span class="annot"><span class="annottext">decCdfs :: NominalDiffTime -&gt; Int -&gt; STM ()
</span><a href="#local-6989586621679666180"><span class="hs-identifier hs-var hs-var">decCdfs</span></a></span></span><span> </span><span id="local-6989586621679666167"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666167"><span class="hs-identifier hs-var">delay</span></a></span></span><span> </span><span id="local-6989586621679666166"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666166"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-857"></span><span>      </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 1) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#decCdfCounter"><span class="hs-identifier hs-var">decCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666167"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666166"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666195"><span class="hs-identifier hs-var">cdf1sVar</span></a></span><span>
</span><span id="line-858"></span><span>       </span><span class="annot"><span class="annottext">STM Double -&gt; STM Double -&gt; STM Double
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 3) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#decCdfCounter"><span class="hs-identifier hs-var">decCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666167"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666166"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666194"><span class="hs-identifier hs-var">cdf3sVar</span></a></span><span>
</span><span id="line-859"></span><span>       </span><span class="annot"><span class="annottext">STM Double -&gt; STM Double -&gt; STM Double
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int -&gt; TVar (CdfCounter 5) -&gt; STM Double
forall a (l :: Nat).
(Ord a, Num a, KnownNat l) =&gt;
a -&gt; Int -&gt; TVar (CdfCounter l) -&gt; STM Double
</span><a href="Cardano.Tracing.Tracers.html#decCdfCounter"><span class="hs-identifier hs-var">decCdfCounter</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666167"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666166"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666193"><span class="hs-identifier hs-var">cdf5sVar</span></a></span><span>
</span><span id="line-860"></span><span>       </span><span class="annot"><span class="annottext">STM Double -&gt; STM () -&gt; STM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; STM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceBlockFetchClientMetrics"><span class="hs-identifier hs-type">traceBlockFetchClientMetrics</span></a></span><span>
</span><span id="line-863"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667016"><span class="annot"><a href="#local-6989586621679667016"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679667017"><span class="annot"><a href="#local-6989586621679667017"><span class="hs-identifier hs-type">remotePeer</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-864"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-866"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntPSQ</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM.TVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#CdfCounter"><span class="hs-identifier hs-type">CdfCounter</span></a></span><span> </span><span class="annot"><span class="hs-number">5</span></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679667017"><span class="hs-identifier hs-type">remotePeer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceFetchClientState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667016"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679667017"><span class="hs-identifier hs-type">remotePeer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceFetchClientState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667016"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span id="traceBlockFetchClientMetrics"><span class="annot"><span class="annottext">traceBlockFetchClientMetrics :: Maybe EKGDirect
-&gt; TVar (IntPSQ Word64 NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; Tracer
     IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
-&gt; Tracer
     IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceBlockFetchClientMetrics"><span class="hs-identifier hs-var hs-var">traceBlockFetchClientMetrics</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666165"><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="#local-6989586621679666165"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="#local-6989586621679666165"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-873"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceBlockFetchClientMetrics"><span class="hs-identifier hs-var">traceBlockFetchClientMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666164"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679666163"><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
</span><a href="#local-6989586621679666163"><span class="hs-identifier hs-var">slotMapVar</span></a></span></span><span> </span><span id="local-6989586621679666162"><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666162"><span class="hs-identifier hs-var">cdf1sVar</span></a></span></span><span> </span><span id="local-6989586621679666161"><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666161"><span class="hs-identifier hs-var">cdf3sVar</span></a></span></span><span> </span><span id="local-6989586621679666160"><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666160"><span class="hs-identifier hs-var">cdf5sVar</span></a></span></span><span> </span><span id="local-6989586621679666159"><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="#local-6989586621679666159"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
 -&gt; IO ())
-&gt; Tracer
     IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
-&gt; IO ()
</span><a href="#local-6989586621679666158"><span class="hs-identifier hs-var">bfTracer</span></a></span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-876"></span><span>    </span><span class="annot"><a href="#local-6989586621679666158"><span class="hs-identifier hs-type">bfTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679667017"><span class="hs-identifier hs-type">remotePeer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceFetchClientState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667016"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>    </span><span id="local-6989586621679666158"><span class="annot"><span class="annottext">bfTracer :: TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
-&gt; IO ()
</span><a href="#local-6989586621679666158"><span class="hs-identifier hs-var hs-var">bfTracer</span></a></span></span><span> </span><span id="local-6989586621679666157"><span class="annot"><span class="annottext">e :: TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
</span><a href="#local-6989586621679666157"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">remotePeer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompletedBlockFetch</span></span><span> </span><span id="local-6989586621679666155"><span class="annot"><span class="annottext">Point (Header blk)
</span><a href="#local-6989586621679666155"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">PeerFetchInFlight (Header blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PeerFetchInFlightLimits
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PeerFetchStatus (Header blk)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666154"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666154"><span class="hs-identifier hs-var">delay</span></a></span></span><span> </span><span id="local-6989586621679666153"><span class="annot"><span class="annottext">SizeInBytes
</span><a href="#local-6989586621679666153"><span class="hs-identifier hs-var">blockSize</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-878"></span><span>      </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
-&gt; TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="#local-6989586621679666159"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
</span><a href="#local-6989586621679666157"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-879"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Point (Header blk) -&gt; WithOrigin SlotNo
forall block. Point block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">pointSlot</span></span><span> </span><span class="annot"><span class="annottext">Point (Header blk)
</span><a href="#local-6989586621679666155"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-880"></span><span>        </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><span class="hs-identifier hs-var">Origin</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Nothing to do.</span><span>
</span><span id="line-881"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">At</span></span><span> </span><span id="local-6989586621679666152"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666152"><span class="hs-identifier hs-var">slotNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-882"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679666151"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666151"><span class="hs-identifier hs-var">fresh</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666150"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666150"><span class="hs-identifier hs-var">cdf1s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666149"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666149"><span class="hs-identifier hs-var">cdf3s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666148"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666148"><span class="hs-identifier hs-var">cdf5s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">STM (Bool, Double, Double, Double)
-&gt; IO (Bool, Double, Double, Double)
forall a. STM a -&gt; IO a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM (Bool, Double, Double, Double)
 -&gt; IO (Bool, Double, Double, Double))
-&gt; STM (Bool, Double, Double, Double)
-&gt; IO (Bool, Double, Double, Double)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-883"></span><span>              </span><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; Word64
-&gt; NominalDiffTime
-&gt; STM (Bool, Double, Double, Double)
forall a.
Integral a =&gt;
TVar (IntPSQ a NominalDiffTime)
-&gt; TVar (CdfCounter 1)
-&gt; TVar (CdfCounter 3)
-&gt; TVar (CdfCounter 5)
-&gt; a
-&gt; NominalDiffTime
-&gt; STM (Bool, Double, Double, Double)
</span><a href="Cardano.Tracing.Tracers.html#cdf135Counters"><span class="hs-identifier hs-var">cdf135Counters</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (IntPSQ Word64 NominalDiffTime)
</span><a href="#local-6989586621679666163"><span class="hs-identifier hs-var">slotMapVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 1)
</span><a href="#local-6989586621679666162"><span class="hs-identifier hs-var">cdf1sVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 3)
</span><a href="#local-6989586621679666161"><span class="hs-identifier hs-var">cdf3sVar</span></a></span><span> </span><span class="annot"><span class="annottext">TVar (CdfCounter 5)
</span><a href="#local-6989586621679666160"><span class="hs-identifier hs-var">cdf5sVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><a href="#local-6989586621679666147"><span class="hs-identifier hs-var">slotMapKey</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666152"><span class="hs-identifier hs-var">slotNo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666154"><span class="hs-identifier hs-var">delay</span></a></span><span>
</span><span id="line-884"></span><span>
</span><span id="line-885"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666151"><span class="hs-identifier hs-var">fresh</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-886"></span><span>            </span><span class="hs-comment">-- TODO: Revisit ekg counter access once there is a faster way.</span><span>
</span><span id="line-887"></span><span>            </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-var">sendEKGDirectDouble</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.blockdelay.s&quot;</span></span><span>
</span><span id="line-888"></span><span>                </span><span class="annot"><span class="annottext">(Double -&gt; IO ()) -&gt; Double -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666154"><span class="hs-identifier hs-var">delay</span></a></span><span>
</span><span id="line-889"></span><span>            </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; SizeInBytes -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.blocksize&quot;</span></span><span>
</span><span id="line-890"></span><span>               </span><span class="annot"><span class="annottext">SizeInBytes
</span><a href="#local-6989586621679666153"><span class="hs-identifier hs-var">blockSize</span></a></span><span>
</span><span id="line-891"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666150"><span class="hs-identifier hs-var">cdf1s</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-892"></span><span>              </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-var">sendEKGDirectDouble</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-893"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.blockdelay.cdfOne&quot;</span></span><span>
</span><span id="line-894"></span><span>                </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666150"><span class="hs-identifier hs-var">cdf1s</span></a></span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666149"><span class="hs-identifier hs-var">cdf3s</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-897"></span><span>              </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-var">sendEKGDirectDouble</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-898"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.blockdelay.cdfThree&quot;</span></span><span>
</span><span id="line-899"></span><span>                </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666149"><span class="hs-identifier hs-var">cdf3s</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666148"><span class="hs-identifier hs-var">cdf5s</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-902"></span><span>              </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectDouble"><span class="hs-identifier hs-var">sendEKGDirectDouble</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-903"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.blockdelay.cdfFive&quot;</span></span><span>
</span><span id="line-904"></span><span>                </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679666148"><span class="hs-identifier hs-var">cdf5s</span></a></span><span>
</span><span id="line-905"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679666154"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-906"></span><span>              </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectCounter"><span class="hs-identifier hs-var">sendEKGDirectCounter</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679666164"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.blockfetchclient.lateblocks&quot;</span></span><span>
</span><span id="line-907"></span><span>
</span><span id="line-908"></span><span>    </span><span class="annot"><a href="#local-6989586621679666158"><span class="hs-identifier hs-var">bfTracer</span></a></span><span> </span><span id="local-6989586621679666146"><span class="annot"><span class="annottext">TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
</span><a href="#local-6989586621679666146"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-909"></span><span>      </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
-&gt; TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer remotePeer (TraceFetchClientState (Header blk)))
</span><a href="#local-6989586621679666159"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer remotePeer (TraceFetchClientState (Header blk))
</span><a href="#local-6989586621679666146"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span>    </span><span class="annot"><a href="#local-6989586621679666147"><span class="hs-identifier hs-type">slotMapKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-912"></span><span>    </span><span id="local-6989586621679666147"><span class="annot"><span class="annottext">slotMapKey :: SlotNo -&gt; Word64
</span><a href="#local-6989586621679666147"><span class="hs-identifier hs-var hs-var">slotMapKey</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span id="local-6989586621679666145"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666145"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666145"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-type">traceLeadershipChecks</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-916"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666998"><span class="annot"><a href="#local-6989586621679666998"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679666998"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-918"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#LedgerQueries"><span class="hs-identifier hs-type">LedgerQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666998"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-919"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-920"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-921"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666998"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-923"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666998"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-925"></span><span id="traceLeadershipChecks"><span class="annot"><span class="annottext">traceLeadershipChecks :: ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-var hs-var">traceLeadershipChecks</span></a></span></span><span> </span><span id="local-6989586621679666144"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666144"><span class="hs-identifier hs-var">_ft</span></a></span></span><span> </span><span id="local-6989586621679666143"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666143"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span id="local-6989586621679666142"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666142"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679666141"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666141"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666140"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666140"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span id="local-6989586621679666139"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666139"><span class="hs-identifier hs-var">creds</span></a></span></span><span> </span><span id="local-6989586621679666138"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666138"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-927"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666138"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-928"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679666136"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666136"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-929"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679666135"><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679666135"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(NodeKernel
   IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
 -&gt; IO (Int, Int, Rational))
-&gt; NodeKernelData blk -&gt; IO (StrictMaybe (Int, Int, Rational))
forall blk a.
(NodeKernel
   IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
 -&gt; IO a)
-&gt; NodeKernelData blk -&gt; IO (StrictMaybe a)
</span><a href="Cardano.Node.Queries.html#mapNodeKernelDataIO"><span class="hs-identifier hs-var">mapNodeKernelDataIO</span></a></span><span>
</span><span id="line-930"></span><span>                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679666133"><span class="annot"><span class="annottext">NodeKernel
  IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
</span><a href="#local-6989586621679666133"><span class="hs-identifier hs-var">nk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-931"></span><span>                       </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-932"></span><span>                         </span><span class="annot"><span class="annottext">(Int -&gt; Int -&gt; Rational -&gt; (Int, Int, Rational))
-&gt; IO Int -&gt; IO (Int -&gt; Rational -&gt; (Int, Int, Rational))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ExtLedgerState blk -&gt; Int)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO Int
forall blk a.
IsLedger (LedgerState blk) =&gt;
(ExtLedgerState blk -&gt; a)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO a
</span><a href="Cardano.Node.Queries.html#nkQueryLedger"><span class="hs-identifier hs-var">nkQueryLedger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState blk -&gt; Int
forall blk. LedgerQueries blk =&gt; LedgerState blk -&gt; Int
</span><a href="Cardano.Node.Queries.html#ledgerUtxoSize"><span class="hs-identifier hs-var">ledgerUtxoSize</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState blk -&gt; Int)
-&gt; (ExtLedgerState blk -&gt; LedgerState blk)
-&gt; ExtLedgerState blk
-&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ExtLedgerState blk -&gt; LedgerState blk
forall blk. ExtLedgerState blk -&gt; LedgerState blk
</span><span class="hs-identifier hs-var hs-var">ledgerState</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeKernel
  IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
</span><a href="#local-6989586621679666133"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-933"></span><span>                         </span><span class="annot"><span class="annottext">IO (Int -&gt; Rational -&gt; (Int, Int, Rational))
-&gt; IO Int -&gt; IO (Rational -&gt; (Int, Int, Rational))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ExtLedgerState blk -&gt; Int)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO Int
forall blk a.
IsLedger (LedgerState blk) =&gt;
(ExtLedgerState blk -&gt; a)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO a
</span><a href="Cardano.Node.Queries.html#nkQueryLedger"><span class="hs-identifier hs-var">nkQueryLedger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState blk -&gt; Int
forall blk. LedgerQueries blk =&gt; LedgerState blk -&gt; Int
</span><a href="Cardano.Node.Queries.html#ledgerDelegMapSize"><span class="hs-identifier hs-var">ledgerDelegMapSize</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState blk -&gt; Int)
-&gt; (ExtLedgerState blk -&gt; LedgerState blk)
-&gt; ExtLedgerState blk
-&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ExtLedgerState blk -&gt; LedgerState blk
forall blk. ExtLedgerState blk -&gt; LedgerState blk
</span><span class="hs-identifier hs-var hs-var">ledgerState</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeKernel
  IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
</span><a href="#local-6989586621679666133"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-934"></span><span>                         </span><span class="annot"><span class="annottext">IO (Rational -&gt; (Int, Int, Rational))
-&gt; IO Rational -&gt; IO (Int, Int, Rational)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(AnchoredFragment (Header blk) -&gt; Rational)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO Rational
forall blk a.
(AnchoredFragment (Header blk) -&gt; a)
-&gt; NodeKernel
     IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
-&gt; IO a
</span><a href="Cardano.Node.Queries.html#nkQueryChain"><span class="hs-identifier hs-var">nkQueryChain</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; Rational
forall blk.
HasHeader (Header blk) =&gt;
AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var">fragmentChainDensity</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel
  IO (ConnectionId RemoteAddress) (ConnectionId LocalAddress) blk
</span><a href="#local-6989586621679666133"><span class="hs-identifier hs-var">nk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>                    </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679666143"><span class="hs-identifier hs-var">nodeKern</span></a></span><span>
</span><span id="line-936"></span><span>        </span><span id="local-6989586621679666127"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666127"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666140"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-937"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; StrictMaybe (IO ()) -&gt; IO ()
forall a. a -&gt; StrictMaybe a -&gt; a
</span><span class="hs-identifier hs-var">fromSMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (IO ()) -&gt; IO ()) -&gt; StrictMaybe (IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-938"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679666135"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
-&gt; ((Int, Int, Rational) -&gt; IO ()) -&gt; StrictMaybe (IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span>
</span><span id="line-939"></span><span>            </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679666124"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666124"><span class="hs-identifier hs-var">utxoSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666123"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666123"><span class="hs-identifier hs-var">delegMapSize</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-940"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utxoSize&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666141"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666124"><span class="hs-identifier hs-var">utxoSize</span></a></span><span>
</span><span id="line-941"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;delegMapSize&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666141"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666123"><span class="hs-identifier hs-var">delegMapSize</span></a></span><span>
</span><span id="line-942"></span><span>        </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LeadershipCheck&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666141"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-943"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666127"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-944"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Object -&gt; LOContent Text
forall a. Object -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogStructured</span></span><span> </span><span class="annot"><span class="annottext">(Object -&gt; LOContent Text) -&gt; Object -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Key, Value)] -&gt; Object
forall v. [(Key, v)] -&gt; KeyMap v
</span><span class="hs-identifier hs-var">KeyMap.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Key, Value)] -&gt; Object) -&gt; [(Key, Value)] -&gt; Object
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-945"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;kind&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TraceStartLeadershipCheck&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>            </span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;credentials&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666139"><span class="hs-identifier hs-var">creds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>            </span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slot&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Value) -&gt; Word64 -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666136"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-948"></span><span>            </span><span class="annot"><span class="annottext">[(Key, Value)] -&gt; [(Key, Value)] -&gt; [(Key, Value)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(Key, Value)] -&gt; StrictMaybe [(Key, Value)] -&gt; [(Key, Value)]
forall a. a -&gt; StrictMaybe a -&gt; a
</span><span class="hs-identifier hs-var">fromSMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-949"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679666135"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
-&gt; ((Int, Int, Rational) -&gt; [(Key, Value)])
-&gt; StrictMaybe [(Key, Value)]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span>
</span><span id="line-950"></span><span>                 </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679666118"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666118"><span class="hs-identifier hs-var">utxoSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666117"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666117"><span class="hs-identifier hs-var">delegMapSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666116"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679666116"><span class="hs-identifier hs-var">chainDensity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-951"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;utxoSize&quot;</span></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666118"><span class="hs-identifier hs-var">utxoSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-952"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;delegMapSize&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666117"><span class="hs-identifier hs-var">delegMapSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-953"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;chainDensity&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Float -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Float
forall a. Fractional a =&gt; Rational -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromRational</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679666116"><span class="hs-identifier hs-var">chainDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Float</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>                   </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-956"></span><span>      </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-type">teeForge</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-959"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666896"><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-960"></span><span>  </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-961"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-963"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-965"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666896"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span id="teeForge"><span class="annot"><span class="annottext">teeForge :: ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-var hs-var">teeForge</span></a></span></span><span> </span><span id="local-6989586621679666114"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679666113"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666113"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679666112"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666112"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-972"></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666111"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="#local-6989586621679666111"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679666110"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666110"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span id="local-6989586621679666109"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679666109"><span class="hs-identifier hs-var">_creds</span></a></span></span><span> </span><span id="local-6989586621679666108"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666108"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-973"></span><span>  </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceForgeEvent blk))
 -&gt; WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; WithSeverity (TraceForgeEvent blk)
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
-&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
-&gt; WithSeverity (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Severity
-&gt; TraceForgeEvent blk -&gt; WithSeverity (TraceForgeEvent blk)
forall a. Severity -&gt; a -&gt; WithSeverity a
</span><span class="hs-identifier hs-var">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679666110"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666108"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceForgeEvent blk)
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; Tracer m a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">fanning</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceForgeEvent blk)
  -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; (WithSeverity (TraceForgeEvent blk)
    -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666105"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666105"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-974"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666105"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-975"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgeAboutToLead"><span class="hs-identifier hs-var hs-var">ftForgeAboutToLead</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceSlotIsImmutable</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceSlotIsImmutable"><span class="hs-identifier hs-var hs-var">ftTraceSlotIsImmutable</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-977"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockFromFuture</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceBlockFromFuture"><span class="hs-identifier hs-var hs-var">ftTraceBlockFromFuture</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockContext</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-979"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerState</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-980"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerState</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-981"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerView</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerView</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-983"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeStateUpdateError</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceForgeStateUpdateError"><span class="hs-identifier hs-var hs-var">ftTraceForgeStateUpdateError</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeCannotForge"><span class="hs-identifier hs-var hs-var">ftTraceNodeCannotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeNotLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeNotLeader</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeIsLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeIsLeader</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeTickedLedgerState</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-988"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgingMempoolSnapshot</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-989"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForged"><span class="hs-identifier hs-var hs-var">ftForged</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-990"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceDidntAdoptBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftDidntAdoptBlock"><span class="hs-identifier hs-var hs-var">ftDidntAdoptBlock</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedInvalidBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgedInvalid"><span class="hs-identifier hs-var hs-var">ftForgedInvalid</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-992"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceAdoptedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftAdopted"><span class="hs-identifier hs-var hs-var">ftAdopted</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666114"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666108"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-994"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679666086"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666086"><span class="hs-identifier hs-var">_slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>    </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666113"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666112"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="#local-6989586621679666111"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-996"></span><span>
</span><span id="line-997"></span><span id="local-6989586621679666905"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-type">teeForge'</span></a></span><span>
</span><span id="line-998"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-999"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666905"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1000"></span><span id="teeForge%27"><span class="annot"><span class="annottext">teeForge' :: Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var hs-var">teeForge'</span></a></span></span><span> </span><span id="local-6989586621679666085"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666085"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1001"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; (WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666084"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666084"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1002"></span><span>    </span><span id="local-6989586621679666083"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666083"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-1003"></span><span>    </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666085"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((LOMeta, LOContent Text) -&gt; IO ())
-&gt; (LOContent Text -&gt; (LOMeta, LOContent Text))
-&gt; LOContent Text
-&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666083"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LOContent Text -&gt; IO ()) -&gt; LOContent Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1004"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666084"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1005"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679666082"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666082"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1006"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aboutToLeadSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666082"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1007"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceSlotIsImmutable</span></span><span> </span><span id="local-6989586621679666081"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666081"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666080"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666080"><span class="hs-identifier hs-var">_tipPoint</span></a></span></span><span> </span><span id="local-6989586621679666079"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621679666079"><span class="hs-identifier hs-var">_tipBlkNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1008"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotIsImmutable&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666081"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1009"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockFromFuture</span></span><span> </span><span id="local-6989586621679666078"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666078"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666077"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666077"><span class="hs-identifier hs-var">_slotNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1010"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockFromFuture&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666078"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1011"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockContext</span></span><span> </span><span id="local-6989586621679666076"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666076"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666075"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621679666075"><span class="hs-identifier hs-var">_tipBlkNo</span></a></span></span><span> </span><span id="local-6989586621679666074"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666074"><span class="hs-identifier hs-var">_tipPoint</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1012"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockContext&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666076"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1013"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerState</span></span><span> </span><span id="local-6989586621679666073"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666073"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1014"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;couldNotForgeSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666073"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1015"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerState</span></span><span> </span><span id="local-6989586621679666072"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666072"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1016"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ledgerState&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666072"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1017"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerView</span></span><span> </span><span id="local-6989586621679666071"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666071"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">OutsideForecastRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1018"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;couldNotForgeSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666071"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1019"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerView</span></span><span> </span><span id="local-6989586621679666070"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666070"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1020"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ledgerView&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666070"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1021"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeStateUpdateError</span></span><span> </span><span id="local-6989586621679666069"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666069"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666068"><span class="annot"><span class="annottext">ForgeStateUpdateError blk
</span><a href="#local-6989586621679666068"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1022"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgeStateUpdateError&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666069"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1023"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span id="local-6989586621679666067"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666067"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666066"><span class="annot"><span class="annottext">CannotForge blk
</span><a href="#local-6989586621679666066"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1024"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeCannotForge&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666067"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1025"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span> </span><span id="local-6989586621679666065"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666065"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1026"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeNotLeader&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666065"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1027"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span> </span><span id="local-6989586621679666064"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666064"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1028"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeIsLeader&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666064"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1029"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeTickedLedgerState</span></span><span> </span><span id="local-6989586621679666063"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666063"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666062"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666062"><span class="hs-identifier hs-var">_prevPt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1030"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgeTickedLedgerState&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666063"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1031"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgingMempoolSnapshot</span></span><span> </span><span id="local-6989586621679666061"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666061"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679666060"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679666060"><span class="hs-identifier hs-var">_prevPt</span></a></span></span><span> </span><span id="local-6989586621679666059"><span class="annot"><span class="annottext">ChainHash blk
</span><a href="#local-6989586621679666059"><span class="hs-identifier hs-var">_mpHash</span></a></span></span><span> </span><span id="local-6989586621679666058"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666058"><span class="hs-identifier hs-var">_mpSlotNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1032"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgingMempoolSnapshot&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666061"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1033"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span> </span><span id="local-6989586621679666057"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666057"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1034"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666057"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1035"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceDidntAdoptBlock</span></span><span> </span><span id="local-6989586621679666056"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666056"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1036"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;notAdoptedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666056"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1037"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedInvalidBlock</span></span><span> </span><span id="local-6989586621679666055"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666055"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InvalidBlockReason blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1038"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgedInvalidSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666055"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1039"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceAdoptedBlock</span></span><span> </span><span id="local-6989586621679666054"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666054"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1040"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;adoptedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679666054"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-type">forgeTracer</span></a></span><span>
</span><span id="line-1043"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666997"><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1044"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1045"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1046"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1047"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1050"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#HasKESInfo"><span class="hs-identifier hs-type">HasKESInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1051"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1052"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1053"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1054"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-1055"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-1056"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1057"></span><span id="forgeTracer"><span class="annot"><span class="annottext">forgeTracer :: TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-var hs-var">forgeTracer</span></a></span></span><span> </span><span id="local-6989586621679666053"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666053"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679666052"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666052"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679666051"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666051"><span class="hs-identifier hs-var">forgeTracers</span></a></span></span><span> </span><span id="local-6989586621679666050"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666050"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1058"></span><span>  </span><span class="annot"><span class="annottext">(TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; (TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666049"><span class="annot"><span class="annottext">tlcev :: TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679666049"><span class="hs-identifier hs-var">tlcev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666048"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666048"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1059"></span><span>    </span><span class="hs-comment">-- Ignoring the credentials label for measurement and counters:</span><span>
</span><span id="line-1060"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceForgeEvent blk) -&gt; TraceForgeEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
forall blk.
ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-var">notifyBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666050"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666052"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666048"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1061"></span><span>    </span><span class="hs-comment">-- Consensus tracer -- here we track the label:</span><span>
</span><span id="line-1062"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-1063"></span><span>                 </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall blk.
(RunNode blk, ToObject (CannotForge blk),
 ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk)) =&gt;
ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-var">teeForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679666051"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679666053"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-1064"></span><span>                 </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666052"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679666049"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-1065"></span><span>    </span><span class="annot"><span class="annottext">TraceForgeEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666046"><span class="hs-identifier hs-var">traceKESInfoIfKESExpired</span></a></span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666048"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1066"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1067"></span><span>  </span><span id="local-6989586621679666046"><span class="annot"><span class="annottext">traceKESInfoIfKESExpired :: TraceForgeEvent blk -&gt; IO ()
</span><a href="#local-6989586621679666046"><span class="hs-identifier hs-var hs-var">traceKESInfoIfKESExpired</span></a></span></span><span> </span><span id="local-6989586621679666045"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666045"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1068"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679666045"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1069"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeStateUpdateError</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679666044"><span class="annot"><span class="annottext">ForgeStateUpdateError blk
</span><a href="#local-6989586621679666044"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1070"></span><span>        </span><span class="hs-comment">-- KES-key cannot be evolved, but anyway trace KES-values.</span><span>
</span><span id="line-1071"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; ForgeStateUpdateError blk -&gt; Maybe KESInfo
forall blk.
HasKESInfo blk =&gt;
Proxy blk -&gt; ForgeStateUpdateError blk -&gt; Maybe KESInfo
</span><a href="Cardano.Node.Queries.html#getKESInfo"><span class="hs-identifier hs-var">getKESInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679666997"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForgeStateUpdateError blk
</span><a href="#local-6989586621679666044"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1072"></span><span>          </span><span class="annot"><span class="annottext">Maybe KESInfo
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>          </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679666042"><span class="annot"><span class="annottext">KESInfo
</span><a href="#local-6989586621679666042"><span class="hs-identifier hs-var">kesInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1074"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666887"><span class="annot"><a href="#local-6989586621679666041"><span class="hs-identifier hs-type">logValues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666887"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1075"></span><span>                </span><span id="local-6989586621679666041"><span class="annot"><span class="annottext">logValues :: [LOContent a]
</span><a href="#local-6989586621679666041"><span class="hs-identifier hs-var hs-var">logValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1076"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateStartKESPeriod&quot;</span></span><span>
</span><span id="line-1077"></span><span>                      </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable)
-&gt; (KESInfo -&gt; Integer) -&gt; KESInfo -&gt; Measurable
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Integer) -&gt; (KESInfo -&gt; Word) -&gt; KESInfo -&gt; Integer
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">KESPeriod -&gt; Word
</span><span class="hs-identifier hs-var hs-var">unKESPeriod</span></span><span> </span><span class="annot"><span class="annottext">(KESPeriod -&gt; Word) -&gt; (KESInfo -&gt; KESPeriod) -&gt; KESInfo -&gt; Word
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">KESInfo -&gt; KESPeriod
</span><span class="hs-identifier hs-var hs-var">HotKey.kesStartPeriod</span></span><span> </span><span class="annot"><span class="annottext">(KESInfo -&gt; Measurable) -&gt; KESInfo -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KESInfo
</span><a href="#local-6989586621679666042"><span class="hs-identifier hs-var">kesInfo</span></a></span><span>
</span><span id="line-1078"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateExpiryKESPeriod&quot;</span></span><span>
</span><span id="line-1079"></span><span>                      </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable)
-&gt; (KESInfo -&gt; Integer) -&gt; KESInfo -&gt; Measurable
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Integer) -&gt; (KESInfo -&gt; Word) -&gt; KESInfo -&gt; Integer
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">KESPeriod -&gt; Word
</span><span class="hs-identifier hs-var hs-var">unKESPeriod</span></span><span> </span><span class="annot"><span class="annottext">(KESPeriod -&gt; Word) -&gt; (KESInfo -&gt; KESPeriod) -&gt; KESInfo -&gt; Word
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">KESInfo -&gt; KESPeriod
</span><span class="hs-identifier hs-var hs-var">HotKey.kesEndPeriod</span></span><span> </span><span class="annot"><span class="annottext">(KESInfo -&gt; Measurable) -&gt; KESInfo -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KESInfo
</span><a href="#local-6989586621679666042"><span class="hs-identifier hs-var">kesInfo</span></a></span><span>
</span><span id="line-1080"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;currentKESPeriod&quot;</span></span><span>
</span><span id="line-1081"></span><span>                      </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1082"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remainingKESPeriods&quot;</span></span><span>
</span><span id="line-1083"></span><span>                      </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1084"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-1085"></span><span>            </span><span id="local-6989586621679666037"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666037"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-1086"></span><span>            </span><span class="annot"><span class="annottext">(LOContent Text -&gt; IO ()) -&gt; [LOContent Text] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666052"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((LOMeta, LOContent Text) -&gt; IO ())
-&gt; (LOContent Text -&gt; (LOMeta, LOContent Text))
-&gt; LOContent Text
-&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679666037"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LOContent Text]
forall a. [LOContent a]
</span><a href="#local-6989586621679666041"><span class="hs-identifier hs-var">logValues</span></a></span><span>
</span><span id="line-1087"></span><span>      </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span id="local-6989586621679666897"><span class="annot"><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-type">notifyBlockForging</span></a></span><span>
</span><span id="line-1090"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1092"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666897"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1093"></span><span id="notifyBlockForging"><span class="annot"><span class="annottext">notifyBlockForging :: ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-var hs-var">notifyBlockForging</span></a></span></span><span> </span><span id="local-6989586621679666035"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span id="local-6989586621679666034"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666034"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceForgeEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceForgeEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceForgeEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceForgeEvent blk))
-&gt; (TraceForgeEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceForgeEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1094"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1095"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeCannotForge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666034"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1096"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-1097"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679666032"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666032"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666032"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsNodeCannotForgeNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666032"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1098"></span><span>                       </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666032"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1099"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span id="local-6989586621679666030"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666030"><span class="hs-identifier hs-var">slot'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1100"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666029"><span class="annot"><span class="annottext">slot :: Int
</span><a href="#local-6989586621679666029"><span class="hs-identifier hs-var hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666030"><span class="hs-identifier hs-var">slot'</span></a></span><span>
</span><span id="line-1101"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeIsLeaderNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666034"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1102"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-1103"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679666028"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666028"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666028"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsNodeIsLeaderNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666028"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1104"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666029"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1105"></span><span>                      </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666028"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1107"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blocksForgedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666034"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1108"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-1109"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679666025"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666025"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666025"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsBlocksForgedNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666025"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1110"></span><span>                       </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666025"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span>
</span><span id="line-1112"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span id="local-6989586621679666023"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666023"><span class="hs-identifier hs-var">slot'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1113"></span><span>    </span><span class="hs-comment">-- Not is not a leader again, so now the number of blocks forged by this node</span><span>
</span><span id="line-1114"></span><span>    </span><span class="hs-comment">-- should be equal to the number of slots when this node was a leader.</span><span>
</span><span id="line-1115"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666022"><span class="annot"><span class="annottext">slot :: Int
</span><a href="#local-6989586621679666022"><span class="hs-identifier hs-var hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679666023"><span class="hs-identifier hs-var">slot'</span></a></span><span>
</span><span id="line-1116"></span><span>    </span><span id="local-6989586621679666021"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666021"><span class="hs-identifier hs-var">hasMissed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1117"></span><span>      </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Bool)) -&gt; IO Bool
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-1118"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679666020"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1119"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Enum a =&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">succ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666022"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-1120"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666022"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-1122"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666018"><span class="annot"><span class="annottext">missed :: Int
</span><a href="#local-6989586621679666018"><span class="hs-identifier hs-var hs-var">missed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var hs-var">ftsSlotsMissedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666022"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679666020"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666022"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ftsSlotsMissedNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var">ftsSlotsMissedNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666018"><span class="hs-identifier hs-var">missed</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679666021"><span class="hs-identifier hs-var">hasMissed</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1125"></span><span>      </span><span id="local-6989586621679666016"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666016"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (f :: * -&gt; *) a. (Foldable f, Num a) =&gt; f a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; IO [Int] -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats -&gt; (ForgeThreadStats -&gt; Int) -&gt; IO [Int]
forall a. ForgingStats -&gt; (ForgeThreadStats -&gt; a) -&gt; IO [a]
</span><a href="Cardano.Tracing.Metrics.html#threadStatsProjection"><span class="hs-identifier hs-var">threadStatsProjection</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666035"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var hs-var">ftsSlotsMissedNum</span></a></span><span>
</span><span id="line-1126"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotsMissedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666034"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666016"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1127"></span><span>  </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span>
</span><span id="line-1130"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1131"></span><span class="hs-comment">-- Mempool Tracers</span><span>
</span><span id="line-1132"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1133"></span><span>
</span><span id="line-1134"></span><span id="local-6989586621679666869"><span class="annot"><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-type">notifyTxsProcessed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679666869"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1135"></span><span id="notifyTxsProcessed"><span class="annot"><span class="annottext">notifyTxsProcessed :: ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-var hs-var">notifyTxsProcessed</span></a></span></span><span> </span><span id="local-6989586621679666012"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666012"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span id="local-6989586621679666011"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666011"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1136"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1137"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span> </span><span id="local-6989586621679666009"><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679666009"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1138"></span><span>    </span><span class="hs-comment">-- TraceMempoolRemoveTxs are previously valid transactions that are no longer valid because of</span><span>
</span><span id="line-1139"></span><span>    </span><span class="hs-comment">-- changes in the ledger state. These transactions are already removed from the mempool,</span><span>
</span><span id="line-1140"></span><span>    </span><span class="hs-comment">-- so we can treat them as completely processed.</span><span>
</span><span id="line-1141"></span><span>    </span><span id="local-6989586621679666008"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666008"><span class="hs-identifier hs-var">updatedTxProcessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ForgingStats -&gt; (Int -&gt; Int) -&gt; IO Int
</span><a href="Cardano.Tracing.Metrics.html#mapForgingStatsTxsProcessed"><span class="hs-identifier hs-var">mapForgingStatsTxsProcessed</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679666012"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Validated (GenTx blk)] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679666009"><span class="hs-identifier hs-var">txs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;txsProcessedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679666011"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666008"><span class="hs-identifier hs-var">updatedTxProcessed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span>  </span><span class="hs-comment">-- The rest of the constructors.</span><span>
</span><span id="line-1144"></span><span>  </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1145"></span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span id="local-6989586621679666870"><span id="local-6989586621679666871"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-type">mempoolMetricsTraceTransformer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679666870"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1148"></span><span id="mempoolMetricsTraceTransformer"><span class="annot"><span class="annottext">mempoolMetricsTraceTransformer :: Trace IO a -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-var hs-var">mempoolMetricsTraceTransformer</span></a></span></span><span> </span><span id="local-6989586621679666004"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666004"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679666003"><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679666003"><span class="hs-identifier hs-var">mempoolEvent</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679666002"><span class="annot"><span class="annottext">tr' :: Trace IO a
</span><a href="#local-6989586621679666002"><span class="hs-identifier hs-var hs-var">tr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO a -&gt; Trace IO a
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666004"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1150"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679666001"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679666001"><span class="hs-identifier hs-var">_n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679666000"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679666000"><span class="hs-identifier hs-var">tot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679666003"><span class="hs-identifier hs-var">mempoolEvent</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1151"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolAddedTx</span></span><span>     </span><span id="local-6989586621679665998"><span class="annot"><span class="annottext">Validated (GenTx blk)
</span><a href="#local-6989586621679665998"><span class="hs-identifier hs-var">_tx0</span></a></span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679665997"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665997"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665997"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRejectedTx</span></span><span>  </span><span id="local-6989586621679665995"><span class="annot"><span class="annottext">GenTx blk
</span><a href="#local-6989586621679665995"><span class="hs-identifier hs-var">_tx0</span></a></span></span><span> </span><span class="annot"><span class="annottext">ApplyTxErr blk
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679665994"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665994"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665994"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span>   </span><span id="local-6989586621679665993"><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679665993"><span class="hs-identifier hs-var">txs0</span></a></span></span><span>   </span><span id="local-6989586621679665992"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665992"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Validated (GenTx blk)] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679665993"><span class="hs-identifier hs-var">txs0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665992"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolManuallyRemovedTxs</span></span><span> </span><span id="local-6989586621679665990"><span class="annot"><span class="annottext">[GenTxId blk]
</span><a href="#local-6989586621679665990"><span class="hs-identifier hs-var">txs0</span></a></span></span><span> </span><span id="local-6989586621679665989"><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679665989"><span class="hs-identifier hs-var">txs1</span></a></span></span><span> </span><span id="local-6989586621679665988"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665988"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[GenTxId blk] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GenTxId blk]
</span><a href="#local-6989586621679665990"><span class="hs-identifier hs-var">txs0</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Validated (GenTx blk)] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Validated (GenTx blk)]
</span><a href="#local-6989586621679665989"><span class="hs-identifier hs-var">txs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679665988"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1155"></span><span>      </span><span id="local-6989586621679666873"><span class="annot"><a href="#local-6989586621679665987"><span class="hs-identifier hs-type">logValue1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666873"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1156"></span><span>      </span><span id="local-6989586621679665987"><span class="annot"><span class="annottext">logValue1 :: LOContent a
</span><a href="#local-6989586621679665987"><span class="hs-identifier hs-var hs-var">logValue1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;txsInMempool&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SizeInBytes -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MempoolSize -&gt; SizeInBytes
</span><span class="hs-identifier hs-var hs-var">msNumTxs</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679666000"><span class="hs-identifier hs-var">tot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>      </span><span id="local-6989586621679665985"><span class="annot"><a href="#local-6989586621679665984"><span class="hs-identifier hs-type">logValue2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679665985"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1158"></span><span>      </span><span id="local-6989586621679665984"><span class="annot"><span class="annottext">logValue2 :: LOContent a
</span><a href="#local-6989586621679665984"><span class="hs-identifier hs-var hs-var">logValue2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mempoolBytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SizeInBytes -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MempoolSize -&gt; SizeInBytes
</span><span class="hs-identifier hs-var hs-var">msNumBytes</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679666000"><span class="hs-identifier hs-var">tot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1159"></span><span>  </span><span id="local-6989586621679665982"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665982"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-1160"></span><span>  </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666002"><span class="hs-identifier hs-var">tr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665982"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LOContent a
forall a. LOContent a
</span><a href="#local-6989586621679665987"><span class="hs-identifier hs-var">logValue1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span>  </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679666002"><span class="hs-identifier hs-var">tr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665982"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LOContent a
forall a. LOContent a
</span><a href="#local-6989586621679665984"><span class="hs-identifier hs-var">logValue2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1162"></span><span>
</span><span id="line-1163"></span><span id="local-6989586621679667001"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-type">mempoolTracer</span></a></span><span>
</span><span id="line-1164"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679667001"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1165"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679667001"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679667001"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679667001"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1168"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1169"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-1172"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679667001"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1173"></span><span id="mempoolTracer"><span class="annot"><span class="annottext">mempoolTracer :: TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-var hs-var">mempoolTracer</span></a></span></span><span> </span><span id="local-6989586621679665981"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665981"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621679665980"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665980"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679665979"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679665979"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665978"><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679665978"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1174"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall a blk. Trace IO a -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-var">mempoolMetricsTraceTransformer</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665980"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679665978"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1175"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall blk.
ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-var">notifyTxsProcessed</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679665979"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665980"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679665978"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1176"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665977"><span class="annot"><span class="annottext">tr :: Trace IO Text
</span><a href="#local-6989586621679665977"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mempool&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665980"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-1177"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall blk.
(ToJSON (GenTxId blk), ToObject (ApplyTxErr blk),
 ToObject (GenTx blk), LedgerSupportsMempool blk) =&gt;
TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-var">mpTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665981"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665977"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679665978"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span id="local-6989586621679666868"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-type">mpTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679666868"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1180"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679666868"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1181"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679666868"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679666868"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1183"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1184"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679666868"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1185"></span><span id="mpTracer"><span class="annot"><span class="annottext">mpTracer :: TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-var hs-var">mpTracer</span></a></span></span><span> </span><span id="local-6989586621679665975"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665975"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621679665974"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665974"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceEventMempool blk))
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; Tracer IO (WithSeverity (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEventMempool blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665975"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665974"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1188"></span><span class="hs-comment">-- ForgeStateInfo Tracers</span><span>
</span><span id="line-1189"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1190"></span><span>
</span><span id="line-1191"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-type">forgeStateInfoMetricsTraceTransformer</span></a></span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679666856"><span class="annot"><a href="#local-6989586621679666856"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679666857"><span class="annot"><a href="#local-6989586621679666857"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666857"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1193"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666857"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1194"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666856"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1195"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679666857"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span id="forgeStateInfoMetricsTraceTransformer"><span class="annot"><span class="annottext">forgeStateInfoMetricsTraceTransformer :: Proxy blk
-&gt; Trace IO a -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-var hs-var">forgeStateInfoMetricsTraceTransformer</span></a></span></span><span> </span><span id="local-6989586621679665972"><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679665972"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679665971"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679665971"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; (TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1197"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679665970"><span class="annot"><span class="annottext">ForgeStateInfo blk
</span><a href="#local-6989586621679665970"><span class="hs-identifier hs-var">forgeStateInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1198"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; ForgeStateInfo blk -&gt; KESMetricsData
forall blk.
HasKESMetricsData blk =&gt;
Proxy blk -&gt; ForgeStateInfo blk -&gt; KESMetricsData
</span><a href="Cardano.Node.Queries.html#getKESMetricsData"><span class="hs-identifier hs-var">getKESMetricsData</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679665972"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeStateInfo blk
</span><a href="#local-6989586621679665970"><span class="hs-identifier hs-var">forgeStateInfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1199"></span><span>      </span><span class="annot"><span class="annottext">KESMetricsData
</span><a href="Cardano.Node.Queries.html#NoKESMetricsData"><span class="hs-identifier hs-var">NoKESMetricsData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>      </span><span class="annot"><a href="Cardano.Node.Queries.html#TPraosKESMetricsData"><span class="hs-identifier hs-type">TPraosKESMetricsData</span></a></span><span> </span><span id="local-6989586621679665966"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665966"><span class="hs-identifier hs-var">kesPeriodOfKey</span></a></span></span><span>
</span><span id="line-1201"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Queries.html#MaxKESEvolutions"><span class="hs-identifier hs-type">MaxKESEvolutions</span></a></span><span> </span><span id="local-6989586621679665964"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665964"><span class="hs-identifier hs-var">maxKesEvos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1202"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Queries.html#OperationalCertStartKESPeriod"><span class="hs-identifier hs-type">OperationalCertStartKESPeriod</span></a></span><span> </span><span id="local-6989586621679665962"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665962"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1203"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665961"><span class="annot"><span class="annottext">metricsTr :: Trace IO a
</span><a href="#local-6989586621679665961"><span class="hs-identifier hs-var hs-var">metricsTr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO a -&gt; Trace IO a
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679665971"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1204"></span><span>
</span><span id="line-1205"></span><span>            </span><span class="hs-comment">-- The KES period of the hot key is relative to the start KES</span><span>
</span><span id="line-1206"></span><span>            </span><span class="hs-comment">-- period of the operational certificate.</span><span>
</span><span id="line-1207"></span><span>            </span><span id="local-6989586621679665960"><span class="annot"><span class="annottext">currentKesPeriod :: Word
</span><a href="#local-6989586621679665960"><span class="hs-identifier hs-var hs-var">currentKesPeriod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665962"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665966"><span class="hs-identifier hs-var">kesPeriodOfKey</span></a></span><span>
</span><span id="line-1208"></span><span>
</span><span id="line-1209"></span><span>            </span><span id="local-6989586621679665959"><span class="annot"><span class="annottext">oCertExpiryKesPeriod :: Word
</span><a href="#local-6989586621679665959"><span class="hs-identifier hs-var hs-var">oCertExpiryKesPeriod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665962"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665964"><span class="hs-identifier hs-var">maxKesEvos</span></a></span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span>            </span><span id="local-6989586621679665958"><span class="annot"><span class="annottext">kesPeriodsUntilExpiry :: Word
</span><a href="#local-6989586621679665958"><span class="hs-identifier hs-var hs-var">kesPeriodsUntilExpiry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1212"></span><span>              </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">max</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665959"><span class="hs-identifier hs-var">oCertExpiryKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665960"><span class="hs-identifier hs-var">currentKesPeriod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1213"></span><span>
</span><span id="line-1214"></span><span>            </span><span class="annot"><a href="#local-6989586621679665956"><span class="hs-identifier hs-type">logValues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679666856"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1215"></span><span>            </span><span id="local-6989586621679665956"><span class="annot"><span class="annottext">logValues :: [LOContent a]
</span><a href="#local-6989586621679665956"><span class="hs-identifier hs-var hs-var">logValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1216"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateStartKESPeriod&quot;</span></span><span>
</span><span id="line-1217"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-1218"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665962"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span>
</span><span id="line-1219"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateExpiryKESPeriod&quot;</span></span><span>
</span><span id="line-1220"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-1221"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665959"><span class="hs-identifier hs-var">oCertExpiryKesPeriod</span></a></span><span>
</span><span id="line-1222"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;currentKESPeriod&quot;</span></span><span>
</span><span id="line-1223"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-1224"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665960"><span class="hs-identifier hs-var">currentKesPeriod</span></a></span><span>
</span><span id="line-1225"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remainingKESPeriods&quot;</span></span><span>
</span><span id="line-1226"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-1227"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665958"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span>
</span><span id="line-1228"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-1229"></span><span>
</span><span id="line-1230"></span><span>        </span><span id="local-6989586621679665955"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665955"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-1231"></span><span>        </span><span class="annot"><span class="annottext">(LOContent a -&gt; IO ()) -&gt; [LOContent a] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679665961"><span class="hs-identifier hs-var">metricsTr</span></a></span><span> </span><span class="annot"><span class="annottext">((LOMeta, LOContent a) -&gt; IO ())
-&gt; (LOContent a -&gt; (LOMeta, LOContent a)) -&gt; LOContent a -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665955"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LOContent a]
</span><a href="#local-6989586621679665956"><span class="hs-identifier hs-var">logValues</span></a></span><span>
</span><span id="line-1232"></span><span>
</span><span id="line-1233"></span><span>        </span><span class="hs-comment">-- Trace warning messages on the last 7 KES periods and, in the</span><span>
</span><span id="line-1234"></span><span>        </span><span class="hs-comment">-- final and subsequent KES periods, trace alert messages.</span><span>
</span><span id="line-1235"></span><span>        </span><span id="local-6989586621679665954"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665954"><span class="hs-identifier hs-var">metaWarning</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Warning</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-1236"></span><span>        </span><span id="local-6989586621679665952"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665952"><span class="hs-identifier hs-var">metaAlert</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Alert</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-1237"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665958"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">7</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1238"></span><span>          </span><span class="annot"><span class="annottext">Trace IO a -&gt; (Text, LogObject a) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679665971"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1239"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Text
forall a. Monoid a =&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1240"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; LOMeta -&gt; LOContent a -&gt; LogObject a
forall a. Text -&gt; LOMeta -&gt; LOContent a -&gt; LogObject a
</span><span class="hs-identifier hs-var">LogObject</span></span><span>
</span><span id="line-1241"></span><span>                </span><span class="annot"><span class="annottext">Text
forall a. Monoid a =&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1242"></span><span>                </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665958"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665952"><span class="hs-identifier hs-var">metaAlert</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665954"><span class="hs-identifier hs-var">metaWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1243"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; LOContent a
forall a. Object -&gt; Text -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogStructuredText</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Text
</span><a href="#local-6989586621679665947"><span class="hs-identifier hs-var">expiryLogMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665958"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1244"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1245"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1246"></span><span>    </span><span class="annot"><a href="#local-6989586621679665947"><span class="hs-identifier hs-type">expiryLogMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1247"></span><span>    </span><span id="local-6989586621679665947"><span class="annot"><span class="annottext">expiryLogMessage :: Word -&gt; Text
</span><a href="#local-6989586621679665947"><span class="hs-identifier hs-var hs-var">expiryLogMessage</span></a></span></span><span> </span><span id="local-6989586621679665946"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665946"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1248"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Operational key will expire in &quot;</span></span><span>
</span><span id="line-1249"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (Word -&gt; String) -&gt; Word -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679665946"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span>
</span><span id="line-1250"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; KES periods.&quot;</span></span><span>
</span><span id="line-1251"></span><span>
</span><span id="line-1252"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-type">forgeStateInfoTracer</span></a></span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667009"><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1254"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1255"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1256"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1257"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1258"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-1259"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1260"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1261"></span><span id="forgeStateInfoTracer"><span class="annot"><span class="annottext">forgeStateInfoTracer :: Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-var hs-var">forgeStateInfoTracer</span></a></span></span><span> </span><span id="local-6989586621679665945"><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679665945"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679665944"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665944"><span class="hs-identifier hs-var">_ts</span></a></span></span><span> </span><span id="local-6989586621679665943"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665943"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; (TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665942"><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679665942"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1262"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665941"><span class="annot"><span class="annottext">tr :: Trace IO Text
</span><a href="#local-6989586621679665941"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665943"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a blk.
HasKESMetricsData blk =&gt;
Proxy blk
-&gt; Trace IO a -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-var">forgeStateInfoMetricsTraceTransformer</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679665945"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665943"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679665942"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1264"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="#local-6989586621679665940"><span class="hs-identifier hs-var">fsTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665941"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679665942"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1265"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1266"></span><span>    </span><span class="annot"><a href="#local-6989586621679665940"><span class="hs-identifier hs-type">fsTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679667009"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>    </span><span id="local-6989586621679665940"><span class="annot"><span class="annottext">fsTracer :: Trace IO Text -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="#local-6989586621679665940"><span class="hs-identifier hs-var hs-var">fsTracer</span></a></span></span><span> </span><span id="local-6989586621679665939"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665939"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO String
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a (m :: * -&gt; *). Show a =&gt; Tracer m String -&gt; Tracer m a
</span><span class="hs-identifier hs-var">showTracing</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO String
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; Tracer IO String
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Tracer IO Text -&gt; Tracer IO String
forall (f :: * -&gt; *) a b. Contravariant f =&gt; (a -&gt; b) -&gt; f b -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO Text -&gt; Tracer IO String)
-&gt; Tracer IO Text -&gt; Tracer IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665939"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1270"></span><span class="hs-comment">-- NodeToClient Tracers</span><span>
</span><span id="line-1271"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1272"></span><span>
</span><span id="line-1273"></span><span id="local-6989586621679667216"><span id="local-6989586621679667217"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-type">nodeToClientTracers'</span></a></span><span>
</span><span id="line-1274"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="annot"><a href="#local-6989586621679667217"><span class="hs-identifier hs-type">localPeer</span></a></span><span>
</span><span id="line-1275"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowQuery</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockQuery</span></span><span> </span><span class="annot"><a href="#local-6989586621679667216"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1276"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1277"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-1278"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1279"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToClient.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679667217"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667216"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1281"></span><span id="nodeToClientTracers%27"><span class="annot"><span class="annottext">nodeToClientTracers' :: TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' localPeer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-var hs-var">nodeToClientTracers'</span></a></span></span><span> </span><span id="local-6989586621679665936"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665936"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679665935"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665935"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679665934"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665934"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1282"></span><span>  </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToClient.Tracers</span></span><span>
</span><span id="line-1283"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1284"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceLocalChainSyncProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceLocalChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665936"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1285"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665935"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalChainSyncProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665934"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1286"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxMonitorTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
</span><span class="hs-identifier hs-var">NodeToClient.tTxMonitorTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1287"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceLocalTxMonitorProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalTxMonitorProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalTxMonitorProtocol"><span class="hs-identifier hs-var hs-var">traceLocalTxMonitorProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665936"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665935"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalTxMonitorProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665934"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1289"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1290"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceLocalTxSubmissionProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalTxSubmissionProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalTxSubmissionProtocol"><span class="hs-identifier hs-var hs-var">traceLocalTxSubmissionProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665936"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1291"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665935"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalTxSubmissionProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665934"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1292"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tStateQueryTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tStateQueryTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1293"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceLocalStateQueryProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalStateQueryProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalStateQueryProtocol"><span class="hs-identifier hs-var hs-var">traceLocalStateQueryProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665936"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665935"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalStateQueryProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665934"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1296"></span><span>
</span><span id="line-1297"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1298"></span><span class="hs-comment">-- NodeToNode Tracers</span><span>
</span><span id="line-1299"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span id="local-6989586621679667209"><span id="local-6989586621679667212"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-type">nodeToNodeTracers'</span></a></span><span>
</span><span id="line-1302"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679667212"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1303"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Queries.html#ConvertTxId"><span class="hs-identifier hs-type">ConvertTxId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667212"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1304"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasTxs</span></span><span> </span><span class="annot"><a href="#local-6989586621679667212"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1305"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667209"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1306"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="annot"><a href="#local-6989586621679667209"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1307"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-1309"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1310"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1311"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToNode.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679667209"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667212"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1312"></span><span id="nodeToNodeTracers%27"><span class="annot"><span class="annottext">nodeToNodeTracers' :: TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' peer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-var hs-var">nodeToNodeTracers'</span></a></span></span><span> </span><span id="local-6989586621679665929"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679665928"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665928"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679665927"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1313"></span><span>  </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch blk (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToNode.Tracers</span></span><span>
</span><span id="line-1314"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1315"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceChainSyncProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer
        (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665928"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1317"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tChainSyncSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1318"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceChainSyncProtocol
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
(Show a, HasSeverityAnnotation a) =&gt;
OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1319"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncProtocolSerialised&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1320"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchTracer :: Tracer
  IO
  (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1321"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchProtocol
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchProtocol"><span class="hs-identifier hs-var hs-var">traceBlockFetchProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1322"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665928"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1324"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchProtocolSerialised
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
forall a (b :: Symbol).
(Show a, HasSeverityAnnotation a) =&gt;
OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchProtocolSerialised
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchProtocolSerialised"><span class="hs-identifier hs-var hs-var">traceBlockFetchProtocolSerialised</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchProtocolSerialised&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmission2Tracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmission2Tracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1327"></span><span>      </span><span class="annot"><span class="annottext">OnOff TraceTxSubmissionProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxSubmissionProtocol
</span><a href="Cardano.Tracing.Config.html#traceTxSubmissionProtocol"><span class="hs-identifier hs-var hs-var">traceTxSubmissionProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679665929"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1328"></span><span>                  </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665928"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxSubmissionProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665927"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1329"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1330"></span><span>
</span><span id="line-1331"></span><span id="local-6989586621679667018"><span id="local-6989586621679667019"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-type">teeTraceBlockFetchDecision</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667019"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1333"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="annot"><a href="#local-6989586621679667018"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1334"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667019"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1335"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="annot"><a href="#local-6989586621679667019"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1336"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-1337"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1338"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679667019"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667018"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1340"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679667019"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667018"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1341"></span><span id="teeTraceBlockFetchDecision"><span class="annot"><span class="annottext">teeTraceBlockFetchDecision :: TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecision</span></a></span></span><span> </span><span id="local-6989586621679665921"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665921"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679665920"><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679665920"><span class="hs-identifier hs-var">eliding</span></a></span></span><span> </span><span id="local-6989586621679665919"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665919"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1342"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity
   [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity
    [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
  -&gt; IO ())
 -&gt; Tracer
      IO
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]))
-&gt; (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
    -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665918"><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679665918"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1343"></span><span>    </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-var">teeTraceBlockFetchDecision'</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665916"><span class="hs-identifier hs-var">meTr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679665918"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1344"></span><span>    </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
(Eq peer, HasHeader blk, Show peer, ToObject peer) =&gt;
TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-var">teeTraceBlockFetchDecisionElide</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665921"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679665920"><span class="hs-identifier hs-var">eliding</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665914"><span class="hs-identifier hs-var">bfdTr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679665918"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1345"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1346"></span><span>   </span><span id="local-6989586621679665916"><span class="annot"><span class="annottext">meTr :: Trace IO Text
</span><a href="#local-6989586621679665916"><span class="hs-identifier hs-var hs-var">meTr</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665919"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1347"></span><span>   </span><span id="local-6989586621679665914"><span class="annot"><span class="annottext">bfdTr :: Trace IO Text
</span><a href="#local-6989586621679665914"><span class="hs-identifier hs-var hs-var">bfdTr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchDecision&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665919"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1348"></span><span>
</span><span id="line-1349"></span><span id="local-6989586621679666832"><span id="local-6989586621679666833"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-type">teeTraceBlockFetchDecision'</span></a></span><span>
</span><span id="line-1350"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1351"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679666833"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679666832"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1352"></span><span id="teeTraceBlockFetchDecision%27"><span class="annot"><span class="annottext">teeTraceBlockFetchDecision' :: Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecision'</span></a></span></span><span> </span><span id="local-6989586621679665913"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665913"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1353"></span><span>    </span><span class="annot"><span class="annottext">(WithSeverity
   [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity
    [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
  -&gt; IO ())
 -&gt; Tracer
      IO
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]))
-&gt; (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
    -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679665912"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679665912"><span class="hs-identifier hs-var">peers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1354"></span><span>      </span><span id="local-6989586621679665911"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665911"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Info</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-1355"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665913"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665911"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;connectedPeers&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text)
-&gt; (Integer -&gt; Measurable) -&gt; Integer -&gt; LOContent Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; LOContent Text) -&gt; Integer -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Integer) -&gt; Int -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679665912"><span class="hs-identifier hs-var">peers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span id="local-6989586621679665908"><span id="local-6989586621679665909"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-type">teeTraceBlockFetchDecisionElide</span></a></span><span>
</span><span id="line-1358"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665909"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1359"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="annot"><a href="#local-6989586621679665908"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1360"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665909"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1361"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="annot"><a href="#local-6989586621679665909"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-1362"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-1363"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1364"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679665909"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679665908"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1365"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1366"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679665909"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679665908"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1367"></span><span id="teeTraceBlockFetchDecisionElide"><span class="annot"><span class="annottext">teeTraceBlockFetchDecisionElide :: TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecisionElide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a t.
(ElidingTracer a, ToObject t, Transformable t IO a) =&gt;
TracingVerbosity
-&gt; MVar (Maybe a, Integer) -&gt; Trace IO t -&gt; Tracer IO a
</span><span class="hs-identifier hs-var">elideToLogObject</span></span><span>
</span><span id="line-1368"></span><span>
</span><span id="line-1369"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1370"></span><span class="hs-comment">-- PeerSelection Tracers</span><span>
</span><span id="line-1371"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1372"></span><span>
</span><span id="line-1373"></span><span id="local-6989586621679667159"><span id="local-6989586621679667160"><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceConnectionManagerTraceMetrics"><span class="hs-identifier hs-type">traceConnectionManagerTraceMetrics</span></a></span><span>
</span><span id="line-1374"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceConnectionManagerCounters"><span class="hs-identifier hs-type">TraceConnectionManagerCounters</span></a></span><span>
</span><span id="line-1375"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-1376"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConnectionManagerTrace</span></span><span> </span><span class="annot"><a href="#local-6989586621679667160"><span class="hs-identifier hs-type">peerAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667159"><span class="hs-identifier hs-type">handlerTrace</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1377"></span><span id="traceConnectionManagerTraceMetrics"><span class="annot"><span class="annottext">traceConnectionManagerTraceMetrics :: OnOff TraceConnectionManagerCounters
-&gt; Maybe EKGDirect
-&gt; Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
</span><a href="Cardano.Tracing.Tracers.html#traceConnectionManagerTraceMetrics"><span class="hs-identifier hs-var hs-var">traceConnectionManagerTraceMetrics</span></a></span></span><span> </span><span class="annot"><span class="annottext">OnOff TraceConnectionManagerCounters
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1378"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceConnectionManagerTraceMetrics"><span class="hs-identifier hs-var">traceConnectionManagerTraceMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1379"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceConnectionManagerTraceMetrics"><span class="hs-identifier hs-var">traceConnectionManagerTraceMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679665906"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
forall peerAddr handlerTrace.
Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
</span><a href="#local-6989586621679665905"><span class="hs-identifier hs-var">cmtTracer</span></a></span><span>
</span><span id="line-1380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1381"></span><span>    </span><span id="local-6989586621679666824"><span id="local-6989586621679666825"><span class="annot"><a href="#local-6989586621679665905"><span class="hs-identifier hs-type">cmtTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConnectionManagerTrace</span></span><span> </span><span class="annot"><a href="#local-6989586621679666825"><span class="hs-identifier hs-type">peerAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666824"><span class="hs-identifier hs-type">handlerTrace</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1382"></span><span>    </span><span id="local-6989586621679665905"><span class="annot"><span class="annottext">cmtTracer :: Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
</span><a href="#local-6989586621679665905"><span class="hs-identifier hs-var hs-var">cmtTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConnectionManagerTrace peerAddr handlerTrace -&gt; IO ())
-&gt; Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((ConnectionManagerTrace peerAddr handlerTrace -&gt; IO ())
 -&gt; Tracer IO (ConnectionManagerTrace peerAddr handlerTrace))
-&gt; (ConnectionManagerTrace peerAddr handlerTrace -&gt; IO ())
-&gt; Tracer IO (ConnectionManagerTrace peerAddr handlerTrace)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1383"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TrConnectionManagerCounters</span></span><span>
</span><span id="line-1384"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConnectionManagerCounters</span></span><span>
</span><span id="line-1385"></span><span>                  </span><span id="local-6989586621679665902"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665902"><span class="hs-identifier hs-var">prunableConns</span></a></span></span><span>
</span><span id="line-1386"></span><span>                  </span><span id="local-6989586621679665901"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665901"><span class="hs-identifier hs-var">duplexConns</span></a></span></span><span>
</span><span id="line-1387"></span><span>                  </span><span id="local-6989586621679665900"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665900"><span class="hs-identifier hs-var">unidirectionalConns</span></a></span></span><span>
</span><span id="line-1388"></span><span>                  </span><span id="local-6989586621679665899"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665899"><span class="hs-identifier hs-var">incomingConns</span></a></span></span><span>
</span><span id="line-1389"></span><span>                  </span><span id="local-6989586621679665898"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665898"><span class="hs-identifier hs-var">outgoingConns</span></a></span></span><span>
</span><span id="line-1390"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1391"></span><span>              </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1392"></span><span>        </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-1393"></span><span>                         </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.connectionManager.prunableConns&quot;</span></span><span>
</span><span id="line-1394"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665902"><span class="hs-identifier hs-var">prunableConns</span></a></span><span>
</span><span id="line-1395"></span><span>        </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-1396"></span><span>                         </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.connectionManager.duplexConns&quot;</span></span><span>
</span><span id="line-1397"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665901"><span class="hs-identifier hs-var">duplexConns</span></a></span><span>
</span><span id="line-1398"></span><span>        </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-1399"></span><span>                         </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.connectionManager.unidirectionalConns&quot;</span></span><span>
</span><span id="line-1400"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665900"><span class="hs-identifier hs-var">unidirectionalConns</span></a></span><span>
</span><span id="line-1401"></span><span>        </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-1402"></span><span>                         </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.connectionManager.incomingConns&quot;</span></span><span>
</span><span id="line-1403"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665899"><span class="hs-identifier hs-var">incomingConns</span></a></span><span>
</span><span id="line-1404"></span><span>        </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665906"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span>
</span><span id="line-1405"></span><span>                         </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.connectionManager.outgoingConns&quot;</span></span><span>
</span><span id="line-1406"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665898"><span class="hs-identifier hs-var">outgoingConns</span></a></span><span>
</span><span id="line-1407"></span><span>      </span><span class="annot"><span class="annottext">ConnectionManagerTrace peerAddr handlerTrace
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span>
</span><span id="line-1410"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracePeerSelectionCountersMetrics"><span class="hs-identifier hs-type">tracePeerSelectionCountersMetrics</span></a></span><span>
</span><span id="line-1411"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TracePeerSelectionCounters"><span class="hs-identifier hs-type">TracePeerSelectionCounters</span></a></span><span>
</span><span id="line-1412"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-1413"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PeerSelectionCounters</span></span><span>
</span><span id="line-1414"></span><span id="tracePeerSelectionCountersMetrics"><span class="annot"><span class="annottext">tracePeerSelectionCountersMetrics :: OnOff TracePeerSelectionCounters
-&gt; Maybe EKGDirect -&gt; Tracer IO PeerSelectionCounters
</span><a href="Cardano.Tracing.Tracers.html#tracePeerSelectionCountersMetrics"><span class="hs-identifier hs-var hs-var">tracePeerSelectionCountersMetrics</span></a></span></span><span> </span><span class="annot"><span class="annottext">OnOff TracePeerSelectionCounters
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO PeerSelectionCounters
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1415"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracePeerSelectionCountersMetrics"><span class="hs-identifier hs-var">tracePeerSelectionCountersMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO PeerSelectionCounters
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1416"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracePeerSelectionCountersMetrics"><span class="hs-identifier hs-var">tracePeerSelectionCountersMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679665897"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665897"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO PeerSelectionCounters
</span><a href="#local-6989586621679665896"><span class="hs-identifier hs-var">pscTracer</span></a></span><span>
</span><span id="line-1417"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1418"></span><span>    </span><span class="annot"><a href="#local-6989586621679665896"><span class="hs-identifier hs-type">pscTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PeerSelectionCounters</span></span><span>
</span><span id="line-1419"></span><span>    </span><span id="local-6989586621679665896"><span class="annot"><span class="annottext">pscTracer :: Tracer IO PeerSelectionCounters
</span><a href="#local-6989586621679665896"><span class="hs-identifier hs-var hs-var">pscTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PeerSelectionCounters -&gt; IO ()) -&gt; Tracer IO PeerSelectionCounters
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((PeerSelectionCounters -&gt; IO ())
 -&gt; Tracer IO PeerSelectionCounters)
-&gt; (PeerSelectionCounters -&gt; IO ())
-&gt; Tracer IO PeerSelectionCounters
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PeerSelectionCounters</span></span><span> </span><span id="local-6989586621679665894"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665894"><span class="hs-identifier hs-var">cold</span></a></span></span><span> </span><span id="local-6989586621679665893"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665893"><span class="hs-identifier hs-var">warm</span></a></span></span><span> </span><span id="local-6989586621679665892"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665892"><span class="hs-identifier hs-var">hot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1420"></span><span>      </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665897"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.peerSelection.cold&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665894"><span class="hs-identifier hs-var">cold</span></a></span><span>
</span><span id="line-1421"></span><span>      </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665897"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.peerSelection.warm&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665893"><span class="hs-identifier hs-var">warm</span></a></span><span>
</span><span id="line-1422"></span><span>      </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665897"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.peerSelection.hot&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665892"><span class="hs-identifier hs-var">hot</span></a></span><span>
</span><span id="line-1423"></span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceInboundGovernorCountersMetrics"><span class="hs-identifier hs-type">traceInboundGovernorCountersMetrics</span></a></span><span>
</span><span id="line-1426"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667154"><span class="annot"><a href="#local-6989586621679667154"><span class="hs-identifier hs-type">addr</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1427"></span><span>       </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceInboundGovernorCounters"><span class="hs-identifier hs-type">TraceInboundGovernorCounters</span></a></span><span>
</span><span id="line-1428"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-1429"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InboundGovernorTrace</span></span><span> </span><span class="annot"><a href="#local-6989586621679667154"><span class="hs-identifier hs-type">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1430"></span><span id="traceInboundGovernorCountersMetrics"><span class="annot"><span class="annottext">traceInboundGovernorCountersMetrics :: OnOff TraceInboundGovernorCounters
-&gt; Maybe EKGDirect -&gt; Tracer IO (InboundGovernorTrace addr)
</span><a href="Cardano.Tracing.Tracers.html#traceInboundGovernorCountersMetrics"><span class="hs-identifier hs-var hs-var">traceInboundGovernorCountersMetrics</span></a></span></span><span> </span><span class="annot"><span class="annottext">OnOff TraceInboundGovernorCounters
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (InboundGovernorTrace addr)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1431"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceInboundGovernorCountersMetrics"><span class="hs-identifier hs-var">traceInboundGovernorCountersMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (InboundGovernorTrace addr)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1432"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceInboundGovernorCountersMetrics"><span class="hs-identifier hs-var">traceInboundGovernorCountersMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679665891"><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665891"><span class="hs-identifier hs-var">ekgDirect</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (InboundGovernorTrace addr)
</span><a href="#local-6989586621679665890"><span class="hs-identifier hs-var">ipgcTracer</span></a></span><span>
</span><span id="line-1433"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1434"></span><span>    </span><span class="annot"><a href="#local-6989586621679665890"><span class="hs-identifier hs-type">ipgcTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InboundGovernorTrace</span></span><span> </span><span class="annot"><a href="#local-6989586621679667154"><span class="hs-identifier hs-type">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>    </span><span id="local-6989586621679665890"><span class="annot"><span class="annottext">ipgcTracer :: Tracer IO (InboundGovernorTrace addr)
</span><a href="#local-6989586621679665890"><span class="hs-identifier hs-var hs-var">ipgcTracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InboundGovernorTrace addr -&gt; IO ())
-&gt; Tracer IO (InboundGovernorTrace addr)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((InboundGovernorTrace addr -&gt; IO ())
 -&gt; Tracer IO (InboundGovernorTrace addr))
-&gt; (InboundGovernorTrace addr -&gt; IO ())
-&gt; Tracer IO (InboundGovernorTrace addr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1436"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TrInboundGovernorCounters</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">InboundGovernorCounters</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1437"></span><span>          </span><span id="local-6989586621679665887"><span class="annot"><span class="annottext">Int
idlePeersRemote :: InboundGovernorCounters -&gt; Int
idlePeersRemote :: Int
</span><span class="hs-identifier hs-var hs-var">idlePeersRemote</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-1438"></span><span>          </span><span id="local-6989586621679665885"><span class="annot"><span class="annottext">Int
coldPeersRemote :: InboundGovernorCounters -&gt; Int
coldPeersRemote :: Int
</span><span class="hs-identifier hs-var hs-var">coldPeersRemote</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-1439"></span><span>          </span><span id="local-6989586621679665883"><span class="annot"><span class="annottext">Int
warmPeersRemote :: InboundGovernorCounters -&gt; Int
warmPeersRemote :: Int
</span><span class="hs-identifier hs-var hs-var">warmPeersRemote</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-1440"></span><span>          </span><span id="local-6989586621679665881"><span class="annot"><span class="annottext">Int
hotPeersRemote :: InboundGovernorCounters -&gt; Int
hotPeersRemote :: Int
</span><span class="hs-identifier hs-var hs-var">hotPeersRemote</span></span></span><span>
</span><span id="line-1441"></span><span>        </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1442"></span><span>          </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665891"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.inboundGovernor.idle&quot;</span></span><span>
</span><span id="line-1443"></span><span>                                     </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665887"><span class="hs-identifier hs-var">idlePeersRemote</span></a></span><span>
</span><span id="line-1444"></span><span>          </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665891"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.inboundGovernor.cold&quot;</span></span><span>
</span><span id="line-1445"></span><span>                                     </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665885"><span class="hs-identifier hs-var">coldPeersRemote</span></a></span><span>
</span><span id="line-1446"></span><span>          </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665891"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.inboundGovernor.warm&quot;</span></span><span>
</span><span id="line-1447"></span><span>                                     </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665883"><span class="hs-identifier hs-var">warmPeersRemote</span></a></span><span>
</span><span id="line-1448"></span><span>          </span><span class="annot"><span class="annottext">EKGDirect -&gt; Text -&gt; Int -&gt; IO ()
forall a. Integral a =&gt; EKGDirect -&gt; Text -&gt; a -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#sendEKGDirectInt"><span class="hs-identifier hs-var">sendEKGDirectInt</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect
</span><a href="#local-6989586621679665891"><span class="hs-identifier hs-var">ekgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics.inboundGovernor.hot&quot;</span></span><span>
</span><span id="line-1449"></span><span>                                     </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665881"><span class="hs-identifier hs-var">hotPeersRemote</span></a></span><span>
</span><span id="line-1450"></span><span>      </span><span class="annot"><span class="annottext">InboundGovernorTrace addr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1451"></span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span class="hs-comment">-- | get information about a chain fragment</span><span>
</span><span id="line-1454"></span><span>
</span><span id="line-1455"></span><span class="hs-keyword">data</span><span> </span><span id="ChainInformation"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-var">ChainInformation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ChainInformation"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-var">ChainInformation</span></a></span></span><span>
</span><span id="line-1456"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="slots"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="blocks"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var hs-var">blocks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-1458"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="density"><span class="annot"><span class="annottext">ChainInformation -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var hs-var">density</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-1459"></span><span>    </span><span class="hs-comment">-- ^ the actual number of blocks created over the maximum expected number</span><span>
</span><span id="line-1460"></span><span>    </span><span class="hs-comment">-- of blocks that could be created over the span of the last @k@ blocks.</span><span>
</span><span id="line-1461"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="epoch"><span class="annot"><span class="annottext">ChainInformation -&gt; EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var hs-var">epoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span>
</span><span id="line-1462"></span><span>    </span><span class="hs-comment">-- ^ In which epoch is the tip of the current chain</span><span>
</span><span id="line-1463"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="slotInEpoch"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var hs-var">slotInEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-1464"></span><span>    </span><span class="hs-comment">-- ^ Relative slot number of the tip of the current chain within the</span><span>
</span><span id="line-1465"></span><span>    </span><span class="hs-comment">-- epoch.</span><span>
</span><span id="line-1466"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="blocksUncoupledDelta"><span class="annot"><span class="annottext">ChainInformation -&gt; Int64
</span><a href="Cardano.Tracing.Tracers.html#blocksUncoupledDelta"><span class="hs-identifier hs-var hs-var">blocksUncoupledDelta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-1467"></span><span>    </span><span class="hs-comment">-- ^ The net change in number of blocks forged since last restart not on the</span><span>
</span><span id="line-1468"></span><span>    </span><span class="hs-comment">-- current chain.</span><span>
</span><span id="line-1469"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fork"><span class="annot"><span class="annottext">ChainInformation -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#fork"><span class="hs-identifier hs-var hs-var">fork</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1470"></span><span>    </span><span class="hs-comment">-- ^ Was this a fork.</span><span>
</span><span id="line-1471"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-type">chainInformation</span></a></span><span>
</span><span id="line-1474"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679667078"><span class="annot"><a href="#local-6989586621679667078"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667078"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.NewTipInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679667078"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-1476"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1477"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AF.AnchoredFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679667078"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-1479"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-1480"></span><span id="chainInformation"><span class="annot"><span class="annottext">chainInformation :: NewTipInfo blk
-&gt; Bool
-&gt; AnchoredFragment (Header blk)
-&gt; Int64
-&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var hs-var">chainInformation</span></a></span></span><span> </span><span id="local-6989586621679665878"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679665878"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span id="local-6989586621679665877"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679665877"><span class="hs-identifier hs-var">fork</span></a></span></span><span> </span><span id="local-6989586621679665876"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665876"><span class="hs-identifier hs-var">frag</span></a></span></span><span> </span><span id="local-6989586621679665875"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679665875"><span class="hs-identifier hs-var">blocksUncoupledDelta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ChainInformation :: Word64
-&gt; Word64
-&gt; Rational
-&gt; EpochNo
-&gt; Word64
-&gt; Int64
-&gt; Bool
-&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-1481"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">slots :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var">slots</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; Word64) -&gt; SlotNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.headSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665876"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blocks :: Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var">blocks</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64) -&gt; BlockNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; WithOrigin BlockNo -&gt; BlockNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; BlockNo
</span><span class="hs-identifier hs-var">BlockNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin BlockNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin BlockNo
</span><span class="hs-identifier hs-var">AF.headBlockNo</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665876"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1483"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">density :: Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var">density</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; Rational
forall blk.
HasHeader (Header blk) =&gt;
AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var">fragmentChainDensity</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665876"><span class="hs-identifier hs-var">frag</span></a></span><span>
</span><span id="line-1484"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">epoch :: EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; EpochNo
forall blk. NewTipInfo blk -&gt; EpochNo
</span><span class="hs-identifier hs-var hs-var">ChainDB.newTipEpoch</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679665878"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span>
</span><span id="line-1485"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">slotInEpoch :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var">slotInEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; Word64
forall blk. NewTipInfo blk -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">ChainDB.newTipSlotInEpoch</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679665878"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span>
</span><span id="line-1486"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blocksUncoupledDelta :: Int64
</span><a href="Cardano.Tracing.Tracers.html#blocksUncoupledDelta"><span class="hs-identifier hs-var">blocksUncoupledDelta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679665875"><span class="hs-identifier hs-var">blocksUncoupledDelta</span></a></span><span>
</span><span id="line-1487"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fork :: Bool
</span><a href="Cardano.Tracing.Tracers.html#fork"><span class="hs-identifier hs-var">fork</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679665877"><span class="hs-identifier hs-var">fork</span></a></span><span>
</span><span id="line-1488"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1489"></span><span>
</span><span id="line-1490"></span><span id="local-6989586621679666924"><span class="annot"><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-type">fragmentChainDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1491"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679666924"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1492"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AF.AnchoredFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679666924"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Rational</span></a></span></span><span>
</span><span id="line-1493"></span><span id="fragmentChainDensity"><span class="annot"><span class="annottext">fragmentChainDensity :: AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var hs-var">fragmentChainDensity</span></a></span></span><span> </span><span id="local-6989586621679665869"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665869"><span class="hs-identifier hs-var">frag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Rational
</span><a href="#local-6989586621679665868"><span class="hs-identifier hs-var">calcDensity</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665867"><span class="hs-identifier hs-var">blockD</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665866"><span class="hs-identifier hs-var">slotD</span></a></span><span>
</span><span id="line-1494"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1495"></span><span>    </span><span class="annot"><a href="#local-6989586621679665868"><span class="hs-identifier hs-type">calcDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-1496"></span><span>    </span><span id="local-6989586621679665868"><span class="annot"><span class="annottext">calcDensity :: Word64 -&gt; Word64 -&gt; Rational
</span><a href="#local-6989586621679665868"><span class="hs-identifier hs-var hs-var">calcDensity</span></a></span></span><span> </span><span id="local-6989586621679665865"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665865"><span class="hs-identifier hs-var">bl</span></a></span></span><span> </span><span id="local-6989586621679665864"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665864"><span class="hs-identifier hs-var">sl</span></a></span></span><span>
</span><span id="line-1497"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665864"><span class="hs-identifier hs-var">sl</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toRational</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665865"><span class="hs-identifier hs-var">bl</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Rational -&gt; Rational
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toRational</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665864"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-1498"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1499"></span><span>    </span><span id="local-6989586621679665863"><span class="annot"><span class="annottext">slotN :: Word64
</span><a href="#local-6989586621679665863"><span class="hs-identifier hs-var hs-var">slotN</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; Word64) -&gt; SlotNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.headSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665869"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1500"></span><span>    </span><span class="hs-comment">-- Slot of the tip - slot @k@ blocks back. Use 0 as the slot for genesis</span><span>
</span><span id="line-1501"></span><span>    </span><span class="hs-comment">-- includes EBBs</span><span>
</span><span id="line-1502"></span><span>    </span><span id="local-6989586621679665866"><span class="annot"><span class="annottext">slotD :: Word64
</span><a href="#local-6989586621679665866"><span class="hs-identifier hs-var hs-var">slotD</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665863"><span class="hs-identifier hs-var">slotN</span></a></span><span>
</span><span id="line-1503"></span><span>            </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.lastSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665869"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>    </span><span class="hs-comment">-- Block numbers start at 1. We ignore the genesis EBB, which has block number 0.</span><span>
</span><span id="line-1505"></span><span>    </span><span id="local-6989586621679665867"><span class="annot"><span class="annottext">blockD :: Word64
</span><a href="#local-6989586621679665867"><span class="hs-identifier hs-var hs-var">blockD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665861"><span class="hs-identifier hs-var">blockN</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665860"><span class="hs-identifier hs-var">firstBlock</span></a></span><span>
</span><span id="line-1506"></span><span>    </span><span id="local-6989586621679665861"><span class="annot"><span class="annottext">blockN :: Word64
</span><a href="#local-6989586621679665861"><span class="hs-identifier hs-var hs-var">blockN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64) -&gt; BlockNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; WithOrigin BlockNo -&gt; BlockNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; BlockNo
</span><span class="hs-identifier hs-var">BlockNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin BlockNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin BlockNo
</span><span class="hs-identifier hs-var">AF.headBlockNo</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665869"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>    </span><span id="local-6989586621679665860"><span class="annot"><span class="annottext">firstBlock :: Word64
</span><a href="#local-6989586621679665860"><span class="hs-identifier hs-var hs-var">firstBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64)
-&gt; (Header blk -&gt; BlockNo) -&gt; Header blk -&gt; Word64
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Header blk -&gt; BlockNo
forall b. HasHeader b =&gt; b -&gt; BlockNo
</span><span class="hs-identifier hs-var">blockNo</span></span><span> </span><span class="annot"><span class="annottext">(Header blk -&gt; Word64)
-&gt; Either (Anchor (Header blk)) (Header blk)
-&gt; Either (Anchor (Header blk)) Word64
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
-&gt; Either (Anchor (Header blk)) (Header blk)
forall v a b. Anchorable v a b =&gt; AnchoredSeq v a b -&gt; Either a b
</span><span class="hs-identifier hs-var">AF.last</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679665869"><span class="hs-identifier hs-var">frag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1508"></span><span>      </span><span class="hs-comment">-- Empty fragment, no blocks. We have that @blocks = 1 - 1 = 0@</span><span>
</span><span id="line-1509"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor (Header blk)
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1510"></span><span>      </span><span class="hs-comment">-- The oldest block is the genesis EBB with block number 0,</span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-comment">-- don't let it contribute to the number of blocks</span><span>
</span><span id="line-1512"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1513"></span><span>      </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679665858"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665858"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679665858"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1514"></span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1517"></span><span class="hs-comment">-- Trace Helpers</span><span>
</span><span id="line-1518"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1519"></span><span>
</span><span id="line-1520"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-type">readableTraceBlockchainTimeEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceBlockchainTimeEvent</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">UTCTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1521"></span><span id="readableTraceBlockchainTimeEvent"><span class="annot"><span class="annottext">readableTraceBlockchainTimeEvent :: TraceBlockchainTimeEvent UTCTime -&gt; Text
</span><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-var hs-var">readableTraceBlockchainTimeEvent</span></a></span></span><span> </span><span id="local-6989586621679665857"><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679665857"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679665857"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1522"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceStartTimeInTheFuture</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SystemStart</span></span><span> </span><span id="local-6989586621679665854"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665854"><span class="hs-identifier hs-var">start</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665853"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679665853"><span class="hs-identifier hs-var">toWait</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1523"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Waiting &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text)
-&gt; (NominalDiffTime -&gt; String) -&gt; NominalDiffTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679665853"><span class="hs-identifier hs-var">toWait</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; until genesis start time at &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665854"><span class="hs-identifier hs-var">start</span></a></span><span>
</span><span id="line-1524"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceCurrentSlotUnknown</span></span><span> </span><span id="local-6989586621679665851"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665851"><span class="hs-identifier hs-var">time</span></a></span></span><span> </span><span class="annot"><span class="annottext">PastHorizonException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1525"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Too far from the chain tip to determine the current slot number for the time &quot;</span></span><span>
</span><span id="line-1526"></span><span>       </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665851"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-1527"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceSystemClockMovedBack</span></span><span> </span><span id="local-6989586621679665849"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665849"><span class="hs-identifier hs-var">prevTime</span></a></span></span><span> </span><span id="local-6989586621679665848"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665848"><span class="hs-identifier hs-var">newTime</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1528"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;The system wall clock time moved backwards, but within our tolerance &quot;</span></span><span>
</span><span id="line-1529"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;threshold. Previous 'current' time: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665849"><span class="hs-identifier hs-var">prevTime</span></a></span><span>
</span><span id="line-1530"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;. New 'current' time: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665848"><span class="hs-identifier hs-var">newTime</span></a></span><span>
</span><span id="line-1531"></span><span>
</span><span id="line-1532"></span><span id="local-6989586621679667169"><span id="local-6989586621679667170"><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-type">tracerOnOff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Transformable</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667170"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1533"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667169"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1534"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1535"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span>
</span><span id="line-1536"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-1537"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667170"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1538"></span><span id="tracerOnOff"><span class="annot"><span class="annottext">tracerOnOff :: OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var hs-var">tracerOnOff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1539"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665847"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665847"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679665846"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665846"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679665845"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665845"><span class="hs-identifier hs-var">trcer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-1540"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity a) -&gt; Tracer IO a)
-&gt; Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity -&gt; Trace IO Text -&gt; Tracer IO (WithSeverity a)
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679665847"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-1541"></span><span>                                        </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (WithSeverity a))
-&gt; Trace IO Text -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665846"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665845"><span class="hs-identifier hs-var">trcer</span></a></span><span>
</span><span id="line-1542"></span><span>
</span><span id="line-1543"></span><span id="local-6989586621679667227"><span id="local-6989586621679667228"><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-type">tracerOnOff'</span></a></span><span>
</span><span id="line-1544"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667228"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667227"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679667227"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1545"></span><span id="tracerOnOff%27"><span class="annot"><span class="annottext">tracerOnOff' :: OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var hs-var">tracerOnOff'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1546"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665844"><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679665844"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679665844"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1547"></span><span>
</span><span id="line-1548"></span><span id="local-6989586621679665843"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679665838"><span id="local-6989586621679665841"><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665843"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><a href="#local-6989586621679665843"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1549"></span><span>  </span><span id="local-6989586621679665836"><span class="annot"><span class="annottext">show :: WithSeverity a -&gt; String
</span><a href="#local-6989586621679665836"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679665835"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679665835"><span class="hs-identifier hs-var">_sev</span></a></span></span><span> </span><span id="local-6989586621679665834"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665834"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665834"><span class="hs-identifier hs-var">a</span></a></span></span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span id="local-6989586621679666839"><span id="local-6989586621679666840"><span class="annot"><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-type">showOnOff</span></a></span><span>
</span><span id="line-1552"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666840"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasSeverityAnnotation</span></span><span> </span><span class="annot"><a href="#local-6989586621679666840"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666839"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679666840"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1554"></span><span id="showOnOff"><span class="annot"><span class="annottext">showOnOff :: OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var hs-var">showOnOff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1555"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665833"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665833"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679665832"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665832"><span class="hs-identifier hs-var">trcer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-1556"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity a) -&gt; Tracer IO a)
-&gt; Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; Tracer IO (WithSeverity a)
forall a (m :: * -&gt; *). Show a =&gt; Tracer m String -&gt; Tracer m a
</span><span class="hs-identifier hs-var">showTracing</span></span><span>
</span><span id="line-1557"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO String -&gt; Tracer IO (WithSeverity a))
-&gt; Tracer IO String -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Tracer IO String
</span><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-var">withName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665833"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665832"><span class="hs-identifier hs-var">trcer</span></a></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-type">withName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1560"></span><span id="withName"><span class="annot"><span class="annottext">withName :: Text -&gt; Trace IO Text -&gt; Tracer IO String
</span><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-var hs-var">withName</span></a></span></span><span> </span><span id="local-6989586621679665830"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665830"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679665829"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665829"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Tracer IO Text -&gt; Tracer IO String
forall (f :: * -&gt; *) a b. Contravariant f =&gt; (a -&gt; b) -&gt; f b -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO Text -&gt; Tracer IO String)
-&gt; Tracer IO Text -&gt; Tracer IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO Text)
-&gt; Trace IO Text -&gt; Tracer IO Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665830"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665829"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1561"></span></pre></body></html>