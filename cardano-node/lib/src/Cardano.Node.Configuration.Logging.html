<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PackageImports #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Node.Configuration.Logging</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier">LoggingLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier">EKGDirect</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#createLoggingLayer"><span class="hs-identifier">createLoggingLayer</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier">nodeBasicInfo</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#shutdownLoggingLayer"><span class="hs-identifier">shutdownLoggingLayer</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier">traceCounter</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-comment">-- re-exports</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Trace</span></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Configuration</span></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LoggerName</span></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Severity</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mkLOMeta</span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LOMeta</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LOContent</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">trace</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Concurrent</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Conc</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.Async</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Async</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Exception.Safe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/exceptions-0.10.4/src"><span class="hs-identifier">MonadCatch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Except.Extra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catchIOExceptT</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="hs-string">&quot;contra-tracer&quot;</span><span> </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">nub</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">pack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">Data.Time.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">UTCTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">getCurrentTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Version</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">showVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Metrics.Counter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Counter</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Metrics.Gauge</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Gauge</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Metrics.Label</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Label</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Remote.Monitoring</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EKG</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.Aggregation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">plugin</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.EKGView</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">plugin</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.Monitoring</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">plugin</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.Switchboard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Switchboard</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.Switchboard</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Switchboard</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Backend.TraceForwarder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">plugin</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Configuration</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Configuration</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Configuration</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Config</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Configuration.Model</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Config</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Aggregated</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Measurable</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Backend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Backend</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">BackendKind</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.LogItem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LOContent</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LOMeta</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LoggerName</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Observer.Monadic</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Monadic</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Observer.STM</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Stm</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Plugin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">loadPlugin</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if defined(SYSTEMD)
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Scribe.Systemd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">plugin</span></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Setup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">setupTrace_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">shutdown</span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Stats</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Stats.Resources</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.BM.Trace</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Trace</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Tracing</span></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Genesis</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gen</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.API</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.BlockchainTime.WallClock.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WCT</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Byron.Ledger.Conversions</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Cardano.Block</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Cardano.CanHardFork</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Config</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Config.SupportsNode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ConfigSupportsNode</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Degenerate</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node.ProtocolInfo</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger.Ledger</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier">Cardano.Api.Protocol.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier">BlockType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier">protocolInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-git-rev-0.1.0.0/noopt/doc/html/cardano-git-rev/src"><span class="hs-identifier">Cardano.Git.Rev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-git-rev-0.1.0.0/noopt/doc/html/cardano-git-rev/src"><span class="hs-identifier">gitRev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html"><span class="hs-identifier">Cardano.Node.Configuration.POM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier">NodeConfiguration</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#ncProtocol"><span class="hs-identifier">ncProtocol</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Types.html"><span class="hs-identifier">Cardano.Node.Protocol.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier">SomeConsensusProtocol</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Types.html"><span class="hs-identifier">Cardano.Node.Types</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Slotting.Slot</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EpochSize</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Config.html"><span class="hs-identifier">Cardano.Tracing.Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier">TraceOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.OrphanInstances.Common.html"><span class="hs-identifier">Cardano.Tracing.OrphanInstances.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Paths_cardano_node.html"><span class="hs-identifier">Paths_cardano_node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Paths_cardano_node.html#version"><span class="hs-identifier">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">--------------------------------</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- Layer</span><span>
</span><span id="line-92"></span><span class="hs-comment">--------------------------------</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">-- | The LoggingLayer interface that we can expose.</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- We want to do this since we want to be able to mock out any function tied to logging.</span><span>
</span><span id="line-96"></span><span class="hs-comment">--</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- The good side of this is that _each function has it's own effects_</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- and that is ideal for tracking the functions effects and constraining</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- the user (programmer) of those function to use specific effects in them.</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- https://github.com/input-output-hk/cardano-sl/blob/develop/util/src/Pos/Util/Log/LogSafe.hs</span><span>
</span><span id="line-101"></span><span class="hs-keyword">data</span><span> </span><span id="LoggingLayer"><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-var">LoggingLayer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoggingLayer"><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-var">LoggingLayer</span></a></span></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="llBasicTrace"><span class="annot"><span class="annottext">LoggingLayer -&gt; forall (m :: * -&gt; *). MonadIO m =&gt; Trace m Text
</span><a href="Cardano.Node.Configuration.Logging.html#llBasicTrace"><span class="hs-identifier hs-var hs-var">llBasicTrace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665827"><span class="annot"><a href="#local-6989586621679665827"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665827"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665827"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llLogDebug"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogDebug"><span class="hs-identifier hs-var hs-var">llLogDebug</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665823"><span class="annot"><a href="#local-6989586621679665823"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665822"><span class="annot"><a href="#local-6989586621679665822"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665823"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665822"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665823"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665823"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llLogInfo"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogInfo"><span class="hs-identifier hs-var hs-var">llLogInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665574"><span class="annot"><a href="#local-6989586621679665574"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665573"><span class="annot"><a href="#local-6989586621679665573"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665574"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665573"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665574"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665573"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665573"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665574"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llLogNotice"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogNotice"><span class="hs-identifier hs-var hs-var">llLogNotice</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665571"><span class="annot"><a href="#local-6989586621679665571"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665570"><span class="annot"><a href="#local-6989586621679665570"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665571"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665570"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665571"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665570"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665570"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665571"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llLogWarning"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogWarning"><span class="hs-identifier hs-var hs-var">llLogWarning</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665568"><span class="annot"><a href="#local-6989586621679665568"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665567"><span class="annot"><a href="#local-6989586621679665567"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665568"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665567"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665568"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665567"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665567"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665568"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llLogError"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogError"><span class="hs-identifier hs-var hs-var">llLogError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665565"><span class="annot"><a href="#local-6989586621679665565"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665564"><span class="annot"><a href="#local-6989586621679665564"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665565"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665564"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665565"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665564"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665564"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665565"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llAppendName"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a. Show a =&gt; Text -&gt; Trace m a -&gt; Trace m a
</span><a href="Cardano.Node.Configuration.Logging.html#llAppendName"><span class="hs-identifier hs-var hs-var">llAppendName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665820"><span class="annot"><a href="#local-6989586621679665820"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665821"><span class="annot"><a href="#local-6989586621679665821"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665820"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665821"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665820"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665821"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llBracketMonadIO"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall a t.
   Show a =&gt;
   Trace IO a -&gt; Severity -&gt; Text -&gt; IO t -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadIO"><span class="hs-identifier hs-var hs-var">llBracketMonadIO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665819"><span class="annot"><a href="#local-6989586621679665819"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679665817"><span class="annot"><a href="#local-6989586621679665817"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665819"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665819"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Severity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665817"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665817"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llBracketMonadM"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a t.
   (MonadCatch m, MonadIO m, Show a) =&gt;
   Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadM"><span class="hs-identifier hs-var hs-var">llBracketMonadM</span></a></span></span><span>
</span><span id="line-111"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665816"><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665814"><span class="annot"><a href="#local-6989586621679665814"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679665813"><span class="annot"><a href="#local-6989586621679665813"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/exceptions-0.10.4/src"><span class="hs-identifier hs-type">MonadCatch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665814"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665814"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Severity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665813"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665816"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665813"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llBracketMonadX"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a t.
   (MonadIO m, Show a) =&gt;
   Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadX"><span class="hs-identifier hs-var hs-var">llBracketMonadX</span></a></span></span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665812"><span class="annot"><a href="#local-6989586621679665812"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679665811"><span class="annot"><a href="#local-6989586621679665811"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679665810"><span class="annot"><a href="#local-6989586621679665810"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665812"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="#local-6989586621679665812"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665811"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Severity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665812"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665810"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679665812"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665810"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llBracketStmIO"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall a t.
   Show a =&gt;
   Trace IO a -&gt; Severity -&gt; Text -&gt; STM t -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketStmIO"><span class="hs-identifier hs-var hs-var">llBracketStmIO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665809"><span class="annot"><a href="#local-6989586621679665809"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679665808"><span class="annot"><a href="#local-6989586621679665808"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665809"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665809"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Severity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665808"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665808"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llBracketStmLogIO"><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall a t.
   Show a =&gt;
   Trace IO a
   -&gt; Severity -&gt; Text -&gt; STM (t, [(LOMeta, LOContent a)]) -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketStmLogIO"><span class="hs-identifier hs-var hs-var">llBracketStmLogIO</span></a></span></span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679665806"><span class="annot"><a href="#local-6989586621679665806"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679665805"><span class="annot"><a href="#local-6989586621679665805"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665806"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665806"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Severity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679665805"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679665806"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679665805"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llConfiguration"><span class="annot"><span class="annottext">LoggingLayer -&gt; Configuration
</span><a href="Cardano.Node.Configuration.Logging.html#llConfiguration"><span class="hs-identifier hs-var hs-var">llConfiguration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llAddBackend"><span class="annot"><span class="annottext">LoggingLayer -&gt; Backend Text -&gt; BackendKind -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#llAddBackend"><span class="hs-identifier hs-var hs-var">llAddBackend</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Backend</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BackendKind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llSwitchboard"><span class="annot"><span class="annottext">LoggingLayer -&gt; Switchboard Text
</span><a href="Cardano.Node.Configuration.Logging.html#llSwitchboard"><span class="hs-identifier hs-var hs-var">llSwitchboard</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Switchboard</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="llEKGDirect"><span class="annot"><span class="annottext">LoggingLayer -&gt; Maybe EKGDirect
</span><a href="Cardano.Node.Configuration.Logging.html#llEKGDirect"><span class="hs-identifier hs-var hs-var">llEKGDirect</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">data</span><span> </span><span id="EKGDirect"><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-var">EKGDirect</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EKGDirect"><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-var">EKGDirect</span></a></span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ekgServer"><span class="annot"><span class="annottext">EKGDirect -&gt; Server
</span><a href="Cardano.Node.Configuration.Logging.html#ekgServer"><span class="hs-identifier hs-var hs-var">ekgServer</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EKG.Server</span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ekgGauges"><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Gauge)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgGauges"><span class="hs-identifier hs-var hs-var">ekgGauges</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gauge</span></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ekgLabels"><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Label)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgLabels"><span class="hs-identifier hs-var hs-var">ekgLabels</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ekgCounters"><span class="annot"><span class="annottext">EKGDirect -&gt; MVar (Map Text Counter)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgCounters"><span class="hs-identifier hs-var hs-var">ekgCounters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Counter</span></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">--------------------------------</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- Feature</span><span>
</span><span id="line-134"></span><span class="hs-comment">--------------------------------</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">-- | Either parse a filepath into a logging 'Configuration',</span><span>
</span><span id="line-137"></span><span class="hs-comment">--   or supply a mute 'Configuration'.</span><span>
</span><span id="line-138"></span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#loggingCLIConfiguration"><span class="hs-identifier hs-type">loggingCLIConfiguration</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#ConfigError"><span class="hs-identifier hs-type">ConfigError</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span>
</span><span id="line-141"></span><span id="loggingCLIConfiguration"><span class="annot"><span class="annottext">loggingCLIConfiguration :: Maybe FilePath -&gt; ExceptT ConfigError IO Configuration
</span><a href="Cardano.Node.Configuration.Logging.html#loggingCLIConfiguration"><span class="hs-identifier hs-var hs-var">loggingCLIConfiguration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ConfigError IO Configuration
-&gt; (FilePath -&gt; ExceptT ConfigError IO Configuration)
-&gt; Maybe FilePath
-&gt; ExceptT ConfigError IO Configuration
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT ConfigError IO Configuration
</span><a href="#local-6989586621679665546"><span class="hs-identifier hs-var">emptyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ExceptT ConfigError IO Configuration
</span><a href="#local-6989586621679665545"><span class="hs-identifier hs-var">readConfig</span></a></span><span>
</span><span id="line-142"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>   </span><span class="annot"><a href="#local-6989586621679665545"><span class="hs-identifier hs-type">readConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#ConfigError"><span class="hs-identifier hs-type">ConfigError</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span>
</span><span id="line-144"></span><span>   </span><span id="local-6989586621679665545"><span class="annot"><span class="annottext">readConfig :: FilePath -&gt; ExceptT ConfigError IO Configuration
</span><a href="#local-6989586621679665545"><span class="hs-identifier hs-var hs-var">readConfig</span></a></span></span><span> </span><span id="local-6989586621679665544"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679665544"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>     </span><span class="annot"><span class="annottext">IO Configuration
-&gt; (IOException -&gt; ConfigError)
-&gt; ExceptT ConfigError IO Configuration
forall (m :: * -&gt; *) a x.
MonadIO m =&gt;
IO a -&gt; (IOException -&gt; x) -&gt; ExceptT x m a
</span><span class="hs-identifier hs-var">catchIOExceptT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; IO Configuration
</span><span class="hs-identifier hs-var">Config.setup</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679665544"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((IOException -&gt; ConfigError)
 -&gt; ExceptT ConfigError IO Configuration)
-&gt; (IOException -&gt; ConfigError)
-&gt; ExceptT ConfigError IO Configuration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IOException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ConfigError
</span><a href="Cardano.Node.Types.html#ConfigErrorFileNotFound"><span class="hs-identifier hs-var">ConfigErrorFileNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679665544"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>   </span><span class="annot"><a href="#local-6989586621679665546"><span class="hs-identifier hs-type">emptyConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#ConfigError"><span class="hs-identifier hs-type">ConfigError</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span>
</span><span id="line-148"></span><span>   </span><span id="local-6989586621679665546"><span class="annot"><span class="annottext">emptyConfig :: ExceptT ConfigError IO Configuration
</span><a href="#local-6989586621679665546"><span class="hs-identifier hs-var hs-var">emptyConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Configuration -&gt; ExceptT ConfigError IO Configuration
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Configuration -&gt; ExceptT ConfigError IO Configuration)
-&gt; IO Configuration -&gt; ExceptT ConfigError IO Configuration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-149"></span><span>     </span><span id="local-6989586621679665540"><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665540"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Configuration
</span><span class="hs-identifier hs-var">Config.empty</span></span><span>
</span><span id="line-150"></span><span>     </span><span class="annot"><span class="annottext">Configuration -&gt; Severity -&gt; IO ()
</span><span class="hs-identifier hs-var">Config.setMinSeverity</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665540"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Info</span></span><span>
</span><span id="line-151"></span><span>     </span><span class="annot"><span class="annottext">Configuration -&gt; IO Configuration
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665540"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Create logging feature for `cardano-node`</span><span>
</span><span id="line-154"></span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#createLoggingLayer"><span class="hs-identifier hs-type">createLoggingLayer</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#ConfigError"><span class="hs-identifier hs-type">ConfigError</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-type">LoggingLayer</span></a></span><span>
</span><span id="line-159"></span><span id="createLoggingLayer"><span class="annot"><span class="annottext">createLoggingLayer :: Text
-&gt; NodeConfiguration
-&gt; SomeConsensusProtocol
-&gt; ExceptT ConfigError IO LoggingLayer
</span><a href="Cardano.Node.Configuration.Logging.html#createLoggingLayer"><span class="hs-identifier hs-var hs-var">createLoggingLayer</span></a></span></span><span> </span><span id="local-6989586621679665536"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665536"><span class="hs-identifier hs-var">ver</span></a></span></span><span> </span><span id="local-6989586621679665535"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665535"><span class="hs-identifier hs-var">nodeConfig'</span></a></span></span><span> </span><span id="local-6989586621679665534"><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621679665534"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621679665533"><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath -&gt; ExceptT ConfigError IO Configuration
</span><a href="Cardano.Node.Configuration.Logging.html#loggingCLIConfiguration"><span class="hs-identifier hs-var">loggingCLIConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe FilePath -&gt; ExceptT ConfigError IO Configuration)
-&gt; Maybe FilePath -&gt; ExceptT ConfigError IO Configuration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncLoggingSwitch"><span class="hs-identifier hs-var hs-var">ncLoggingSwitch</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665535"><span class="hs-identifier hs-var">nodeConfig'</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- Re-interpret node config again, as logging 'Configuration':</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Maybe FilePath)
-&gt; (ConfigYamlFilePath -&gt; FilePath)
-&gt; ConfigYamlFilePath
-&gt; Maybe FilePath
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigYamlFilePath -&gt; FilePath
</span><a href="Cardano.Node.Types.html#unConfigPath"><span class="hs-identifier hs-var hs-var">unConfigPath</span></a></span><span> </span><span class="annot"><span class="annottext">(ConfigYamlFilePath -&gt; Maybe FilePath)
-&gt; ConfigYamlFilePath -&gt; Maybe FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ConfigYamlFilePath
</span><a href="Cardano.Node.Configuration.POM.html#ncConfigFile"><span class="hs-identifier hs-var hs-var">ncConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665535"><span class="hs-identifier hs-var">nodeConfig'</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-comment">-- These have to be set before the switchboard is set up.</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT ConfigError IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT ConfigError IO ())
-&gt; IO () -&gt; ExceptT ConfigError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><span class="annottext">Configuration -&gt; Text -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">Config.setTextOption</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;appversion&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665536"><span class="hs-identifier hs-var">ver</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><span class="annottext">Configuration -&gt; Text -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">Config.setTextOption</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;appcommit&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-git-rev-0.1.0.0/noopt/doc/html/cardano-git-rev/src"><span class="hs-identifier hs-var">gitRev</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679665527"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665527"><span class="hs-identifier hs-var">baseTrace'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679665526"><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665526"><span class="hs-identifier hs-var">switchBoard</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Trace IO Text, Switchboard Text)
-&gt; ExceptT ConfigError IO (Trace IO Text, Switchboard Text)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Trace IO Text, Switchboard Text)
 -&gt; ExceptT ConfigError IO (Trace IO Text, Switchboard Text))
-&gt; IO (Trace IO Text, Switchboard Text)
-&gt; ExceptT ConfigError IO (Trace IO Text, Switchboard Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Text -&gt; IO (Trace IO Text, Switchboard Text)
forall (m :: * -&gt; *) a.
(MonadIO m, ToJSON a, FromJSON a, ToObject a) =&gt;
Configuration -&gt; Text -&gt; m (Trace m a, Switchboard a)
</span><span class="hs-identifier hs-var">setupTrace_</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano&quot;</span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679665525"><span class="hs-identifier hs-type">loggingEnabled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span id="local-6989586621679665525"><span class="annot"><span class="annottext">loggingEnabled :: Bool
</span><a href="#local-6989586621679665525"><span class="hs-identifier hs-var hs-var">loggingEnabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncLoggingSwitch"><span class="hs-identifier hs-var hs-var">ncLoggingSwitch</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665535"><span class="hs-identifier hs-var">nodeConfig'</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><a href="#local-6989586621679665524"><span class="hs-identifier hs-type">trace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span id="local-6989586621679665524"><span class="annot"><span class="annottext">trace :: Trace IO Text
</span><a href="#local-6989586621679665524"><span class="hs-identifier hs-var hs-var">trace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679665525"><span class="hs-identifier hs-var">loggingEnabled</span></a></span><span>
</span><span id="line-177"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665527"><span class="hs-identifier hs-var">baseTrace'</span></a></span><span>
</span><span id="line-178"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">Trace.nullTracer</span></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT ConfigError IO () -&gt; ExceptT ConfigError IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679665525"><span class="hs-identifier hs-var">loggingEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ConfigError IO () -&gt; ExceptT ConfigError IO ())
-&gt; ExceptT ConfigError IO () -&gt; ExceptT ConfigError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT ConfigError IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT ConfigError IO ())
-&gt; IO () -&gt; ExceptT ConfigError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; Configuration -&gt; Switchboard Text -&gt; Trace IO Text -&gt; IO ()
</span><a href="#local-6989586621679665521"><span class="hs-identifier hs-var">loggingPreInit</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665535"><span class="hs-identifier hs-var">nodeConfig'</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665526"><span class="hs-identifier hs-var">switchBoard</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665524"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621679665520"><span class="annot"><span class="annottext">Maybe Server
</span><a href="#local-6989586621679665520"><span class="hs-identifier hs-var">mbEKGServer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Server) -&gt; ExceptT ConfigError IO (Maybe Server)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Server) -&gt; ExceptT ConfigError IO (Maybe Server))
-&gt; IO (Maybe Server) -&gt; ExceptT ConfigError IO (Maybe Server)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; IO (Maybe Server)
forall a. Switchboard a -&gt; IO (Maybe Server)
</span><span class="hs-identifier hs-var">Switchboard.getSbEKGServer</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665526"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621679665518"><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679665518"><span class="hs-identifier hs-var">mbEkgDirect</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Server
</span><a href="#local-6989586621679665520"><span class="hs-identifier hs-var">mbEKGServer</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-186"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Server
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect -&gt; ExceptT ConfigError IO (Maybe EKGDirect)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-187"></span><span>                  </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679665517"><span class="annot"><span class="annottext">Server
</span><a href="#local-6989586621679665517"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-188"></span><span>                    </span><span id="local-6989586621679665516"><span class="annot"><span class="annottext">MVar (Map Text Gauge)
</span><a href="#local-6989586621679665516"><span class="hs-identifier hs-var">refGauge</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Map Text Gauge))
-&gt; ExceptT ConfigError IO (MVar (Map Text Gauge))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (MVar (Map Text Gauge))
 -&gt; ExceptT ConfigError IO (MVar (Map Text Gauge)))
-&gt; IO (MVar (Map Text Gauge))
-&gt; ExceptT ConfigError IO (MVar (Map Text Gauge))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Gauge -&gt; IO (MVar (Map Text Gauge))
forall a. a -&gt; IO (MVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Gauge
forall k a. Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-189"></span><span>                    </span><span id="local-6989586621679665513"><span class="annot"><span class="annottext">MVar (Map Text Label)
</span><a href="#local-6989586621679665513"><span class="hs-identifier hs-var">refLabel</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Map Text Label))
-&gt; ExceptT ConfigError IO (MVar (Map Text Label))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (MVar (Map Text Label))
 -&gt; ExceptT ConfigError IO (MVar (Map Text Label)))
-&gt; IO (MVar (Map Text Label))
-&gt; ExceptT ConfigError IO (MVar (Map Text Label))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Label -&gt; IO (MVar (Map Text Label))
forall a. a -&gt; IO (MVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Label
forall k a. Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-190"></span><span>                    </span><span id="local-6989586621679665512"><span class="annot"><span class="annottext">MVar (Map Text Counter)
</span><a href="#local-6989586621679665512"><span class="hs-identifier hs-var">refCounter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Map Text Counter))
-&gt; ExceptT ConfigError IO (MVar (Map Text Counter))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (MVar (Map Text Counter))
 -&gt; ExceptT ConfigError IO (MVar (Map Text Counter)))
-&gt; IO (MVar (Map Text Counter))
-&gt; ExceptT ConfigError IO (MVar (Map Text Counter))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Counter -&gt; IO (MVar (Map Text Counter))
forall a. a -&gt; IO (MVar a)
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Counter
forall k a. Map k a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-191"></span><span>                    </span><span class="annot"><span class="annottext">Maybe EKGDirect -&gt; ExceptT ConfigError IO (Maybe EKGDirect)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe EKGDirect -&gt; ExceptT ConfigError IO (Maybe EKGDirect))
-&gt; Maybe EKGDirect -&gt; ExceptT ConfigError IO (Maybe EKGDirect)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect -&gt; Maybe EKGDirect
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">EKGDirect :: Server
-&gt; MVar (Map Text Gauge)
-&gt; MVar (Map Text Label)
-&gt; MVar (Map Text Counter)
-&gt; EKGDirect
</span><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-192"></span><span>                        </span><span class="annot"><span class="annottext">ekgServer :: Server
</span><a href="Cardano.Node.Configuration.Logging.html#ekgServer"><span class="hs-identifier hs-var">ekgServer</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Server
</span><a href="#local-6989586621679665517"><span class="hs-identifier hs-var">sv</span></a></span><span>
</span><span id="line-193"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ekgGauges :: MVar (Map Text Gauge)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgGauges"><span class="hs-identifier hs-var">ekgGauges</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar (Map Text Gauge)
</span><a href="#local-6989586621679665516"><span class="hs-identifier hs-var">refGauge</span></a></span><span>
</span><span id="line-194"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ekgLabels :: MVar (Map Text Label)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgLabels"><span class="hs-identifier hs-var">ekgLabels</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar (Map Text Label)
</span><a href="#local-6989586621679665513"><span class="hs-identifier hs-var">refLabel</span></a></span><span>
</span><span id="line-195"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ekgCounters :: MVar (Map Text Counter)
</span><a href="Cardano.Node.Configuration.Logging.html#ekgCounters"><span class="hs-identifier hs-var">ekgCounters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar (Map Text Counter)
</span><a href="#local-6989586621679665512"><span class="hs-identifier hs-var">refCounter</span></a></span><span>
</span><span id="line-196"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="annottext">LoggingLayer -&gt; ExceptT ConfigError IO LoggingLayer
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(LoggingLayer -&gt; ExceptT ConfigError IO LoggingLayer)
-&gt; LoggingLayer -&gt; ExceptT ConfigError IO LoggingLayer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration
-&gt; Switchboard Text
-&gt; Maybe EKGDirect
-&gt; Trace IO Text
-&gt; LoggingLayer
</span><a href="#local-6989586621679665511"><span class="hs-identifier hs-var">mkLogLayer</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665533"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665526"><span class="hs-identifier hs-var">switchBoard</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679665518"><span class="hs-identifier hs-var">mbEkgDirect</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665524"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-199"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>   </span><span class="annot"><a href="#local-6989586621679665521"><span class="hs-identifier hs-type">loggingPreInit</span></a></span><span>
</span><span id="line-201"></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-202"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span>
</span><span id="line-203"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Switchboard</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-204"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-205"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>   </span><span id="local-6989586621679665521"><span class="annot"><span class="annottext">loggingPreInit :: NodeConfiguration
-&gt; Configuration -&gt; Switchboard Text -&gt; Trace IO Text -&gt; IO ()
</span><a href="#local-6989586621679665521"><span class="hs-identifier hs-var hs-var">loggingPreInit</span></a></span></span><span> </span><span id="local-6989586621679665510"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665510"><span class="hs-identifier hs-var">nodeConfig</span></a></span></span><span> </span><span id="local-6989586621679665509"><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span></span><span> </span><span id="local-6989586621679665508"><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span></span><span> </span><span id="local-6989586621679665507"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-207"></span><span>     </span><span class="annot"><span class="annottext">Configuration -&gt; IO (Maybe Endpoint)
</span><span class="hs-identifier hs-var">Config.getEKGBindAddr</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe Endpoint) -&gt; (Maybe Endpoint -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665505"><span class="annot"><span class="annottext">Maybe Endpoint
</span><a href="#local-6989586621679665505"><span class="hs-identifier hs-var">mbEndpoint</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Endpoint -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Endpoint
</span><a href="#local-6989586621679665505"><span class="hs-identifier hs-var">mbEndpoint</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-209"></span><span>         </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO Text -&gt; Switchboard Text -&gt; IO (Plugin Text)
forall (s :: * -&gt; *) a.
(IsEffectuator s a, ToJSON a, FromJSON a) =&gt;
Configuration -&gt; Trace IO a -&gt; s a -&gt; IO (Plugin a)
</span><span class="hs-identifier hs-var">Cardano.BM.Backend.EKGView.plugin</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-210"></span><span>           </span><span class="annot"><span class="annottext">IO (Plugin Text) -&gt; (Plugin Text -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Plugin Text -&gt; IO ()
forall a. Switchboard a -&gt; Plugin a -&gt; IO ()
</span><span class="hs-identifier hs-var">loadPlugin</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>     </span><span class="annot"><span class="annottext">Configuration -&gt; IO (Maybe RemoteAddr)
</span><span class="hs-identifier hs-var">Config.getForwardTo</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe RemoteAddr) -&gt; (Maybe RemoteAddr -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665502"><span class="annot"><span class="annottext">Maybe RemoteAddr
</span><a href="#local-6989586621679665502"><span class="hs-identifier hs-var">forwardTo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-213"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe RemoteAddr -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RemoteAddr
</span><a href="#local-6989586621679665502"><span class="hs-identifier hs-var">forwardTo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-214"></span><span>         </span><span class="hs-comment">-- Since the configuration contains 'traceForwardTo' section,</span><span>
</span><span id="line-215"></span><span>         </span><span class="hs-comment">-- node's information (metrics/peers/errors) should be forwarded</span><span>
</span><span id="line-216"></span><span>         </span><span class="hs-comment">-- to an external process (for example, RTView).</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span>         </span><span class="hs-comment">-- Activate TraceForwarder plugin (there is no need to add 'TraceForwarderBK'</span><span>
</span><span id="line-219"></span><span>         </span><span class="hs-comment">-- to 'setupBackends' list).</span><span>
</span><span id="line-220"></span><span>         </span><span id="local-6989586621679665501"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665501"><span class="hs-identifier hs-var">nodeStartTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-var">getCurrentTime</span></a></span><span>
</span><span id="line-221"></span><span>         </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO Text
-&gt; Switchboard Text
-&gt; Text
-&gt; IO [LogObject Text]
-&gt; IO (Plugin Text)
forall a (s :: * -&gt; *).
(IsEffectuator s a, ToJSON a, FromJSON a) =&gt;
Configuration
-&gt; Trace IO a -&gt; s a -&gt; Text -&gt; IO [LogObject a] -&gt; IO (Plugin a)
</span><span class="hs-identifier hs-var">Cardano.BM.Backend.TraceForwarder.plugin</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-222"></span><span>                                                  </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-223"></span><span>                                                  </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-224"></span><span>                                                  </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forwarderMinSeverity&quot;</span></span><span>
</span><span id="line-225"></span><span>                                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; UTCTime -&gt; IO [LogObject Text]
</span><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier hs-var">nodeBasicInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665510"><span class="hs-identifier hs-var">nodeConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621679665534"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665501"><span class="hs-identifier hs-var">nodeStartTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>           </span><span class="annot"><span class="annottext">IO (Plugin Text) -&gt; (Plugin Text -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Plugin Text -&gt; IO ()
forall a. Switchboard a -&gt; Plugin a -&gt; IO ()
</span><span class="hs-identifier hs-var">loadPlugin</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span>         </span><span class="hs-comment">-- Forward all the metrics/peers/errors to 'TraceForwarderBK' using 'mapBackends'.</span><span>
</span><span id="line-229"></span><span>         </span><span class="hs-comment">-- If 'TraceForwarderBK' is already added in 'mapBackends' - ignore it.</span><span>
</span><span id="line-230"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665500"><span class="annot"><span class="annottext">metricsLogger :: Text
</span><a href="#local-6989586621679665500"><span class="hs-identifier hs-var hs-var">metricsLogger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node.metrics&quot;</span></span><span> </span><span class="hs-comment">-- All metrics and peers info are here.</span><span>
</span><span id="line-231"></span><span>             </span><span id="local-6989586621679665499"><span class="annot"><span class="annottext">errorsLoggers :: Text
</span><a href="#local-6989586621679665499"><span class="hs-identifier hs-var hs-var">errorsLoggers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano.node&quot;</span></span><span> </span><span class="hs-comment">-- All errors (messages with 'Warning+' severity) are here.</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span>         </span><span class="annot"><span class="annottext">[Text] -&gt; (Text -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665500"><span class="hs-identifier hs-var">metricsLogger</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665499"><span class="hs-identifier hs-var">errorsLoggers</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((Text -&gt; IO ()) -&gt; IO ()) -&gt; (Text -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665497"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665497"><span class="hs-identifier hs-var">loggerName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>           </span><span class="annot"><span class="annottext">Configuration -&gt; Text -&gt; IO [BackendKind]
</span><span class="hs-identifier hs-var">Config.getBackends</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665497"><span class="hs-identifier hs-var">loggerName</span></a></span><span> </span><span class="annot"><span class="annottext">IO [BackendKind] -&gt; ([BackendKind] -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679665495"><span class="annot"><span class="annottext">[BackendKind]
</span><a href="#local-6989586621679665495"><span class="hs-identifier hs-var">backends</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-235"></span><span>             </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BackendKind
</span><span class="hs-identifier hs-var">TraceForwarderBK</span></span><span> </span><span class="annot"><span class="annottext">BackendKind -&gt; [BackendKind] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[BackendKind]
</span><a href="#local-6989586621679665495"><span class="hs-identifier hs-var">backends</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-236"></span><span>               </span><span class="annot"><span class="annottext">Configuration -&gt; Text -&gt; Maybe [BackendKind] -&gt; IO ()
</span><span class="hs-identifier hs-var">Config.setBackends</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665497"><span class="hs-identifier hs-var">loggerName</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe [BackendKind] -&gt; IO ()) -&gt; Maybe [BackendKind] -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[BackendKind] -&gt; Maybe [BackendKind]
forall a. a -&gt; Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BackendKind
</span><span class="hs-identifier hs-var">TraceForwarderBK</span></span><span> </span><span class="annot"><span class="annottext">BackendKind -&gt; [BackendKind] -&gt; [BackendKind]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[BackendKind]
</span><a href="#local-6989586621679665495"><span class="hs-identifier hs-var">backends</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>     </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO Text -&gt; Switchboard Text -&gt; IO (Plugin Text)
forall (s :: * -&gt; *) a.
(IsEffectuator s a, ToJSON a, FromJSON a) =&gt;
Configuration -&gt; Trace IO a -&gt; s a -&gt; IO (Plugin a)
</span><span class="hs-identifier hs-var">Cardano.BM.Backend.Aggregation.plugin</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-239"></span><span>       </span><span class="annot"><span class="annottext">IO (Plugin Text) -&gt; (Plugin Text -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Plugin Text -&gt; IO ()
forall a. Switchboard a -&gt; Plugin a -&gt; IO ()
</span><span class="hs-identifier hs-var">loadPlugin</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-240"></span><span>     </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO Text -&gt; Switchboard Text -&gt; IO (Plugin Text)
forall (s :: * -&gt; *) a.
(IsEffectuator s a, ToJSON a, FromJSON a) =&gt;
Configuration -&gt; Trace IO a -&gt; s a -&gt; IO (Plugin a)
</span><span class="hs-identifier hs-var">Cardano.BM.Backend.Monitoring.plugin</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-241"></span><span>       </span><span class="annot"><span class="annottext">IO (Plugin Text) -&gt; (Plugin Text -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Plugin Text -&gt; IO ()
forall a. Switchboard a -&gt; Plugin a -&gt; IO ()
</span><span class="hs-identifier hs-var">loadPlugin</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span class="hs-cpp">

#if defined(SYSTEMD)
</span><span>     </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO Text -&gt; Switchboard Text -&gt; Text -&gt; IO (Plugin Text)
forall (s :: * -&gt; *) a.
(IsEffectuator s a, ToJSON a, FromJSON a) =&gt;
Configuration -&gt; Trace IO a -&gt; s a -&gt; Text -&gt; IO (Plugin a)
</span><span class="hs-identifier hs-var">Cardano.BM.Scribe.Systemd.plugin</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665509"><span class="hs-identifier hs-var">logConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano&quot;</span></span><span>
</span><span id="line-245"></span><span>       </span><span class="annot"><span class="annottext">IO (Plugin Text) -&gt; (Plugin Text -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Plugin Text -&gt; IO ()
forall a. Switchboard a -&gt; Plugin a -&gt; IO ()
</span><span class="hs-identifier hs-var">loadPlugin</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665508"><span class="hs-identifier hs-var">switchBoard</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-248"></span><span>     </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncLogMetrics"><span class="hs-identifier hs-var hs-var">ncLogMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665510"><span class="hs-identifier hs-var">nodeConfig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-249"></span><span>       </span><span class="hs-comment">-- Record node metrics, if configured</span><span>
</span><span id="line-250"></span><span>       </span><span class="annot"><span class="annottext">TraceOptions -&gt; Trace IO Text -&gt; IO ()
</span><a href="#local-6989586621679665490"><span class="hs-identifier hs-var">startCapturingMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; TraceOptions
</span><a href="Cardano.Node.Configuration.POM.html#ncTraceConfig"><span class="hs-identifier hs-var hs-var">ncTraceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665510"><span class="hs-identifier hs-var">nodeConfig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665507"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>   </span><span class="annot"><a href="#local-6989586621679665511"><span class="hs-identifier hs-type">mkLogLayer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Configuration</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Switchboard</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#EKGDirect"><span class="hs-identifier hs-type">EKGDirect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-type">LoggingLayer</span></a></span><span>
</span><span id="line-253"></span><span>   </span><span id="local-6989586621679665511"><span class="annot"><span class="annottext">mkLogLayer :: Configuration
-&gt; Switchboard Text
-&gt; Maybe EKGDirect
-&gt; Trace IO Text
-&gt; LoggingLayer
</span><a href="#local-6989586621679665511"><span class="hs-identifier hs-var hs-var">mkLogLayer</span></a></span></span><span> </span><span id="local-6989586621679665488"><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span></span><span> </span><span id="local-6989586621679665487"><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665487"><span class="hs-identifier hs-var">switchBoard</span></a></span></span><span> </span><span id="local-6989586621679665486"><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679665486"><span class="hs-identifier hs-var">mbEkgDirect</span></a></span></span><span> </span><span id="local-6989586621679665485"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665485"><span class="hs-identifier hs-var">trace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>     </span><span class="annot"><span class="annottext">LoggingLayer :: (forall (m :: * -&gt; *). MonadIO m =&gt; Trace m Text)
-&gt; (forall (m :: * -&gt; *) a.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; a -&gt; m ())
-&gt; (forall (m :: * -&gt; *) a.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; a -&gt; m ())
-&gt; (forall (m :: * -&gt; *) a.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; a -&gt; m ())
-&gt; (forall (m :: * -&gt; *) a.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; a -&gt; m ())
-&gt; (forall (m :: * -&gt; *) a.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; a -&gt; m ())
-&gt; (forall (m :: * -&gt; *) a.
    Show a =&gt;
    Text -&gt; Trace m a -&gt; Trace m a)
-&gt; (forall a t.
    Show a =&gt;
    Trace IO a -&gt; Severity -&gt; Text -&gt; IO t -&gt; IO t)
-&gt; (forall (m :: * -&gt; *) a t.
    (MonadCatch m, MonadIO m, Show a) =&gt;
    Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t)
-&gt; (forall (m :: * -&gt; *) a t.
    (MonadIO m, Show a) =&gt;
    Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t)
-&gt; (forall a t.
    Show a =&gt;
    Trace IO a -&gt; Severity -&gt; Text -&gt; STM t -&gt; IO t)
-&gt; (forall a t.
    Show a =&gt;
    Trace IO a
    -&gt; Severity -&gt; Text -&gt; STM (t, [(LOMeta, LOContent a)]) -&gt; IO t)
-&gt; Configuration
-&gt; (Backend Text -&gt; BackendKind -&gt; IO ())
-&gt; Switchboard Text
-&gt; Maybe EKGDirect
-&gt; LoggingLayer
</span><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-type">LoggingLayer</span></a></span><span>
</span><span id="line-255"></span><span>       </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">llBasicTrace :: forall (m :: * -&gt; *). MonadIO m =&gt; Trace m Text
</span><a href="Cardano.Node.Configuration.Logging.html#llBasicTrace"><span class="hs-identifier hs-var">llBasicTrace</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. IO x -&gt; m x)
-&gt; Trace IO Text -&gt; Tracer m (Text, LogObject Text)
forall (m :: * -&gt; *) (n :: * -&gt; *) a.
(forall x. m x -&gt; n x)
-&gt; Tracer m (Text, LogObject a) -&gt; Tracer n (Text, LogObject a)
</span><span class="hs-identifier hs-var">Trace.natTrace</span></span><span> </span><span class="annot"><span class="annottext">forall x. IO x -&gt; m x
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665485"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-256"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llLogDebug :: forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogDebug"><span class="hs-identifier hs-var">llLogDebug</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; Trace m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.logDebug</span></span><span>
</span><span id="line-257"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llLogInfo :: forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogInfo"><span class="hs-identifier hs-var">llLogInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; Trace m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.logInfo</span></span><span>
</span><span id="line-258"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llLogNotice :: forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogNotice"><span class="hs-identifier hs-var">llLogNotice</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; Trace m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.logNotice</span></span><span>
</span><span id="line-259"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llLogWarning :: forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogWarning"><span class="hs-identifier hs-var">llLogWarning</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; Trace m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.logWarning</span></span><span>
</span><span id="line-260"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llLogError :: forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
</span><a href="Cardano.Node.Configuration.Logging.html#llLogError"><span class="hs-identifier hs-var">llLogError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; Trace m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.logError</span></span><span>
</span><span id="line-261"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llAppendName :: forall (m :: * -&gt; *) a. Show a =&gt; Text -&gt; Trace m a -&gt; Trace m a
</span><a href="Cardano.Node.Configuration.Logging.html#llAppendName"><span class="hs-identifier hs-var">llAppendName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Show a =&gt; Text -&gt; Trace m a -&gt; Trace m a
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">Trace.appendName</span></span><span>
</span><span id="line-262"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llBracketMonadIO :: forall a t.
Show a =&gt;
Trace IO a -&gt; Severity -&gt; Text -&gt; IO t -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadIO"><span class="hs-identifier hs-var">llBracketMonadIO</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Trace IO a -&gt; Severity -&gt; Text -&gt; IO t -&gt; IO t
forall a t.
Configuration -&gt; Trace IO a -&gt; Severity -&gt; Text -&gt; IO t -&gt; IO t
</span><span class="hs-identifier hs-var">Monadic.bracketObserveIO</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-263"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llBracketMonadM :: forall (m :: * -&gt; *) a t.
(MonadCatch m, MonadIO m, Show a) =&gt;
Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadM"><span class="hs-identifier hs-var">llBracketMonadM</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
forall (m :: * -&gt; *) a t.
(MonadCatch m, MonadIO m) =&gt;
Configuration -&gt; Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><span class="hs-identifier hs-var">Monadic.bracketObserveM</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-264"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llBracketMonadX :: forall (m :: * -&gt; *) a t.
(MonadIO m, Show a) =&gt;
Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketMonadX"><span class="hs-identifier hs-var">llBracketMonadX</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
forall (m :: * -&gt; *) a t.
MonadIO m =&gt;
Configuration -&gt; Trace m a -&gt; Severity -&gt; Text -&gt; m t -&gt; m t
</span><span class="hs-identifier hs-var">Monadic.bracketObserveX</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-265"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llBracketStmIO :: forall a t.
Show a =&gt;
Trace IO a -&gt; Severity -&gt; Text -&gt; STM t -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketStmIO"><span class="hs-identifier hs-var">llBracketStmIO</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Trace IO a -&gt; Severity -&gt; Text -&gt; STM t -&gt; IO t
forall a t.
Configuration -&gt; Trace IO a -&gt; Severity -&gt; Text -&gt; STM t -&gt; IO t
</span><span class="hs-identifier hs-var">Stm.bracketObserveIO</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-266"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llBracketStmLogIO :: forall a t.
Show a =&gt;
Trace IO a
-&gt; Severity -&gt; Text -&gt; STM (t, [(LOMeta, LOContent a)]) -&gt; IO t
</span><a href="Cardano.Node.Configuration.Logging.html#llBracketStmLogIO"><span class="hs-identifier hs-var">llBracketStmLogIO</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration
-&gt; Trace IO a
-&gt; Severity
-&gt; Text
-&gt; STM (t, [(LOMeta, LOContent a)])
-&gt; IO t
forall a t.
Configuration
-&gt; Trace IO a
-&gt; Severity
-&gt; Text
-&gt; STM (t, [(LOMeta, LOContent a)])
-&gt; IO t
</span><span class="hs-identifier hs-var">Stm.bracketObserveLogIO</span></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-267"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llConfiguration :: Configuration
</span><a href="Cardano.Node.Configuration.Logging.html#llConfiguration"><span class="hs-identifier hs-var">llConfiguration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679665488"><span class="hs-identifier hs-var">logConfig</span></a></span><span>
</span><span id="line-268"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llAddBackend :: Backend Text -&gt; BackendKind -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#llAddBackend"><span class="hs-identifier hs-var">llAddBackend</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; Backend Text -&gt; BackendKind -&gt; IO ()
forall a. Switchboard a -&gt; Backend a -&gt; BackendKind -&gt; IO ()
</span><span class="hs-identifier hs-var">Switchboard.addExternalBackend</span></span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665487"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-269"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llSwitchboard :: Switchboard Text
</span><a href="Cardano.Node.Configuration.Logging.html#llSwitchboard"><span class="hs-identifier hs-var">llSwitchboard</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Switchboard Text
</span><a href="#local-6989586621679665487"><span class="hs-identifier hs-var">switchBoard</span></a></span><span>
</span><span id="line-270"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">llEKGDirect :: Maybe EKGDirect
</span><a href="Cardano.Node.Configuration.Logging.html#llEKGDirect"><span class="hs-identifier hs-var">llEKGDirect</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EKGDirect
</span><a href="#local-6989586621679665486"><span class="hs-identifier hs-var">mbEkgDirect</span></a></span><span>
</span><span id="line-271"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span>   </span><span class="annot"><a href="#local-6989586621679665490"><span class="hs-identifier hs-type">startCapturingMetrics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier hs-type">TraceOptions</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>   </span><span id="local-6989586621679665490"><span class="annot"><span class="annottext">startCapturingMetrics :: TraceOptions -&gt; Trace IO Text -&gt; IO ()
</span><a href="#local-6989586621679665490"><span class="hs-identifier hs-var hs-var">startCapturingMetrics</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceDispatcher"><span class="hs-identifier hs-type">TraceDispatcher</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665470"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665470"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>   </span><span class="annot"><a href="#local-6989586621679665490"><span class="hs-identifier hs-var">startCapturingMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679665469"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665469"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>     </span><span class="annot"><span class="annottext">IO (Async Any) -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Async Any) -&gt; IO ())
-&gt; (IO () -&gt; IO (Async Any)) -&gt; IO () -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO Any -&gt; IO (Async Any)
forall a. IO a -&gt; IO (Async a)
</span><span class="hs-identifier hs-var">Async.async</span></span><span> </span><span class="annot"><span class="annottext">(IO Any -&gt; IO (Async Any))
-&gt; (IO () -&gt; IO Any) -&gt; IO () -&gt; IO (Async Any)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Any
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forever</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>       </span><span class="annot"><span class="annottext">IO (Maybe ResourceStats)
</span><span class="hs-identifier hs-var">readResourceStats</span></span><span>
</span><span id="line-282"></span><span>         </span><span class="annot"><span class="annottext">IO (Maybe ResourceStats) -&gt; (Maybe ResourceStats -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (ResourceStats -&gt; IO ()) -&gt; Maybe ResourceStats -&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; ResourceStats -&gt; IO ()
</span><a href="#local-6989586621679665464"><span class="hs-identifier hs-var">traceResourceStats</span></a></span><span>
</span><span id="line-284"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665469"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>       </span><span class="annot"><span class="annottext">Int -&gt; IO ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Conc.threadDelay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1000000</span></span><span> </span><span class="hs-comment">-- TODO:  make configurable</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span>   </span><span class="annot"><a href="#local-6989586621679665464"><span class="hs-identifier hs-type">traceResourceStats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResourceStats</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>   </span><span id="local-6989586621679665464"><span class="annot"><span class="annottext">traceResourceStats :: Trace IO Text -&gt; ResourceStats -&gt; IO ()
</span><a href="#local-6989586621679665464"><span class="hs-identifier hs-var hs-var">traceResourceStats</span></a></span></span><span> </span><span id="local-6989586621679665462"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679665461"><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-289"></span><span>     </span><span class="annot"><span class="annottext">Tracer IO ResourceStats -&gt; ResourceStats -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity -&gt; Trace IO Text -&gt; Tracer IO ResourceStats
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier hs-var">NormalVerbosity</span></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO ResourceStats)
-&gt; Trace IO Text -&gt; Tracer IO ResourceStats
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;resources&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-290"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Stat.cputicks&quot;</span></span><span>    </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rCentiCpu</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-291"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mem.resident&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rRSS</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-292"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.gcLiveBytes&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rLive</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-293"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.gcHeapBytes&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rHeap</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-294"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.gcMajorNum&quot;</span></span><span>   </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rGcsMajor</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-295"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.gcMinorNum&quot;</span></span><span>   </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rGcsMinor</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-296"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.gcticks&quot;</span></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rCentiGC</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-297"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RTS.mutticks&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rCentiMut</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-298"></span><span>     </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Stat.threads&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665462"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; (Word64 -&gt; Int) -&gt; Word64 -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; IO ()) -&gt; Word64 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceStats -&gt; Word64
forall a. Resources a -&gt; a
</span><span class="hs-identifier hs-var hs-var">rThreads</span></span><span> </span><span class="annot"><span class="annottext">ResourceStats
</span><a href="#local-6989586621679665461"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-type">traceCounter</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span id="traceCounter"><span class="annot"><span class="annottext">traceCounter :: Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var hs-var">traceCounter</span></a></span></span><span> </span><span id="local-6989586621679665448"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665448"><span class="hs-identifier hs-var">logValueName</span></a></span></span><span> </span><span id="local-6989586621679665447"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665447"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679665446"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665446"><span class="hs-identifier hs-var">aCounter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-306"></span><span>  </span><span id="local-6989586621679665445"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665445"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Notice</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">Trace.traceNamedObject</span></span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679665447"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665445"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665448"><span class="hs-identifier hs-var">logValueName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679665446"><span class="hs-identifier hs-var">aCounter</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#shutdownLoggingLayer"><span class="hs-identifier hs-type">shutdownLoggingLayer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-type">LoggingLayer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span id="shutdownLoggingLayer"><span class="annot"><span class="annottext">shutdownLoggingLayer :: LoggingLayer -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#shutdownLoggingLayer"><span class="hs-identifier hs-var hs-var">shutdownLoggingLayer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Switchboard Text -&gt; IO ()
forall a.
(ToJSON a, FromJSON a, ToObject a) =&gt;
Switchboard a -&gt; IO ()
</span><span class="hs-identifier hs-var">shutdown</span></span><span> </span><span class="annot"><span class="annottext">(Switchboard Text -&gt; IO ())
-&gt; (LoggingLayer -&gt; Switchboard Text) -&gt; LoggingLayer -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer -&gt; Switchboard Text
</span><a href="Cardano.Node.Configuration.Logging.html#llSwitchboard"><span class="hs-identifier hs-var hs-var">llSwitchboard</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- The node provides the basic node's information for TraceForwarderBK.</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- It will be sent once TraceForwarderBK is connected to an external process</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- (for example, RTView).</span><span>
</span><span id="line-317"></span><span class="hs-comment">--</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- TODO: it should return 'StartupTrace' rather than raw 'LogObject's.</span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier hs-type">nodeBasicInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-321"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span>
</span><span id="line-322"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">UTCTime</span></a></span><span>
</span><span id="line-323"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LogObject</span></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-324"></span><span id="nodeBasicInfo"><span class="annot"><span class="annottext">nodeBasicInfo :: NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; UTCTime -&gt; IO [LogObject Text]
</span><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier hs-var hs-var">nodeBasicInfo</span></a></span></span><span> </span><span id="local-6989586621679665439"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665439"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span> </span><span id="local-6989586621679665437"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621679665437"><span class="hs-identifier hs-var">whichP</span></a></span></span><span> </span><span id="local-6989586621679665436"><span class="annot"><span class="annottext">ProtocolInfoArgs IO blk
</span><a href="#local-6989586621679665436"><span class="hs-identifier hs-var">pForInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679665435"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665435"><span class="hs-identifier hs-var">nodeStartTime'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621679665434"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665434"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Notice</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665433"><span class="annot"><span class="annottext">cfg :: TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolInfo IO blk -&gt; TopLevelConfig blk
forall (m :: * -&gt; *) b. ProtocolInfo m b -&gt; TopLevelConfig b
</span><span class="hs-identifier hs-var hs-var">pInfoConfig</span></span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo IO blk -&gt; TopLevelConfig blk)
-&gt; ProtocolInfo IO blk -&gt; TopLevelConfig blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs IO blk -&gt; ProtocolInfo IO blk
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs m blk -&gt; ProtocolInfo m blk
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier hs-var">protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs IO blk
</span><a href="#local-6989586621679665436"><span class="hs-identifier hs-var">pForInfo</span></a></span><span>
</span><span id="line-327"></span><span>      </span><span id="local-6989586621679665431"><span class="annot"><span class="annottext">protocolDependentItems :: [(Text, Text)]
</span><a href="#local-6989586621679665431"><span class="hs-identifier hs-var hs-var">protocolDependentItems</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621679665437"><span class="hs-identifier hs-var">whichP</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-329"></span><span>          </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier hs-var">ByronBlockType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-330"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DegenLedgerConfig</span></span><span> </span><span id="local-6989586621679665428"><span class="annot"><span class="annottext">PartialLedgerConfig ByronBlock
</span><a href="#local-6989586621679665428"><span class="hs-identifier hs-var">cfgByron</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; LedgerConfig blk
forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><span class="hs-identifier hs-var">Consensus.configLedger</span></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-331"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; ByronPartialLedgerConfig -&gt; [(Text, Text)]
forall a b blk.
(IsString a, ConvertText FilePath b, ConfigSupportsNode blk) =&gt;
TopLevelConfig blk -&gt; ByronPartialLedgerConfig -&gt; [(a, b)]
</span><a href="#local-6989586621679665426"><span class="hs-identifier hs-var">getGenesisValuesByron</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig ByronBlock
ByronPartialLedgerConfig
</span><a href="#local-6989586621679665428"><span class="hs-identifier hs-var">cfgByron</span></a></span><span>
</span><span id="line-332"></span><span>          </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier hs-var">ShelleyBlockType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DegenLedgerConfig</span></span><span> </span><span id="local-6989586621679665424"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) StandardShelley)
</span><a href="#local-6989586621679665424"><span class="hs-identifier hs-var">cfgShelley</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; LedgerConfig blk
forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><span class="hs-identifier hs-var">Consensus.configLedger</span></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-334"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig StandardShelley -&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Shelley&quot;</span></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) StandardShelley)
ShelleyPartialLedgerConfig StandardShelley
</span><a href="#local-6989586621679665424"><span class="hs-identifier hs-var">cfgShelley</span></a></span><span>
</span><span id="line-335"></span><span>          </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-api-1.33.0/noopt/doc/html/cardano-api/src"><span class="hs-identifier hs-var">CardanoBlockType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoLedgerConfig</span></span><span> </span><span id="local-6989586621679665420"><span class="annot"><span class="annottext">PartialLedgerConfig ByronBlock
</span><a href="#local-6989586621679665420"><span class="hs-identifier hs-var">cfgByron</span></a></span></span><span> </span><span id="local-6989586621679665419"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) StandardShelley)
</span><a href="#local-6989586621679665419"><span class="hs-identifier hs-var">cfgShelley</span></a></span></span><span> </span><span id="local-6989586621679665418"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (AllegraEra StandardCrypto))
</span><a href="#local-6989586621679665418"><span class="hs-identifier hs-var">cfgAllegra</span></a></span></span><span>
</span><span id="line-337"></span><span>                                    </span><span id="local-6989586621679665417"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (MaryEra StandardCrypto))
</span><a href="#local-6989586621679665417"><span class="hs-identifier hs-var">cfgMary</span></a></span></span><span> </span><span id="local-6989586621679665416"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (AlonzoEra StandardCrypto))
</span><a href="#local-6989586621679665416"><span class="hs-identifier hs-var">cfgAlonzo</span></a></span></span><span> </span><span id="local-6989586621679665415"><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (Praos StandardCrypto) (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679665415"><span class="hs-identifier hs-var">cfgBabbage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; LedgerConfig blk
forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><span class="hs-identifier hs-var">Consensus.configLedger</span></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-338"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; ByronPartialLedgerConfig -&gt; [(Text, Text)]
forall a b blk.
(IsString a, ConvertText FilePath b, ConfigSupportsNode blk) =&gt;
TopLevelConfig blk -&gt; ByronPartialLedgerConfig -&gt; [(a, b)]
</span><a href="#local-6989586621679665426"><span class="hs-identifier hs-var">getGenesisValuesByron</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665433"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig ByronBlock
ByronPartialLedgerConfig
</span><a href="#local-6989586621679665420"><span class="hs-identifier hs-var">cfgByron</span></a></span><span>
</span><span id="line-339"></span><span>               </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig StandardShelley -&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Shelley&quot;</span></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) StandardShelley)
ShelleyPartialLedgerConfig StandardShelley
</span><a href="#local-6989586621679665419"><span class="hs-identifier hs-var">cfgShelley</span></a></span><span>
</span><span id="line-340"></span><span>               </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig (AllegraEra StandardCrypto)
-&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Allegra&quot;</span></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (AllegraEra StandardCrypto))
ShelleyPartialLedgerConfig (AllegraEra StandardCrypto)
</span><a href="#local-6989586621679665418"><span class="hs-identifier hs-var">cfgAllegra</span></a></span><span>
</span><span id="line-341"></span><span>               </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig (MaryEra StandardCrypto)
-&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mary&quot;</span></span><span>    </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (MaryEra StandardCrypto))
ShelleyPartialLedgerConfig (MaryEra StandardCrypto)
</span><a href="#local-6989586621679665417"><span class="hs-identifier hs-var">cfgMary</span></a></span><span>
</span><span id="line-342"></span><span>               </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig (AlonzoEra StandardCrypto)
-&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Alonzo&quot;</span></span><span>  </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (TPraos StandardCrypto) (AlonzoEra StandardCrypto))
ShelleyPartialLedgerConfig (AlonzoEra StandardCrypto)
</span><a href="#local-6989586621679665416"><span class="hs-identifier hs-var">cfgAlonzo</span></a></span><span>
</span><span id="line-343"></span><span>               </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyPartialLedgerConfig (BabbageEra StandardCrypto)
-&gt; [(Text, Text)]
forall a b era.
(IsString a, ConvertText FilePath b, Semigroup a) =&gt;
a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var">getGenesisValues</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Babbage&quot;</span></span><span>  </span><span class="annot"><span class="annottext">PartialLedgerConfig
  (ShelleyBlock (Praos StandardCrypto) (BabbageEra StandardCrypto))
ShelleyPartialLedgerConfig (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679665415"><span class="hs-identifier hs-var">cfgBabbage</span></a></span><span>
</span><span id="line-344"></span><span>      </span><span id="local-6989586621679665414"><span class="annot"><span class="annottext">items :: [(Text, Text)]
</span><a href="#local-6989586621679665414"><span class="hs-identifier hs-var hs-var">items</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">([(Text, Text)] -&gt; [(Text, Text)])
-&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;protocol&quot;</span></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Text) -&gt; (Protocol -&gt; FilePath) -&gt; Protocol -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Protocol -&gt; FilePath
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Protocol -&gt; Text) -&gt; Protocol -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Protocol
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocol"><span class="hs-identifier hs-var">ncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621679665439"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;version&quot;</span></span><span class="hs-special">,</span><span>       </span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Text) -&gt; (Version -&gt; FilePath) -&gt; Version -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Version -&gt; FilePath
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">showVersion</span></a></span><span> </span><span class="annot"><span class="annottext">(Version -&gt; Text) -&gt; Version -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Paths_cardano_node.html#version"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;commit&quot;</span></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">Text
</span><a href="../file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-8.10.7/cardano-git-rev-0.1.0.0/noopt/doc/html/cardano-git-rev/src"><span class="hs-identifier hs-var">gitRev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeStartTime&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Text
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679665435"><span class="hs-identifier hs-var">nodeStartTime'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>        </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, Text)]
</span><a href="#local-6989586621679665431"><span class="hs-identifier hs-var">protocolDependentItems</span></a></span><span>
</span><span id="line-350"></span><span>      </span><span id="local-6989586621679665412"><span class="annot"><span class="annottext">logObjects :: [LogObject Text]
</span><a href="#local-6989586621679665412"><span class="hs-identifier hs-var hs-var">logObjects</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">((Text, Text) -&gt; LogObject Text)
-&gt; [(Text, Text)] -&gt; [LogObject Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679665410"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665410"><span class="hs-identifier hs-var">nm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679665409"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665409"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; LOMeta -&gt; LOContent Text -&gt; LogObject Text
forall a. Text -&gt; LOMeta -&gt; LOContent a -&gt; LogObject a
</span><span class="hs-identifier hs-var">LogObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;basicInfo.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665410"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679665434"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; LOContent Text
forall a. a -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogMessage</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679665409"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, Text)]
</span><a href="#local-6989586621679665414"><span class="hs-identifier hs-var">items</span></a></span><span>
</span><span id="line-352"></span><span>  </span><span class="annot"><span class="annottext">[LogObject Text] -&gt; IO [LogObject Text]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[LogObject Text]
</span><a href="#local-6989586621679665412"><span class="hs-identifier hs-var">logObjects</span></a></span><span>
</span><span id="line-353"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>  </span><span id="local-6989586621679665426"><span class="annot"><span class="annottext">getGenesisValuesByron :: TopLevelConfig blk -&gt; ByronPartialLedgerConfig -&gt; [(a, b)]
</span><a href="#local-6989586621679665426"><span class="hs-identifier hs-var hs-var">getGenesisValuesByron</span></a></span></span><span> </span><span id="local-6989586621679665406"><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665406"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679665405"><span class="annot"><span class="annottext">ByronPartialLedgerConfig
</span><a href="#local-6989586621679665405"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665404"><span class="annot"><span class="annottext">genesis :: LedgerConfig ByronBlock
</span><a href="#local-6989586621679665404"><span class="hs-identifier hs-var hs-var">genesis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByronPartialLedgerConfig -&gt; LedgerConfig ByronBlock
</span><span class="hs-identifier hs-var hs-var">byronLedgerConfig</span></span><span> </span><span class="annot"><span class="annottext">ByronPartialLedgerConfig
</span><a href="#local-6989586621679665405"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;systemStartTime&quot;</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">UTCTime -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemStart -&gt; UTCTime
</span><span class="hs-identifier hs-var hs-var">WCT.getSystemStart</span></span><span> </span><span class="annot"><span class="annottext">(SystemStart -&gt; UTCTime)
-&gt; (BlockConfig blk -&gt; SystemStart) -&gt; BlockConfig blk -&gt; UTCTime
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk -&gt; SystemStart
forall blk.
ConfigSupportsNode blk =&gt;
BlockConfig blk -&gt; SystemStart
</span><span class="hs-identifier hs-var">getSystemStart</span></span><span> </span><span class="annot"><span class="annottext">(BlockConfig blk -&gt; UTCTime) -&gt; BlockConfig blk -&gt; UTCTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; BlockConfig blk
forall blk. TopLevelConfig blk -&gt; BlockConfig blk
</span><span class="hs-identifier hs-var">Consensus.configBlock</span></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621679665406"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;slotLengthByron&quot;</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotLength -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var hs-var">WCT.getSlotLength</span></span><span> </span><span class="annot"><span class="annottext">(SlotLength -&gt; NominalDiffTime)
-&gt; (Natural -&gt; SlotLength) -&gt; Natural -&gt; NominalDiffTime
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; SlotLength
</span><span class="hs-identifier hs-var">fromByronSlotLength</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; NominalDiffTime) -&gt; Natural -&gt; NominalDiffTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Natural
</span><span class="hs-identifier hs-var">genesisSlotLength</span></span><span> </span><span class="annot"><span class="annottext">LedgerConfig ByronBlock
Config
</span><a href="#local-6989586621679665404"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;epochLengthByron&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSize -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unEpochSize</span></span><span> </span><span class="annot"><span class="annottext">(EpochSize -&gt; Word64)
-&gt; (EpochSlots -&gt; EpochSize) -&gt; EpochSlots -&gt; Word64
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSlots -&gt; EpochSize
</span><span class="hs-identifier hs-var">fromByronEpochSlots</span></span><span> </span><span class="annot"><span class="annottext">(EpochSlots -&gt; Word64) -&gt; EpochSlots -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Config -&gt; EpochSlots
</span><span class="hs-identifier hs-var">Gen.configEpochSlots</span></span><span> </span><span class="annot"><span class="annottext">LedgerConfig ByronBlock
Config
</span><a href="#local-6989586621679665404"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621679665423"><span class="annot"><span class="annottext">getGenesisValues :: a -&gt; ShelleyPartialLedgerConfig era -&gt; [(a, b)]
</span><a href="#local-6989586621679665423"><span class="hs-identifier hs-var hs-var">getGenesisValues</span></a></span></span><span> </span><span id="local-6989586621679665393"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665393"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679665392"><span class="annot"><span class="annottext">ShelleyPartialLedgerConfig era
</span><a href="#local-6989586621679665392"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679665391"><span class="annot"><span class="annottext">genesis :: ShelleyGenesis era
</span><a href="#local-6989586621679665391"><span class="hs-identifier hs-var hs-var">genesis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyLedgerConfig era -&gt; ShelleyGenesis era
forall era. ShelleyLedgerConfig era -&gt; ShelleyGenesis era
</span><span class="hs-identifier hs-var">shelleyLedgerGenesis</span></span><span> </span><span class="annot"><span class="annottext">(ShelleyLedgerConfig era -&gt; ShelleyGenesis era)
-&gt; ShelleyLedgerConfig era -&gt; ShelleyGenesis era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyPartialLedgerConfig era -&gt; ShelleyLedgerConfig era
forall era.
ShelleyPartialLedgerConfig era -&gt; ShelleyLedgerConfig era
</span><span class="hs-identifier hs-var hs-var">shelleyLedgerConfig</span></span><span> </span><span class="annot"><span class="annottext">ShelleyPartialLedgerConfig era
</span><a href="#local-6989586621679665392"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;systemStartTime&quot;</span></span><span class="hs-special">,</span><span>          </span><span class="annot"><span class="annottext">UTCTime -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyGenesis era -&gt; UTCTime
forall era. ShelleyGenesis era -&gt; UTCTime
</span><span class="hs-identifier hs-var hs-var">SL.sgSystemStart</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era
</span><a href="#local-6989586621679665391"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;slotLength&quot;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665393"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotLength -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var hs-var">WCT.getSlotLength</span></span><span> </span><span class="annot"><span class="annottext">(SlotLength -&gt; NominalDiffTime)
-&gt; (NominalDiffTime -&gt; SlotLength)
-&gt; NominalDiffTime
-&gt; NominalDiffTime
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; SlotLength
</span><span class="hs-identifier hs-var">WCT.mkSlotLength</span></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; NominalDiffTime)
-&gt; NominalDiffTime -&gt; NominalDiffTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era -&gt; NominalDiffTime
forall era. ShelleyGenesis era -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var hs-var">SL.sgSlotLength</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era
</span><a href="#local-6989586621679665391"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;epochLength&quot;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665393"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">,</span><span>       </span><span class="annot"><span class="annottext">Word64 -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSize -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unEpochSize</span></span><span> </span><span class="annot"><span class="annottext">(EpochSize -&gt; Word64)
-&gt; (ShelleyGenesis era -&gt; EpochSize)
-&gt; ShelleyGenesis era
-&gt; Word64
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era -&gt; EpochSize
forall era. ShelleyGenesis era -&gt; EpochSize
</span><span class="hs-identifier hs-var hs-var">SL.sgEpochLength</span></span><span> </span><span class="annot"><span class="annottext">(ShelleyGenesis era -&gt; Word64) -&gt; ShelleyGenesis era -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era
</span><a href="#local-6989586621679665391"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;slotsPerKESPeriod&quot;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679665393"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; b
forall a b. (Show a, ConvertText FilePath b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyGenesis era -&gt; Word64
forall era. ShelleyGenesis era -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">SL.sgSlotsPerKESPeriod</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGenesis era
</span><a href="#local-6989586621679665391"><span class="hs-identifier hs-var">genesis</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-367"></span></pre></body></html>